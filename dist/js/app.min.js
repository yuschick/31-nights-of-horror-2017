/******/
!function(e){function t(r){if(n[r])return n[r].exports
var i=n[r]={exports:{},id:r,loaded:!1}
return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={}
t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict"
var r=(n(1),n(3)),i=n(5),o=n(158)
!function(){i.init(),o.init(),r.init()}()},function(e,t,n){"use strict"
var r=n(2)
e.exports={movie:null,trailer:null,removeTrailers:function(){document.querySelectorAll(".trailer-container.active").forEach(function(e){e.innerHTML=""})},buildTemplate:function(e,t){var n=document.getElementById("trailer-template"),i=n.innerHTML,o=r.compile(i),a={trailer:this.trailer},s=o(a)
this.insertTemplate(s)},insertTemplate:function(e){var t=document.querySelector(".day-outer-container[data-movie="+this.movie+"]"),n=t.querySelector(".trailer-container")
this.toggleContainerClasses(t),n.classList.add("active"),n.innerHTML=e,this.bindCloseIcon()},toggleContainerClasses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".day-outer-container.trailer")
t&&t.classList.remove("trailer"),e&&e.classList.add("trailer")},bindCloseIcon:function(){var e=this
document.querySelector(".close-icon").addEventListener("click",function(){e.removeTrailers(),e.toggleContainerClasses()})},init:function(e,t){this.removeTrailers(),this.movie=e,this.trailer=t,this.buildTemplate()}}},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports
var i=n[r]={exports:{},id:r,loaded:!1}
return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={}
return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict"
function r(){var e=_()
return e.compile=function(t,n){return l.compile(t,n,e)},e.precompile=function(t,n){return l.precompile(t,n,e)},e.AST=u.default,e.Compiler=l.Compiler,e.JavaScriptCompiler=p.default,e.Parser=c.parser,e.parse=c.parse,e}var i=n(1).default
t.__esModule=!0
var o=n(2),a=i(o),s=n(35),u=i(s),c=n(36),l=n(41),h=n(42),p=i(h),d=n(39),f=i(d),v=n(34),y=i(v),_=a.default.create,g=r()
g.create=r,y.default(g),g.Visitor=f.default,g.default=g,t.default=g,e.exports=t.default},function(e,t){"use strict"
t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict"
function r(){var e=new s.HandlebarsEnvironment
return d.extend(e,s),e.SafeString=c.default,e.Exception=h.default,e.Utils=d,e.escapeExpression=d.escapeExpression,e.VM=v,e.template=function(t){return v.template(t,e)},e}var i=n(3).default,o=n(1).default
t.__esModule=!0
var a=n(4),s=i(a),u=n(21),c=o(u),l=n(6),h=o(l),p=n(5),d=i(p),f=n(22),v=i(f),y=n(34),_=o(y),g=r()
g.create=r,_.default(g),g.default=g,t.default=g,e.exports=t.default},function(e,t){"use strict"
t.default=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t},t.__esModule=!0},function(e,t,n){"use strict"
function r(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},u.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var i=n(1).default
t.__esModule=!0,t.HandlebarsEnvironment=r
var o=n(5),a=n(6),s=i(a),u=n(10),c=n(18),l=n(20),h=i(l)
t.VERSION="4.0.10"
t.COMPILER_REVISION=7
var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"}
t.REVISION_CHANGES=p
var d="[object Object]"
r.prototype={constructor:r,logger:h.default,log:h.default.log,registerHelper:function(e,t){if(o.toString.call(e)===d){if(t)throw new s.default("Arg not supported with multiple helpers")
o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===d)o.extend(this.partials,e)
else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined')
this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===d){if(t)throw new s.default("Arg not supported with multiple decorators")
o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}}
var f=h.default.log
t.log=f,t.createFrame=o.createFrame,t.logger=h.default},function(e,t){"use strict"
function n(e){return l[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n])
return e}function i(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n
return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML()
if(null==e)return""
if(!e)return e+""
e=""+e}return p.test(e)?e.replace(h,n):e}function a(e){return!e&&0!==e||!(!v(e)||0!==e.length)}function s(e){var t=r({},e)
return t._parent=e,t}function u(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=r,t.indexOf=i,t.escapeExpression=o,t.isEmpty=a,t.createFrame=s,t.blockParams=u,t.appendContextPath=c
var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,p=/[&<>"'`=]/,d=Object.prototype.toString
t.toString=d
var f=function(e){return"function"==typeof e}
f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)}),t.isFunction=f
var v=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===d.call(e)}
t.isArray=v},function(e,t,n){"use strict"
function r(e,t){var n=t&&t.loc,a=void 0,s=void 0
n&&(a=n.start.line,s=n.start.column,e+=" - "+a+":"+s)
for(var u=Error.prototype.constructor.call(this,e),c=0;c<o.length;c++)this[o[c]]=u[o[c]]
Error.captureStackTrace&&Error.captureStackTrace(this,r)
try{n&&(this.lineNumber=a,i?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(e){}}var i=n(7).default
t.__esModule=!0
var o=["description","fileName","lineNumber","message","name","number","stack"]
r.prototype=new Error,t.default=r,e.exports=t.default},function(e,t,n){e.exports={default:n(8),__esModule:!0}},function(e,t,n){var r=n(9)
e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t){var n=Object
e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict"
function r(e){a.default(e),u.default(e),l.default(e),p.default(e),f.default(e),y.default(e),g.default(e)}var i=n(1).default
t.__esModule=!0,t.registerDefaultHelpers=r
var o=n(11),a=i(o),s=n(12),u=i(s),c=n(13),l=i(c),h=n(14),p=i(h),d=n(15),f=i(d),v=n(16),y=i(v),_=n(17),g=i(_)},function(e,t,n){"use strict"
t.__esModule=!0
var r=n(5)
t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,o=n.fn
if(!0===t)return o(this)
if(!1===t||null==t)return i(this)
if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this)
if(n.data&&n.ids){var a=r.createFrame(n.data)
a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)})},e.exports=t.default},function(e,t,n){"use strict"
var r=n(1).default
t.__esModule=!0
var i=n(5),o=n(6),a=r(o)
t.default=function(e){e.registerHelper("each",function(e,t){function n(t,n,o){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!o,l&&(c.contextPath=l+t)),u+=r(e[t],{data:c,blockParams:i.blockParams([e[t],t],[l+t,null])})}if(!t)throw new a.default("Must pass iterator to #each")
var r=t.fn,o=t.inverse,s=0,u="",c=void 0,l=void 0
if(t.data&&t.ids&&(l=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(c=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;s<h;s++)s in e&&n(s,s,s===e.length-1)
else{var p=void 0
for(var d in e)e.hasOwnProperty(d)&&(void 0!==p&&n(p,s-1),p=d,s++)
void 0!==p&&n(p,s-1,!0)}return 0===s&&(u=o(this)),u})},e.exports=t.default},function(e,t,n){"use strict"
var r=n(1).default
t.__esModule=!0
var i=n(6),o=r(i)
t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict"
t.__esModule=!0
var r=n(5)
t.default=function(e){e.registerHelper("if",function(e,t){return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},function(e,t){"use strict"
t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r])
var i=1
null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t.default},function(e,t){"use strict"
t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},function(e,t,n){"use strict"
t.__esModule=!0
var r=n(5)
t.default=function(e){e.registerHelper("with",function(e,t){r.isFunction(e)&&(e=e.call(this))
var n=t.fn
if(r.isEmpty(e))return t.inverse(this)
var i=t.data
return t.data&&t.ids&&(i=r.createFrame(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},function(e,t,n){"use strict"
function r(e){a.default(e)}var i=n(1).default
t.__esModule=!0,t.registerDefaultDecorators=r
var o=n(19),a=i(o)},function(e,t,n){"use strict"
t.__esModule=!0
var r=n(5)
t.default=function(e){e.registerDecorator("inline",function(e,t,n,i){var o=e
return t.partials||(t.partials={},o=function(i,o){var a=n.partials
n.partials=r.extend({},a,t.partials)
var s=e(i,o)
return n.partials=a,s}),t.partials[i.args[0]]=i.fn,o})},e.exports=t.default},function(e,t,n){"use strict"
t.__esModule=!0
var r=n(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase())
e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e]
console[t]||(t="log")
for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o]
console[t].apply(console,r)}}}
t.default=i,e.exports=t.default},function(e,t){"use strict"
function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,n){"use strict"
function r(e){var t=e&&e[0]||1,n=g.COMPILER_REVISION
if(t!==n){if(t<n){var r=g.REVISION_CHANGES[n],i=g.REVISION_CHANGES[t]
throw new _.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new _.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function n(n,r,i){i.hash&&(r=v.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i)
var o=t.VM.invokePartial.call(this,n,r,i)
if(null==o&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),o=i.partials[i.name](r,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,u=a.length;s<u&&(a[s]||s+1!==u);s++)a[s]=i.indent+a[s]
o=a.join("\n")}return o}throw new _.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(t){function n(t){return""+e.main(i,t,i.helpers,i.partials,a,u,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data
r._setup(o),!o.partial&&e.useData&&(a=c(t,a))
var s=void 0,u=e.useBlockParams?[]:void 0
return e.useDepths&&(s=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(n=l(e.main,n,i,o.depths||[],a,u))(t,o)}if(!t)throw new _.default("No environment passed to template")
if(!e||!e.main)throw new _.default("Unknown template object: "+typeof e)
e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler)
var i={strict:function(e,t){if(!(t in e))throw new _.default('"'+t+'" not defined in '+e)
return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:v.escapeExpression,invokePartial:n,fn:function(t){var n=e[t]
return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],s=this.fn(e)
return t||i||r||n?a=o(this,e,s,t,n,r,i):a||(a=this.programs[e]=o(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent
return e},merge:function(e,t){var n=e||t
return e&&t&&e!==t&&(n=v.extend({},t,e)),n},nullContext:h({}),noop:t.VM.noop,compilerInfo:e.compiler}
return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=i.merge(n.decorators,t.decorators)))},r._child=function(t,n,r,a){if(e.useBlockParams&&!r)throw new _.default("must pass block params")
if(e.useDepths&&!a)throw new _.default("must pass parent depths")
return o(i,t,e[t],n,0,r,a)},r}function o(e,t,n,r,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a
return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),n(e,t,e.helpers,e.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return s=l(n,s,e,a,r,o),s.program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function s(e,t,n){var r=n.data&&n.data["partial-block"]
n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath)
var i=void 0
if(n.fn&&n.fn!==u&&function(){n.data=g.createFrame(n.data)
var e=n.fn
i=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1]
return n.data=g.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=v.extend({},n.partials,e.partials))}(),void 0===e&&i&&(e=i),void 0===e)throw new _.default("The partial "+n.name+" could not be found")
if(e instanceof Function)return e(t,n)}function u(){return""}function c(e,t){return t&&"root"in t||(t=t?g.createFrame(t):{},t.root=e),t}function l(e,t,n,r,i,o){if(e.decorator){var a={}
t=e.decorator(t,a,n,r&&r[0],i,o,r),v.extend(t,a)}return t}var h=n(23).default,p=n(3).default,d=n(1).default
t.__esModule=!0,t.checkRevision=r,t.template=i,t.wrapProgram=o,t.resolvePartial=a,t.invokePartial=s,t.noop=u
var f=n(5),v=p(f),y=n(6),_=d(y),g=n(4)},function(e,t,n){e.exports={default:n(24),__esModule:!0}},function(e,t,n){n(25),e.exports=n(30).Object.seal},function(e,t,n){var r=n(26)
n(27)("seal",function(e){return function(t){return e&&r(t)?e(t):t}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(28),i=n(30),o=n(33)
e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={}
a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(29),i=n(30),o=n(31),a="prototype",s=function(e,t,n){var u,c,l,h=e&s.F,p=e&s.G,d=e&s.S,f=e&s.P,v=e&s.B,y=e&s.W,_=p?i:i[t]||(i[t]={}),g=p?r:d?r[t]:(r[t]||{})[a]
p&&(n=t)
for(u in n)(c=!h&&g&&u in g)&&u in _||(l=c?g[u]:n[u],_[u]=p&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):y&&g[u]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)}
return t[a]=e[a],t}(l):f&&"function"==typeof l?o(Function.call,l):l,f&&((_[a]||(_[a]={}))[u]=l))}
s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")()
"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"}
"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(32)
e.exports=function(e,t,n){if(r(e),void 0===t)return e
switch(n){case 1:return function(n){return e.call(t,n)}
case 2:return function(n,r){return e.call(t,n,r)}
case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")
return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){(function(n){"use strict"
t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars
e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict"
t.__esModule=!0
var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}}
t.default=n,e.exports=t.default},function(e,t,n){"use strict"
function r(e,t){return"Program"===e.type?e:(s.default.yy=d,d.locInfo=function(e){return new d.SourceLocation(t&&t.srcName,e)},new c.default(t).accept(s.default.parse(e)))}var i=n(1).default,o=n(3).default
t.__esModule=!0,t.parse=r
var a=n(37),s=i(a),u=n(38),c=i(u),l=n(40),h=o(l),p=n(5)
t.parser=s.default
var d={}
p.extend(d,h)},function(e,t){"use strict"
t.__esModule=!0
var n=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1
switch(i){case 1:return o[s-1]
case 2:this.$=r.prepareProgram(o[s])
break
case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s]
break
case 9:this.$={type:"CommentStatement",value:r.stripComment(o[s]),strip:r.stripFlags(o[s],o[s]),loc:r.locInfo(this._$)}
break
case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:r.locInfo(this._$)}
break
case 11:this.$=r.prepareRawBlock(o[s-2],o[s-1],o[s],this._$)
break
case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]}
break
case 13:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$)
break
case 14:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$)
break
case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])}
break
case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])}
break
case 18:this.$={strip:r.stripFlags(o[s-1],o[s-1]),program:o[s]}
break
case 19:var u=r.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),c=r.prepareProgram([u],o[s-1].loc)
c.chained=!0,this.$={strip:o[s-2].strip,program:c,chain:!0}
break
case 20:this.$=o[s]
break
case 21:this.$={path:o[s-1],strip:r.stripFlags(o[s-2],o[s])}
break
case 22:case 23:this.$=r.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],r.stripFlags(o[s-4],o[s]),this._$)
break
case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:r.stripFlags(o[s-4],o[s]),loc:r.locInfo(this._$)}
break
case 25:this.$=r.preparePartialBlock(o[s-2],o[s-1],o[s],this._$)
break
case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:r.stripFlags(o[s-4],o[s])}
break
case 27:case 28:this.$=o[s]
break
case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:r.locInfo(this._$)}
break
case 30:this.$={type:"Hash",pairs:o[s],loc:r.locInfo(this._$)}
break
case 31:this.$={type:"HashPair",key:r.id(o[s-2]),value:o[s],loc:r.locInfo(this._$)}
break
case 32:this.$=r.id(o[s-1])
break
case 33:case 34:this.$=o[s]
break
case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:r.locInfo(this._$)}
break
case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:r.locInfo(this._$)}
break
case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:r.locInfo(this._$)}
break
case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)}
break
case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)}
break
case 40:case 41:this.$=o[s]
break
case 42:this.$=r.preparePath(!0,o[s],this._$)
break
case 43:this.$=r.preparePath(!1,o[s],this._$)
break
case 44:o[s-2].push({part:r.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2]
break
case 45:this.$=[{part:r.id(o[s]),original:o[s]}]
break
case 46:this.$=[]
break
case 47:o[s-1].push(o[s])
break
case 48:this.$=[o[s]]
break
case 49:o[s-1].push(o[s])
break
case 50:this.$=[]
break
case 51:o[s-1].push(o[s])
break
case 58:this.$=[]
break
case 59:o[s-1].push(o[s])
break
case 64:this.$=[]
break
case 65:o[s-1].push(o[s])
break
case 70:this.$=[]
break
case 71:o[s-1].push(o[s])
break
case 78:this.$=[]
break
case 79:o[s-1].push(o[s])
break
case 82:this.$=[]
break
case 83:o[s-1].push(o[s])
break
case 86:this.$=[]
break
case 87:o[s-1].push(o[s])
break
case 90:this.$=[]
break
case 91:o[s-1].push(o[s])
break
case 94:this.$=[]
break
case 95:o[s-1].push(o[s])
break
case 98:this.$=[o[s]]
break
case 99:o[s-1].push(o[s])
break
case 100:this.$=[o[s]]
break
case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,u=0,c=0
this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={})
var l=this.lexer.yylloc
i.push(l)
var h=this.lexer.options&&this.lexer.options.ranges
"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError)
for(var p,d,f,v,y,_,g,m,b,E={};;){if(f=n[n.length-1],this.defaultActions[f]?v=this.defaultActions[f]:(null!==p&&void 0!==p||(p=function(){var e
return e=t.lexer.lex()||1,"number"!=typeof e&&(e=t.symbols_[e]||e),e}()),v=o[f]&&o[f][p]),void 0===v||!v.length||!v[0]){var w=""
if(!c){b=[]
for(_ in o[f])this.terminals_[_]&&_>2&&b.push("'"+this.terminals_[_]+"'")
w=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:l,expected:b})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p)
switch(v[0]){case 1:n.push(p),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(v[1]),p=null,d?(p=d,d=null):(u=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,l=this.lexer.yylloc,c>0&&c--)
break
case 2:if(g=this.productions_[v[1]][1],E.$=r[r.length-g],E._$={first_line:i[i.length-(g||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(g||1)].first_column,last_column:i[i.length-1].last_column},h&&(E._$.range=[i[i.length-(g||1)].range[0],i[i.length-1].range[1]]),void 0!==(y=this.performAction.call(E,a,u,s,this.yy,v[1],r,i)))return y
g&&(n=n.slice(0,-1*g*2),r=r.slice(0,-1*g),i=i.slice(0,-1*g)),n.push(this.productions_[v[1]][0]),r.push(E.$),i.push(E._$),m=o[n[n.length-2]][n[n.length-1]],n.push(m)
break
case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e)
this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0]
return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g)
this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t
var r=this.match.split(/(?:\r\n?|\n)/g)
this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1)
var i=this.yylloc.range
return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length)
return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match
return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-")
return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF
this._input||(this.done=!0)
var e,t,n,r,i
this._more||(this.yytext="",this.match="")
for(var o=this._currentRules(),a=0;a<o.length&&(!(n=this._input.match(this.rules[o[a]]))||t&&!(n[0].length>t[0].length)||(t=n,r=a,this.options.flex));a++);return t?(i=t[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next()
return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}}
return e.options={},e.performAction=function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15
break
case 1:return 15
case 2:return this.popState(),15
case 3:return this.begin("raw"),15
case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(t.yytext=t.yytext.substr(5,t.yyleng-9),"END_RAW_BLOCK")
case 5:return 15
case 6:return this.popState(),14
case 7:return 65
case 8:return 68
case 9:return 19
case 10:return this.popState(),this.begin("raw"),23
case 11:return 55
case 12:return 60
case 13:return 29
case 14:return 47
case 15:case 16:return this.popState(),44
case 17:return 34
case 18:return 39
case 19:return 51
case 20:return 48
case 21:this.unput(t.yytext),this.popState(),this.begin("com")
break
case 22:return this.popState(),14
case 23:return 48
case 24:return 73
case 25:case 26:return 72
case 27:return 87
case 28:break
case 29:return this.popState(),54
case 30:return this.popState(),33
case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80
case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80
case 33:return 85
case 34:case 35:return 82
case 36:return 83
case 37:return 84
case 38:return 81
case 39:return 75
case 40:return 77
case 41:return 72
case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72
case 43:return"INVALID"
case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},e}()
return t.lexer=n,e.prototype=t,t.Parser=e,new e}()
t.default=n,e.exports=t.default},function(e,t,n){"use strict"
function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0]
this.options=e}function i(e,t,n){void 0===t&&(t=e.length)
var r=e[t-1],i=e[t-2]
return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function o(e,t,n){void 0===t&&(t=-1)
var r=e[t+1],i=e[t+2]
return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function a(e,t,n){var r=e[null==t?0:t+1]
if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value
r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function s(e,t,n){var r=e[null==t?e.length-1:t-1]
if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value
return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}var u=n(1).default
t.__esModule=!0
var c=n(39),l=u(c)
r.prototype=new l.default,r.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen
this.isRootSeen=!0
for(var r=e.body,u=0,c=r.length;u<c;u++){var l=r[u],h=this.accept(l)
if(h){var p=i(r,u,n),d=o(r,u,n),f=h.openStandalone&&p,v=h.closeStandalone&&d,y=h.inlineStandalone&&p&&d
h.close&&a(r,u,!0),h.open&&s(r,u,!0),t&&y&&(a(r,u),s(r,u)&&"PartialStatement"===l.type&&(l.indent=/([ \t]+$)/.exec(r[u-1].original)[1])),t&&f&&(a((l.program||l.inverse).body),s(r,u)),t&&v&&(a(r,u),s((l.inverse||l.program).body))}}return e},r.prototype.BlockStatement=r.prototype.DecoratorBlock=r.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse)
var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,u=n
if(n&&n.chained)for(r=n.body[0].program;u.chained;)u=u.body[u.body.length-1].program
var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:i((r||t).body)}
if(e.openStrip.close&&a(t.body,null,!0),n){var l=e.inverseStrip
l.open&&s(t.body,null,!0),l.close&&a(r.body,null,!0),e.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&i(t.body)&&o(r.body)&&(s(t.body),a(r.body))}else e.closeStrip.open&&s(t.body,null,!0)
return c},r.prototype.Decorator=r.prototype.MustacheStatement=function(e){return e.strip},r.prototype.PartialStatement=r.prototype.CommentStatement=function(e){var t=e.strip||{}
return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=r,e.exports=t.default},function(e,t,n){"use strict"
function r(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function o(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=n(1).default
t.__esModule=!0
var u=n(6),c=s(u)
r.prototype={constructor:r,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t])
if(this.mutating){if(n&&!r.prototype[n.type])throw new c.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type)
e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new c.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new c.default("Unknown type: "+e.type,e)
this.current&&this.parents.unshift(this.current),this.current=e
var t=this[e.type](e)
return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=r,e.exports=t.default},function(e,t,n){"use strict"
function r(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc}
throw new y.default(e.path.original+" doesn't match "+t,n)}}function i(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function o(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function u(e,t,n){n=this.locInfo(n)
for(var r=e?"@":"",i=[],o=0,a="",s=0,u=t.length;s<u;s++){var c=t[s].part,l=t[s].original!==c
if(r+=(t[s].separator||"")+c,l||".."!==c&&"."!==c&&"this"!==c)i.push(c)
else{if(i.length>0)throw new y.default("Invalid path: "+r,{loc:n})
".."===c&&(o++,a+="../")}}return{type:"PathExpression",data:e,depth:o,parts:i,original:r,loc:n}}function c(e,t,n,r,i,o){var a=r.charAt(3)||r.charAt(2),s="{"!==a&&"&"!==a
return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:i,loc:this.locInfo(o)}}function l(e,t,n,i){r(e,n),i=this.locInfo(i)
var o={type:"Program",body:t,strip:{},loc:i}
return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function h(e,t,n,i,o,a){i&&i.path&&r(e,i)
var s=/\*/.test(e.open)
t.blockParams=e.blockParams
var u=void 0,c=void 0
if(n){if(s)throw new y.default("Unexpected inverse block on decorator",n)
n.chain&&(n.program.body[0].closeStrip=i.strip),c=n.strip,u=n.program}return o&&(o=u,u=t,t=o),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function p(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc
n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function d(e,t,n,i){return r(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}}var f=n(1).default
t.__esModule=!0,t.SourceLocation=i,t.id=o,t.stripFlags=a,t.stripComment=s,t.preparePath=u,t.prepareMustache=c,t.prepareRawBlock=l,t.prepareBlock=h,t.prepareProgram=p,t.preparePartialBlock=d
var v=n(6),y=f(v)},function(e,t,n){"use strict"
function r(){}function i(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new l.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e)
t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0)
var r=n.parse(e,t),i=(new n.Compiler).compile(r,t)
return(new n.JavaScriptCompiler).compile(i,t)}function o(e,t,n){function r(){var r=n.parse(e,t),i=(new n.Compiler).compile(r,t),o=(new n.JavaScriptCompiler).compile(i,t,void 0,!0)
return n.template(o)}function i(e,t){return o||(o=r()),o.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new l.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e)
t=h.extend({},t),"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0)
var o=void 0
return i._setup=function(e){return o||(o=r()),o._setup(e)},i._child=function(e,t,n,i){return o||(o=r()),o._child(e,t,n,i)},i}function a(e,t){if(e===t)return!0
if(h.isArray(e)&&h.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1
return!0}}function s(e){if(!e.path.parts){var t=e.path
e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var u=n(1).default
t.__esModule=!0,t.Compiler=r,t.precompile=i,t.compile=o
var c=n(6),l=u(c),h=n(5),p=n(35),d=u(p),f=[].slice
r.prototype={compiler:r,equals:function(e){var t=this.opcodes.length
if(e.opcodes.length!==t)return!1
for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n]
if(r.opcode!==i.opcode||!a(r.args,i.args))return!1}t=this.children.length
for(var n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1
return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[]
var n=t.knownHelpers
if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var r in n)r in n&&(this.options.knownHelpers[r]=n[r])
return this.accept(e)},compileProgram:function(e){var t=new this.compiler,n=t.compile(e,this.options),r=this.guid++
return this.usePartial=this.usePartial||n.usePartial,this.children[r]=n,this.useDepths=this.useDepths||n.useDepths,r},accept:function(e){if(!this[e.type])throw new l.default("Unknown type: "+e.type,e)
this.sourceNode.unshift(e)
var t=this[e.type](e)
return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams)
for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r])
return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e)
var t=e.program,n=e.inverse
t=t&&this.compileProgram(t),n=n&&this.compileProgram(n)
var r=this.classifySexpr(e)
"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path
this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0
var t=e.program
t&&(t=this.compileProgram(e.program))
var n=e.params
if(n.length>1)throw new l.default("Unsupported number of partial arguments: "+n.length,e)
n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}))
var r=e.name.original,i="SubExpression"===e.name.type
i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0)
var o=e.indent||""
this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,r,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e)
var t=this.classifySexpr(e)
"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,i=r.parts[0],o=null!=t||null!=n
this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path
t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.path,o=i.parts[0]
if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",r.length,o)
else{if(this.options.knownHelpersOnly)throw new l.default("You specified knownHelpersOnly, but used the unknown helper "+o,e)
i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",r.length,i.original,d.default.helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth)
var t=e.parts[0],n=d.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t)
r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length
for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value)
for(;n--;)this.opcode("assignToHash",t[n].key)
this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=d.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&d.default.helpers.helperExpression(e),i=!n&&(r||t)
if(i&&!r){var o=e.path.parts[0],a=this.options
a.knownHelpers[o]?r=!0:a.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||""
if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e)
else{if(this.trackIds){var n=void 0
if(!e.parts||d.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".")
this.opcode("pushId","BlockParam",n,r)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var i=e.params
return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],i=r&&h.indexOf(r,e)
if(r&&i>=0)return[t,i]}}}},function(e,t,n){"use strict"
function r(e){this.value=e}function i(){}function o(e,t,n,r){var i=t.popStack(),o=0,a=n.length
for(e&&a--;o<a;o++)i=t.nameLookup(i,n[o],r)
return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(n[o]),")"]:i}var a=n(1).default
t.__esModule=!0
var s=n(4),u=n(6),c=a(u),l=n(5),h=n(43),p=a(h)
i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"[",JSON.stringify(t),"]"]},depthedLookup:function(e){return[this.aliasable("container.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=s.COMPILER_REVISION
return[e,s.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return l.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams
var i=e.opcodes,o=void 0,a=void 0,s=void 0,u=void 0
for(s=0,u=i.length;s<u;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args)
if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c.default("Compile completed with content left on stack")
this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()))
var l=this.createFunctionContext(r)
if(this.isChild)return l
var h={compiler:this.compilerInfo(),main:l}
this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0)
var p=this.context,d=p.programs,f=p.decorators
for(s=0,u=d.length;s<u;s++)d[s]&&(h[s]=d[s],f[s]&&(h[s+"_d"]=f[s],h.useDecorators=!0))
return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),r?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),t.srcName?(h=h.toStringWithSourceMap({file:t.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new p.default(this.options.srcName),this.decorators=new p.default(this.options.srcName)},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list)
n.length>0&&(t+=", "+n.join(", "))
var r=0
for(var i in this.aliases){var o=this.aliases[i]
this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(t+=", alias"+ ++r+"="+i,o.children[0]="alias"+r)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths")
var s=this.mergeSource(t)
return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,o=void 0,a=void 0
return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,a=e):(o&&(i?o.prepend("buffer += "):r=!0,a.add(";"),o=a=void 0),i=!0,t||(n=!1))}),n?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)]
this.setupHelperArgs(e,0,n)
var r=this.popStack()
n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)]
this.setupHelperArgs("",0,t,!0),this.flushInline()
var n=this.topStack()
t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()))
else{var e=this.popStack()
this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var i=0
r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,i){var a=this
if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict&&i,this,t,e))
for(var s=t.length;n<s;n++)this.replaceStack(function(i){var o=a.nameLookup(i,t[n],e)
return r?[" && ",o]:[" != null ? ",o," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash
this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e)
this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),i=this.setupHelper(e,t),o=n?[i.name," || "]:"",a=["("].concat(o,r)
this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",i.callParams))},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t)
this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper")
var n=this.popStack()
this.emptyHash()
var r=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),o=["(","(helper = ",i," || ",n,")"]
this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],i=this.setupParams(t,1,r)
e&&(t=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,i=void 0
this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack())
var o=this.hash
n&&(o.contexts[e]=n),r&&(o.types[e]=r),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(e,t){for(var n=e.children,r=void 0,i=void 0,o=0,a=n.length;o<a;o++){r=n[o],i=new this.compiler
var s=this.matchExistingProgram(r)
if(null==s){this.context.programs.push("")
var u=this.context.programs.length
r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context,!this.precompile),this.context.decorators[u]=i.decorators,this.context.environments[u]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t]
if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams]
return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof r||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new r(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,i=void 0,o=void 0
if(!this.isInline())throw new c.default("replaceStack on non-inline")
var a=this.popStack(!0)
if(a instanceof r)n=[a.value],t=["(",n],o=!0
else{i=!0
var s=this.incrStack()
t=["((",this.push(s)," = ",a,")"],n=this.topStack()}var u=e.call(this,n)
o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack
this.inlineStack=[]
for(var t=0,n=e.length;t<n;t++){var i=e[t]
if(i instanceof r)this.compileStack.push(i)
else{var o=this.incrStack()
this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop()
if(!e&&n instanceof r)return n.value
if(!t){if(!this.stackSlot)throw new c.default("Invalid stack pop")
this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1]
return t instanceof r?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e]
return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[]
return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},i=[],o=[],a=[],s=!n,u=void 0
s&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack())
var c=this.popStack(),l=this.popStack();(l||c)&&(r.fn=l||"container.noop",r.inverse=c||"container.noop")
for(var h=t;h--;)u=this.popStack(),n[h]=u,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),i[h]=this.popStack())
return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(a)),this.stringParams&&(r.types=this.source.generateArray(o),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var i=this.setupParams(e,t,n)
return i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=i.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=i,e.exports=t.default},function(e,t,n){"use strict"
function r(e,t,n){if(o.isArray(e)){for(var r=[],i=0,a=e.length;i<a;i++)r.push(t.wrap(e[i],n))
return r}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}t.__esModule=!0
var o=n(5),a=void 0
a||(a=function(e,t,n,r){this.src="",r&&this.add(r)},a.prototype={add:function(e){o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty()
return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}}
return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1]
return e instanceof a?e:(e=r(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[]
for(var n in e)if(e.hasOwnProperty(n)){var i=r(e[n],this)
"undefined"!==i&&t.push([this.quotedString(n),":",i])}var o=this.generateList(t)
return o.prepend("{"),o.add("}"),o},generateList:function(e){for(var t=this.empty(),n=0,i=e.length;n<i;n++)n&&t.add(","),t.add(r(e[n],this))
return t},generateArray:function(e){var t=this.generateList(e)
return t.prepend("["),t.add("]"),t}},t.default=i,e.exports=t.default}])})},function(e,t,n){"use strict"
var r=n(2),i=n(4),o=n(1),a=n(5)
e.exports={themes:null,movies:null,allContainers:null,id:1,index:0,fetchMovies:function(){return a.fetch("movies")},fetchThemes:function(){return a.fetch("themes")},loadImage:function(e,t){var n=this,r=document.createElement("img")
r.src=e,r.addEventListener("load",function(){n.allContainers[t].style.backgroundImage="url("+e+")",n.allContainers[t].style.backgroundSize="cover",n.allContainers[t].classList.add("loaded")},!1)},buildMovieObject:function(e){return e.id=this.id<10?"0"+this.id:this.id,e.label=i.formatString(e.title),e.date={},e.date.theme=this.themes[this.index].theme,e.date.day=this.themes[this.index].day,e.date.happyhalloween=31===this.id&&"Happy Halloween!",e.arrows={},e.arrows.top=1!==this.id,e.arrows.bottom=31!==this.id,e},bindEvents:function(){document.querySelectorAll(".play-icon-container").forEach(function(e){e.addEventListener("click",function(){var e=this.attributes["data-movie"].value,t=this.attributes["data-trailer"].value
o.init(e,t)})})},buildTemplate:function(e){var t=document.getElementById("movie-template"),n=t.innerHTML,i=r.compile(n),o=i(e)
this.insertTemplate(o)},moveToDate:function(){var e=new Date
if(9===e.getMonth()){var t=e.getDate(),n=void 0,r=void 0
t<10&&(t="0"+t),n=document.getElementById(t),r=n.offsetTop,window.scroll(0,r-25)}},insertTemplate:function(e){document.getElementsByTagName("main")[0].innerHTML+=e},buildAllMovies:function(){var e=this,t=void 0
this.movies.map(function(n){var r=e.buildMovieObject(n)
e.buildTemplate(r),e.allContainers=document.querySelectorAll(".day-outer-container"),t=e.id-1,e.loadImage(n.images.backdrop,t),e.index++,e.index>6&&(e.index=0),e.id++}),this.moveToDate()},init:function(){var e=this
Promise.all([this.fetchMovies(),this.fetchThemes()]).then(function(t){e.movies=t[0],e.themes=t[1],document.getElementsByTagName("main")[0].innerHTML="",e.buildAllMovies(),e.bindEvents()})}}},function(e,t){"use strict"
e.exports={localStorage:{set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return void 0!==localStorage[e]&&JSON.parse(localStorage[e])},clear:function(e){localStorage.removeItem(e),console.log(e+" cleared from localStorage.")}},formatString:function(e){for(var t=e.replace(/[0-9]/g,"").replace(/ /g,"-").replace(/'/g,"").replace(/:/g,"");"-"===t.charAt(0);)t=t.substr(1)
return t}}},function(e,t,n){"use strict"
var r=n(6)
e.exports={database:null,fetch:function(e){return r.database().ref("/"+e+"/").once("value").then(function(e){return e.val()})},post:function(e,t){},init:function(){var e={apiKey:"AIzaSyDj19pdN2v4FPRgK89BRHOHUNf4T8eLwKY",authDomain:"horror-calendar-2017.firebaseapp.com",databaseURL:"https://horror-calendar-2017.firebaseio.com",projectId:"horror-calendar-2017",storageBucket:"horror-calendar-2017.appspot.com"}
r.initializeApp(e),this.database=r.database()}}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var r=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(r)
n(19),n(20),n(114),n(147),t.default=i.default,e.exports=t.default},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),n(8)
var r=n(9),i=(0,r.createFirebaseNamespace)()
t.default=i,e.exports=t.default},function(e,t){"use strict"
Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined')
var t=Object(this),n=t.length>>>0
if("function"!=typeof e)throw new TypeError("predicate must be a function")
for(var r=arguments[1],i=0;i<n;){var o=t[i]
if(e.call(r,o,i,t))return i
i++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined')
var t=Object(this),n=t.length>>>0
if("function"!=typeof e)throw new TypeError("predicate must be a function")
for(var r=arguments[1],i=0;i<n;){var o=t[i]
if(e.call(r,o,i,t))return o
i++}}})},function(e,t,n){"use strict"
function r(){function e(e){v(_[e],"delete"),delete _[e]}function t(e){return e=e||l,c(_,e)||i("no-app",{name:e}),_[e]}function n(e,t){void 0===t?t=l:"string"==typeof t&&""!==t||i("bad-app-name",{name:t+""}),c(_,t)&&i("duplicate-app",{name:t})
var n=new p(e,t,b)
return _[t]=n,v(n,"create"),n}function h(){return Object.keys(_).map(function(e){return _[e]})}function d(e,n,r,o,a){g[e]&&i("duplicate-service",{name:e}),g[e]=n,o&&(m[e]=o,h().forEach(function(e){o("create",e)}))
var s=function(n){return void 0===n&&(n=t()),"function"!=typeof n[e]&&i("invalid-app-argument",{name:e}),n[e]()}
return void 0!==r&&(0,u.deepExtend)(s,r),b[e]=s,p.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
return this._getService.bind(this,e).apply(this,a?t:[])},s}function f(e){(0,u.deepExtend)(b,e)}function v(e,t){Object.keys(g).forEach(function(n){var r=y(e,n)
null!==r&&m[r]&&m[r](t,e)})}function y(e,t){if("serverAuth"===t)return null
var n=t
e.options
return n}var _={},g={},m={},b={__esModule:!0,initializeApp:n,app:t,apps:null,Promise:s.PromiseImpl,SDK_VERSION:"4.3.0",INTERNAL:{registerService:d,createFirebaseNamespace:r,extendNamespace:f,createSubscribe:o.createSubscribe,ErrorFactory:a.ErrorFactory,removeApp:e,factories:g,useAsService:y,Promise:s.PromiseImpl,deepExtend:u.deepExtend}}
return(0,u.patchProperty)(b,"default",b),Object.defineProperty(b,"apps",{get:h}),(0,u.patchProperty)(t,"App",p),b}function i(e,t){throw f.create(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createFirebaseNamespace=r
var o=n(10),a=n(17),s=n(11),u=n(18),c=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l="[DEFAULT]",h=[],p=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t,this.options_=(0,u.deepCopy)(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return s.PromiseImpl.resolve(null)},addAuthTokenListener:function(e){h.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){h=h.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this
return new s.PromiseImpl(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_)
var t=[]
return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),s.PromiseImpl.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=l),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==l?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n)
this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;(0,u.deepExtend)(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(h.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),h=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&i("app-deleted",{name:this.name_})},e}()
p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc")
var d={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},f=new a.ErrorFactory("app","Firebase",d)},function(e,t,n){"use strict"
function r(e,t){var n=new c(e,t)
return n.subscribe.bind(n)}function i(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r]
u.PromiseImpl.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function o(e,t){if("object"!==(void 0===e?"undefined":s(e))||null===e)return!1
for(var n=0,r=t;n<r.length;n++){var i=r[n]
if(i in e&&"function"==typeof e[i])return!0}return!1}function a(){}Object.defineProperty(t,"__esModule",{value:!0})
var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.createSubscribe=r,t.async=i
var u=n(11),c=function(){function e(e,t){var n=this
this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=u.PromiseImpl.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this
if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.")
r=o(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=a),void 0===r.error&&(r.error=a),void 0===r.complete&&(r.complete=a)
var s=this.unsubscribeOne.bind(this,this.observers.length)
return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this
this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this
this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}()},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.attachDummyErrorHandler=t.Deferred=t.PromiseImpl=void 0
var r=n(12),i=t.PromiseImpl=r.globalScope.Promise||n(13),o=function(){function e(){var e=this
this.resolve=null,this.reject=null,this.promise=new i(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){function t(t,r){t?n.reject(t):n.resolve(r),"function"==typeof e&&(a(n.promise),1===e.length?e(t):e(t,r))}var n=this
return t},e}()
t.Deferred=o
var a=t.attachDummyErrorHandler=function(e){e.catch(function(){})}},function(e,t){(function(e){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n
if(void 0!==e)n=e
else if("undefined"!=typeof self)n=self
else try{n=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}t.globalScope=n}).call(t,function(){return this}())},function(e,t,n){(function(t){!function(n){function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new")
if("function"!=typeof e)throw new TypeError("not a function")
this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function a(e,t){for(;3===e._state;)e=e._value
if(0===e._state)return void e._deferreds.push(t)
e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected
if(null===n)return void(1===e._state?s:u)(t.promise,e._value)
var r
try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.")
if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then
if(t instanceof o)return e._state=3,e._value=t,void c(e)
if("function"==typeof n)return void h(i(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)})
for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t])
e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1
try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return
n=!0,u(t,e)}}var p=setTimeout
o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r)
return a(this,new l(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e)
return new o(function(e,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then
if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}t[o]=a,0==--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([])
for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){p(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(t,n(14).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply
t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId)
var t=e._idleTimeout
t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(15),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict"
function r(e){"function"!=typeof e&&(e=new Function(""+e))
for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1]
var r={callback:e,args:t}
return c[u]=r,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args
switch(r.length){case 0:t()
break
case 1:t(r[0])
break
case 2:t(r[0],r[1])
break
case 3:t(r[0],r[1],r[2])
break
default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e)
else{var t=c[e]
if(t){l=!0
try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,h=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e)
p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage
return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))}
e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel
e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement
s=function(t){var n=h.createElement("script")
n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),p.setImmediate=r,p.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,function(){return this}(),n(16))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0)
if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0)
try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e)
if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e)
try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?f=d.concat(f):y=-1,f.length&&s())}function s(){if(!v){var e=i(a)
v=!0
for(var t=f.length;t;){for(d=f,f=[];++y<t;)d&&d[y].run()
y=-1,t=f.length}d=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,h,p=e.exports={}
!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}()
var d,f=[],v=!1,y=-1
p.nextTick=function(e){var t=new Array(arguments.length-1)
if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n]
f.push(new u(e,t)),1!==f.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){"use strict"
function n(e){var t=i
return i=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.patchCapture=n
var r="FirebaseError",i=Error.captureStackTrace,o=function(){function e(e,t){this.code=e,this.message=t
if(i)i(this,a.prototype.create)
else{var n=Error.apply(this,arguments)
this.name=r,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}return e}()
t.FirebaseError=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name=r
var a=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={})
var n,r=this.errors[e],i=this.service+"/"+e
n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n]
return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+")."
var a=new o(i,n)
for(var s in t)t.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(a[s]=t[s])
return a},e}()
t.ErrorFactory=a},function(e,t){"use strict"
function n(e){return r(void 0,e)}function r(e,t){if(!(t instanceof Object))return t
switch(t.constructor){case Date:var n=t
return new Date(n.getTime())
case Object:void 0===e&&(e={})
break
case Array:e=[]
break
default:return t}for(var i in t)t.hasOwnProperty(i)&&(e[i]=r(e[i],t[i]))
return e}function i(e,t,n){e[t]=n}Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopy=n,t.deepExtend=r,t.patchProperty=i},function(e,t,n){(function(e){var t=n(7);(function(){(function(){var e,n=n||{},r=this,i=function(e){return void 0!==e},o=function(e){return"string"==typeof e},a=function(e){return"boolean"==typeof e},s=function(e){return"number"==typeof e},u=function(){},c=function(e){var t=typeof e
if("object"==t){if(!e)return"null"
if(e instanceof Array)return"array"
if(e instanceof Object)return t
var n=Object.prototype.toString.call(e)
if("[object Window]"==n)return"object"
if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array"
if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object"
return t},l=function(e){return null===e},h=function(e){return"array"==c(e)},p=function(e){var t=c(e)
return"array"==t||"object"==t&&"number"==typeof e.length},d=function(e){return"function"==c(e)},f=function(e){var t=typeof e
return"object"==t&&null!=e||"function"==t},v=function(e,t,n){return e.call.apply(e.bind,arguments)},y=function(e,t,n){if(!e)throw Error()
if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2)
return function(){var n=Array.prototype.slice.call(arguments)
return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return _=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y,_.apply(null,arguments)},g=function(e,t){var n=Array.prototype.slice.call(arguments,1)
return function(){var t=n.slice()
return t.push.apply(t,arguments),e.apply(this,t)}},m=Date.now||function(){return+new Date},b=function(e,t){function n(){}n.prototype=t.prototype,e.Uc=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kg=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o]
return t.prototype[n].apply(e,i)}},E=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,E)
else{var t=Error().stack
t&&(this.stack=t)}e&&(this.message=String(e))}
b(E,Error),E.prototype.name="CustomError"
var w=function(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift()
return r+n.join("%s")},S=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},C=function(e){return R.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(T,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(P,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(I,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(N,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(O,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(k,"&#0;")),e):e},T=/&/g,P=/</g,I=/>/g,N=/"/g,O=/'/g,k=/\x00/g,R=/[\x00&<>"']/,A=function(e,t){return-1!=e.indexOf(t)},D=function(e,t){return e<t?-1:e>t?1:0},x=function(e,t){t.unshift(e),E.call(this,w.apply(null,t)),t.shift()}
b(x,E),x.prototype.name="AssertionError"
var L=function(e,t,n,r){var i="Assertion failed"
if(n){i+=": "+n
var o=r}else e&&(i+=": "+e,o=t)
throw new x(""+i,o||[])},M=function(e,t,n){return e||L("",null,t,Array.prototype.slice.call(arguments,2)),e},F=function(e,t){throw new x("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))},U=function(e,t,n){return s(e)||L("Expected number but got %s: %s.",[c(e),e],t,Array.prototype.slice.call(arguments,2)),e},j=function(e,t,n){o(e)||L("Expected string but got %s: %s.",[c(e),e],t,Array.prototype.slice.call(arguments,2))},W=function(e,t,n){d(e)||L("Expected function but got %s: %s.",[c(e),e],t,Array.prototype.slice.call(arguments,2))},B=function(){this.Tc="",this.df=q}
B.prototype.ob=!0,B.prototype.mb=function(){return this.Tc},B.prototype.toString=function(){return"Const{"+this.Tc+"}"}
var V=function(e){return e instanceof B&&e.constructor===B&&e.df===q?e.Tc:(F("expected object of type Const, got '"+e+"'"),"type_error:Const")},q={},H=function(e){var t=new B
return t.Tc=e,t}
H("")
var K=function(){this.Mc="",this.ef=J}
K.prototype.ob=!0,K.prototype.mb=function(){return this.Mc},K.prototype.toString=function(){return"TrustedResourceUrl{"+this.Mc+"}"}
var G,Q=function(e){return e instanceof K&&e.constructor===K&&e.ef===J?e.Mc:(F("expected object of type TrustedResourceUrl, got '"+e+"' of type "+c(e)),"type_error:TrustedResourceUrl")},X=function(e,t){return e=Y(e,t),t=new K,t.Mc=e,t},Y=function(e,t){var n=V(e)
if(!$.test(n))throw Error("Invalid TrustedResourceUrl format: "+n)
return n.replace(z,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t))
return e=t[r],e instanceof B?V(e):encodeURIComponent(String(e))})},z=/%{(\w+)}/g,$=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,J={},Z=Array.prototype.indexOf?function(e,t,n){return M(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,o(e))return o(t)&&1==t.length?e.indexOf(t,n):-1
for(;n<e.length;n++)if(n in e&&e[n]===t)return n
return-1},ee=Array.prototype.forEach?function(e,t,n){M(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=o(e)?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)},te=function(e,t){for(var n=o(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)},ne=Array.prototype.map?function(e,t,n){return M(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Array(r),a=o(e)?e.split(""):e,s=0;s<r;s++)s in a&&(i[s]=t.call(n,a[s],s,e))
return i},re=Array.prototype.some?function(e,t,n){return M(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=o(e)?e.split(""):e,a=0;a<r;a++)if(a in i&&t.call(n,i[a],a,e))return!0
return!1},ie=function(e){e:{for(var t=zr,n=e.length,r=o(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i
break e}t=-1}return 0>t?null:o(e)?e.charAt(t):e[t]},oe=function(e,t){return 0<=Z(e,t)},ae=function(e,t){t=Z(e,t)
var n
return(n=0<=t)&&se(e,t),n},se=function(e,t){return M(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},ue=function(e,t){var n=0
te(e,function(r,i){t.call(void 0,r,i,e)&&se(e,i)&&n++})},ce=function(e){return Array.prototype.concat.apply([],arguments)},le=function(e){var t=e.length
if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r]
return n}return[]},he=function(e){return ne(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}
e:{var pe=r.navigator
if(pe){var de=pe.userAgent
if(de){G=de
break e}}G=""}var fe=function(e){return A(G,e)},ve=function(e,t){for(var n in e)t.call(void 0,e[n],n,e)},ye=function(e,t){for(var n in e)if(t.call(void 0,e[n],n,e))return!0
return!1},_e=function(e){var t,n=[],r=0
for(t in e)n[r++]=e[t]
return n},ge=function(e){var t,n=[],r=0
for(t in e)n[r++]=t
return n},me=function(e){for(var t in e)return!1
return!0},be=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1
for(n in t)if(!(n in e))return!1
return!0},Ee=function(e){var t,n={}
for(t in e)n[t]=e[t]
return n},we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Se=function(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i]
for(n in r)e[n]=r[n]
for(var o=0;o<we.length;o++)n=we[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}},Ce=function(e){return Ce[" "](e),e}
Ce[" "]=u
var Te,Pe=function(e,t){var n=je
return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)},Ie=fe("Opera"),Ne=fe("Trident")||fe("MSIE"),Oe=fe("Edge"),ke=Oe||Ne,Re=fe("Gecko")&&!(A(G.toLowerCase(),"webkit")&&!fe("Edge"))&&!(fe("Trident")||fe("MSIE"))&&!fe("Edge"),Ae=A(G.toLowerCase(),"webkit")&&!fe("Edge"),De=function(){var e=r.document
return e?e.documentMode:void 0}
e:{var xe="",Le=function(){var e=G
return Re?/rv\:([^\);]+)(\)|;)/.exec(e):Oe?/Edge\/([\d\.]+)/.exec(e):Ne?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ae?/WebKit\/(\S+)/.exec(e):Ie?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}()
if(Le&&(xe=Le?Le[1]:""),Ne){var Me=De()
if(null!=Me&&Me>parseFloat(xe)){Te=String(Me)
break e}}Te=xe}var Fe,Ue=Te,je={},We=function(e){return Pe(e,function(){for(var t=0,n=S(String(Ue)).split("."),r=S(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||""
do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break
t=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})},Be=r.document
Fe=Be&&Ne?De()||("CSS1Compat"==Be.compatMode?parseInt(Ue,10):5):void 0
var Ve,qe=null,He=null,Ke=function(e){var t=""
return Ge(e,function(e){t+=String.fromCharCode(e)}),t},Ge=function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=He[n]
if(null!=i)return i
if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Qe()
for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64)
if(64===s&&-1===i)break
t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}},Qe=function(){if(!qe){qe={},He={}
for(var e=0;65>e;e++)qe[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),He[qe[e]]=e,62<=e&&(He["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}},Xe=function(){this.Ca=-1},Ye=function(e,t){this.Ca=-1,this.Ca=64,this.qc=r.Uint8Array?new Uint8Array(this.Ca):Array(this.Ca),this.Xc=this.pb=0,this.l=[],this.Yf=e,this.Ae=t,this.Ag=r.Int32Array?new Int32Array(64):Array(64),i(Ve)||(Ve=r.Int32Array?new Int32Array(et):et),this.reset()}
b(Ye,Xe)
for(var ze=[],$e=0;63>$e;$e++)ze[$e]=0
var Je=ce(128,ze)
Ye.prototype.reset=function(){this.Xc=this.pb=0,this.l=r.Int32Array?new Int32Array(this.Ae):le(this.Ae)}
var Ze=function(e){var t=e.qc
M(t.length==e.Ca)
for(var n=e.Ag,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r
for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2]
var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0
n[t]=o+a|0}r=0|e.l[0],i=0|e.l[1]
var s=0|e.l[2],u=0|e.l[3],c=0|e.l[4],l=0|e.l[5],h=0|e.l[6]
for(o=0|e.l[7],t=0;64>t;t++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0
a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|Ve[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+p|0}e.l[0]=e.l[0]+r|0,e.l[1]=e.l[1]+i|0,e.l[2]=e.l[2]+s|0,e.l[3]=e.l[3]+u|0,e.l[4]=e.l[4]+c|0,e.l[5]=e.l[5]+l|0,e.l[6]=e.l[6]+h|0,e.l[7]=e.l[7]+o|0}
Ye.prototype.update=function(e,t){i(t)||(t=e.length)
var n=0,r=this.pb
if(o(e))for(;n<t;)this.qc[r++]=e.charCodeAt(n++),r==this.Ca&&(Ze(this),r=0)
else{if(!p(e))throw Error("message must be string or array")
for(;n<t;){var a=e[n++]
if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array")
this.qc[r++]=a,r==this.Ca&&(Ze(this),r=0)}}this.pb=r,this.Xc+=t},Ye.prototype.digest=function(){var e=[],t=8*this.Xc
56>this.pb?this.update(Je,56-this.pb):this.update(Je,this.Ca-(this.pb-56))
for(var n=63;56<=n;n--)this.qc[n]=255&t,t/=256
for(Ze(this),n=t=0;n<this.Yf;n++)for(var r=24;0<=r;r-=8)e[t++]=this.l[n]>>r&255
return e}
var et=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],tt=function(){Ye.call(this,8,nt)}
b(tt,Ye)
var nt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],rt=function(){this.La=this.La,this.Jc=this.Jc}
rt.prototype.La=!1,rt.prototype.isDisposed=function(){return this.La},rt.prototype.kb=function(){if(this.Jc)for(;this.Jc.length;)this.Jc.shift()()}
var it=!Ne||9<=Number(Fe),ot=Ne&&!We("9")
!Ae||We("528"),Re&&We("1.9b")||Ne&&We("8")||Ie&&We("9.5")||Ae&&We("528"),Re&&!We("8")||Ne&&We("9")
var at=function(){if(!r.addEventListener||!Object.defineProperty)return!1
var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}})
return r.addEventListener("test",u,t),r.removeEventListener("test",u,t),e}(),st=function(e,t){this.type=e,this.currentTarget=this.target=t,this.defaultPrevented=this.Va=!1,this.Ne=!0}
st.prototype.stopPropagation=function(){this.Va=!0},st.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Ne=!1}
var ut=function(e,t){st.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.O=this.state=null,e&&this.init(e,t)}
b(ut,st),ut.prototype.init=function(e,t){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null
if(this.target=e.target||e.srcElement,this.currentTarget=t,t=e.relatedTarget){if(Re){e:{try{Ce(t.nodeName)
var i=!0
break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)
this.relatedTarget=t,null===r?(this.offsetX=Ae||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=Ae||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.state=e.state,this.O=e,e.defaultPrevented&&this.preventDefault()},ut.prototype.stopPropagation=function(){ut.Uc.stopPropagation.call(this),this.O.stopPropagation?this.O.stopPropagation():this.O.cancelBubble=!0},ut.prototype.preventDefault=function(){ut.Uc.preventDefault.call(this)
var e=this.O
if(e.preventDefault)e.preventDefault()
else if(e.returnValue=!1,ot)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},ut.prototype.Bf=function(){return this.O}
var ct="closure_listenable_"+(1e6*Math.random()|0),lt=0,ht=function(e,t,n,r,i){this.listener=e,this.Nc=null,this.src=t,this.type=n,this.capture=!!r,this.wc=i,this.key=++lt,this.Ab=this.pc=!1},pt=function(e){e.Ab=!0,e.listener=null,e.Nc=null,e.src=null,e.wc=null},dt=function(e){this.src=e,this.J={},this.jc=0}
dt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.J[o])||(e=this.J[o]=[],this.jc++)
var a=vt(e,t,r,i)
return-1<a?(t=e[a],n||(t.pc=!1)):(t=new ht(t,this.src,o,!!r,i),t.pc=n,e.push(t)),t},dt.prototype.remove=function(e,t,n,r){if(!((e=e.toString())in this.J))return!1
var i=this.J[e]
return-1<(t=vt(i,t,n,r))&&(pt(i[t]),se(i,t),0==i.length&&(delete this.J[e],this.jc--),!0)}
var ft=function(e,t){var n=t.type
n in e.J&&ae(e.J[n],t)&&(pt(t),0==e.J[n].length&&(delete e.J[n],e.jc--))}
dt.prototype.rd=function(e,t,n,r){e=this.J[e.toString()]
var i=-1
return e&&(i=vt(e,t,n,r)),-1<i?e[i]:null},dt.prototype.hasListener=function(e,t){var n=i(e),r=n?e.toString():"",o=i(t)
return ye(this.J,function(e){for(var i=0;i<e.length;++i)if(!(n&&e[i].type!=r||o&&e[i].capture!=t))return!0
return!1})}
var vt=function(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i]
if(!o.Ab&&o.listener==t&&o.capture==!!n&&o.wc==r)return i}return-1},yt="closure_lm_"+(1e6*Math.random()|0),_t={},gt=0,mt=function(e,t,n,r,i){if(r&&r.once)wt(e,t,n,r,i)
else if(h(t))for(var o=0;o<t.length;o++)mt(e,t[o],n,r,i)
else n=Rt(n),e&&e[ct]?e.listen(t,n,f(r)?!!r.capture:!!r,i):bt(e,t,n,!1,r,i)},bt=function(e,t,n,r,i,o){if(!t)throw Error("Invalid event type")
var a=f(i)?!!i.capture:!!i,s=Ot(e)
if(s||(e[yt]=s=new dt(e)),n=s.add(t,n,r,a,o),!n.Nc){if(r=Et(),n.Nc=r,r.src=e,r.listener=n,e.addEventListener)at||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i)
else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.")
e.attachEvent(Tt(t.toString()),r)}gt++}},Et=function(){var e=Nt,t=it?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n}
return t},wt=function(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)wt(e,t[o],n,r,i)
else n=Rt(n),e&&e[ct]?Nr(e,t,n,f(r)?!!r.capture:!!r,i):bt(e,t,n,!0,r,i)},St=function(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)St(e,t[o],n,r,i)
else r=f(r)?!!r.capture:!!r,n=Rt(n),e&&e[ct]?e.ga.remove(String(t),n,r,i):e&&(e=Ot(e))&&(t=e.rd(t,n,r,i))&&Ct(t)},Ct=function(e){if(!s(e)&&e&&!e.Ab){var t=e.src
if(t&&t[ct])ft(t.ga,e)
else{var n=e.type,r=e.Nc
t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent&&t.detachEvent(Tt(n),r),gt--,(n=Ot(t))?(ft(n,e),0==n.jc&&(n.src=null,t[yt]=null)):pt(e)}}},Tt=function(e){return e in _t?_t[e]:_t[e]="on"+e},Pt=function(e,t,n,r){var i=!0
if((e=Ot(e))&&(t=e.J[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e]
o&&o.capture==n&&!o.Ab&&(o=It(o,r),i=i&&!1!==o)}return i},It=function(e,t){var n=e.listener,r=e.wc||e.src
return e.pc&&Ct(e),n.call(r,t)},Nt=function(e,t){if(e.Ab)return!0
if(!it){if(!t)e:{t=["window","event"]
for(var n=r,i=0;i<t.length;i++)if(null==(n=n[t[i]])){t=null
break e}t=n}if(i=t,t=new ut(i,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){e:{var o=!1
if(0==i.keyCode)try{i.keyCode=-1
break e}catch(e){o=!0}(o||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=t.currentTarget;o;o=o.parentNode)i.push(o)
for(e=e.type,o=i.length-1;!t.Va&&0<=o;o--){t.currentTarget=i[o]
var a=Pt(i[o],e,!0,t)
n=n&&a}for(o=0;!t.Va&&o<i.length;o++)t.currentTarget=i[o],a=Pt(i[o],e,!1,t),n=n&&a}return n}return It(e,new ut(t,this))},Ot=function(e){return e=e[yt],e instanceof dt?e:null},kt="__closure_events_fn_"+(1e9*Math.random()>>>0),Rt=function(e){return M(e,"Listener can not be null."),d(e)?e:(M(e.handleEvent,"An object listener must have handleEvent method."),e[kt]||(e[kt]=function(t){return e.handleEvent(t)}),e[kt])},At=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,Dt=function(){this.xa="",this.cf=Ft}
Dt.prototype.ob=!0,Dt.prototype.mb=function(){return this.xa},Dt.prototype.toString=function(){return"SafeUrl{"+this.xa+"}"}
var xt=function(e){return e instanceof Dt&&e.constructor===Dt&&e.cf===Ft?e.xa:(F("expected object of type SafeUrl, got '"+e+"' of type "+c(e)),"type_error:SafeUrl")},Lt=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Mt=function(e){return e instanceof Dt?e:(e=e.ob?e.mb():String(e),Lt.test(e)||(e="about:invalid#zClosurez"),Ut(e))},Ft={},Ut=function(e){var t=new Dt
return t.xa=e,t}
Ut("about:blank")
var jt=function(e){var t=[]
return Bt(new Wt,e,t),t.join("")},Wt=function(){this.Oc=void 0},Bt=function(e,t,n){if(null==t)n.push("null")
else{if("object"==typeof t){if(h(t)){var r=t
t=r.length,n.push("[")
for(var i="",o=0;o<t;o++)n.push(i),i=r[o],Bt(e,e.Oc?e.Oc.call(r,String(o),i):i,n),i=","
return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),o=""
for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(i=t[r])&&(n.push(o),Ht(r,n),n.push(":"),Bt(e,e.Oc?e.Oc.call(t,r,i):i,n),o=",")
return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Ht(t,n)
break
case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null")
break
case"boolean":n.push(String(t))
break
case"function":n.push("null")
break
default:throw Error("Unknown type: "+typeof t)}}},Vt={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},qt=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ht=function(e,t){t.push('"',e.replace(qt,function(e){var t=Vt[e]
return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Vt[e]=t),t}),'"')},Kt=function(){}
Kt.prototype.fe=null
var Gt,Qt=function(e){return e.fe||(e.fe=e.zd())},Xt=function(){}
b(Xt,Kt),Xt.prototype.rc=function(){var e=Yt(this)
return e?new ActiveXObject(e):new XMLHttpRequest},Xt.prototype.zd=function(){var e={}
return Yt(this)&&(e[0]=!0,e[1]=!0),e}
var Yt=function(e){if(!e.ze&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n]
try{return new ActiveXObject(r),e.ze=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.ze}
Gt=new Xt
var zt=function(){}
b(zt,Kt),zt.prototype.rc=function(){var e=new XMLHttpRequest
if("withCredentials"in e)return e
if("undefined"!=typeof XDomainRequest)return new $t
throw Error("Unsupported browser")},zt.prototype.zd=function(){return{}}
var $t=function(){this.oa=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.oa.onload=_(this.Ff,this),this.oa.onerror=_(this.ue,this),this.oa.onprogress=_(this.Gf,this),this.oa.ontimeout=_(this.Hf,this)}
e=$t.prototype,e.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.")
this.oa.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported")
this.oa.send(e)}else this.oa.send()},e.abort=function(){this.oa.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.oa.contentType:""},e.Ff=function(){this.status=200,this.responseText=this.oa.responseText,Jt(this,4)},e.ue=function(){this.status=500,this.responseText="",Jt(this,4)},e.Hf=function(){this.ue()},e.Gf=function(){this.status=200,Jt(this,1)}
var Jt=function(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}
$t.prototype.getAllResponseHeaders=function(){return"content-type: "+this.oa.contentType}
var Zt=function(e,t,n){this.Uf=n,this.qf=e,this.ig=t,this.Ic=0,this.xc=null}
Zt.prototype.get=function(){if(0<this.Ic){this.Ic--
var e=this.xc
this.xc=e.next,e.next=null}else e=this.qf()
return e},Zt.prototype.put=function(e){this.ig(e),this.Ic<this.Uf&&(this.Ic++,e.next=this.xc,this.xc=e)}
var en,tn=function(e){r.setTimeout(function(){throw e},0)},nn=function(){var e=r.MessageChannel
if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!fe("Presto")&&(e=function(){var e=document.createElement("IFRAME")
e.style.display="none",e.src="",document.documentElement.appendChild(e)
var t=e.contentWindow
e=t.document,e.open(),e.write(""),e.close()
var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host
e=_(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!fe("Trident")&&!fe("MSIE")){var t=new e,n={},o=n
return t.port1.onmessage=function(){if(i(n.next)){n=n.next
var e=n.je
n.je=null,e()}},function(e){o.next={je:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT")
t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){r.setTimeout(e,0)}},rn=function(){this.bd=this.gb=null},on=new Zt(function(){return new an},function(e){e.reset()},100)
rn.prototype.add=function(e,t){var n=on.get()
n.set(e,t),this.bd?this.bd.next=n:(M(!this.gb),this.gb=n),this.bd=n},rn.prototype.remove=function(){var e=null
return this.gb&&(e=this.gb,this.gb=this.gb.next,this.gb||(this.bd=null),e.next=null),e}
var an=function(){this.next=this.scope=this.qd=null}
an.prototype.set=function(e,t){this.qd=e,this.scope=t,this.next=null},an.prototype.reset=function(){this.next=this.scope=this.qd=null}
var sn,un=function(e,t){sn||cn(),ln||(sn(),ln=!0),hn.add(e,t)},cn=function(){if(-1!=String(r.Promise).indexOf("[native code]")){var e=r.Promise.resolve(void 0)
sn=function(){e.then(pn)}}else sn=function(){var e=pn
!d(r.setImmediate)||r.Window&&r.Window.prototype&&!fe("Edge")&&r.Window.prototype.setImmediate==r.setImmediate?(en||(en=nn()),en(e)):r.setImmediate(e)}},ln=!1,hn=new rn,pn=function(){for(var e;e=hn.remove();){try{e.qd.call(e.scope)}catch(e){tn(e)}on.put(e)}ln=!1},dn=function(e){return f(e)?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):void 0===e?"undefined":null===e?"null":typeof e},fn=function(e){return(e=e&&e.ownerDocument)&&(e.defaultView||e.parentWindow)||r},vn=!Ne||9<=Number(Fe)
!Re&&!Ne||Ne&&9<=Number(Fe)||Re&&We("1.9.1"),Ne&&We("9")
var yn=function(){this.xa="",this.bf=gn}
yn.prototype.ob=!0,yn.prototype.mb=function(){return this.xa},yn.prototype.toString=function(){return"SafeHtml{"+this.xa+"}"}
var _n=function(e){return e instanceof yn&&e.constructor===yn&&e.bf===gn?e.xa:(F("expected object of type SafeHtml, got '"+e+"' of type "+c(e)),"type_error:SafeHtml")},gn={}
yn.prototype.Of=function(e){return this.xa=e,this}
var mn=function(e,t){var n=fn(e)
void 0!==n.HTMLScriptElement&&void 0!==n.Element&&M(e&&(e instanceof n.HTMLScriptElement||!(e instanceof n.Element)),"Argument is not a HTMLScriptElement (or a non-Element mock); got: %s",dn(e)),e.src=Q(t)},bn=function(e){var t=document
return o(e)?t.getElementById(e):e},En=function(e,t){ve(t,function(t,n){t&&t.ob&&(t=t.mb()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:wn.hasOwnProperty(n)?e.setAttribute(wn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})},wn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Sn=function(e,t,n){var r=arguments,i=document,a=String(r[0]),s=r[1]
if(!vn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',C(s.name),'"'),s.type){a.push(' type="',C(s.type),'"')
var u={}
Se(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:h(s)?a.className=s.join(" "):En(a,s)),2<r.length&&Cn(i,a,r),a},Cn=function(e,t,n){function r(n){n&&t.appendChild(o(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i]
!p(a)||f(a)&&0<a.nodeType?r(a):ee(Tn(a)?le(a):a,r)}},Tn=function(e){if(e&&"number"==typeof e.length){if(f(e))return"function"==typeof e.item||"string"==typeof e.item
if(d(e))return"function"==typeof e.item}return!1},Pn=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},In=function(e){if(!e)return!1
try{return!!e.$goog_Thenable}catch(e){return!1}},Nn=function(e,t){if(this.aa=0,this.za=void 0,this.jb=this.ua=this.w=null,this.vc=this.od=!1,e!=u)try{var n=this
e.call(t,function(e){Bn(n,2,e)},function(e){if(!(e instanceof zn))try{if(e instanceof Error)throw e
throw Error("Promise rejected.")}catch(e){}Bn(n,3,e)})}catch(e){Bn(this,3,e)}},On=function(){this.next=this.context=this.rb=this.Ta=this.child=null,this.Gb=!1}
On.prototype.reset=function(){this.context=this.rb=this.Ta=this.child=null,this.Gb=!1}
var kn=new Zt(function(){return new On},function(e){e.reset()},100),Rn=function(e,t,n){var r=kn.get()
return r.Ta=e,r.rb=t,r.context=n,r},An=function(e){if(e instanceof Nn)return e
var t=new Nn(u)
return Bn(t,2,e),t},Dn=function(e){return new Nn(function(t,n){n(e)})},xn=function(e,t,n){Vn(e,t,n,null)||un(g(t,e))},Ln=function(e){return new Nn(function(t,n){var r=e.length,i=[]
if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],xn(o,g(a,u),s)
else t(i)})},Mn=function(e){return new Nn(function(t){var n=e.length,r=[]
if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{zf:!0,value:o}:{zf:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],xn(i,g(o,a,!0),g(o,a,!1))
else t(r)})}
Nn.prototype.then=function(e,t,n){return null!=e&&W(e,"opt_onFulfilled should be a function."),null!=t&&W(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),Wn(this,d(e)?e:null,d(t)?t:null,n)},Pn(Nn)
var Fn=function(e,t){return t=Rn(t,t,void 0),t.Gb=!0,jn(e,t),e}
Nn.prototype.f=function(e,t){return Wn(this,null,e,t)},Nn.prototype.cancel=function(e){0==this.aa&&un(function(){var t=new zn(e)
Un(this,t)},this)}
var Un=function(e,t){if(0==e.aa)if(e.w){var n=e.w
if(n.ua){for(var r=0,i=null,o=null,a=n.ua;a&&(a.Gb||(r++,a.child==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a)
i&&(0==n.aa&&1==r?Un(n,t):(o?(r=o,M(n.ua),M(null!=r),r.next==n.jb&&(n.jb=r),r.next=r.next.next):Kn(n),Gn(n,i,3,t)))}e.w=null}else Bn(e,3,t)},jn=function(e,t){e.ua||2!=e.aa&&3!=e.aa||Hn(e),M(null!=t.Ta),e.jb?e.jb.next=t:e.ua=t,e.jb=t},Wn=function(e,t,n,r){var o=Rn(null,null,null)
return o.child=new Nn(function(e,a){o.Ta=t?function(n){try{var i=t.call(r,n)
e(i)}catch(e){a(e)}}:e,o.rb=n?function(t){try{var o=n.call(r,t)
!i(o)&&t instanceof zn?a(t):e(o)}catch(e){a(e)}}:a}),o.child.w=e,jn(e,o),o.child}
Nn.prototype.wg=function(e){M(1==this.aa),this.aa=0,Bn(this,2,e)},Nn.prototype.xg=function(e){M(1==this.aa),this.aa=0,Bn(this,3,e)}
var Bn=function(e,t,n){0==e.aa&&(e===n&&(t=3,n=new TypeError("Promise cannot resolve to itself")),e.aa=1,Vn(n,e.wg,e.xg,e)||(e.za=n,e.aa=t,e.w=null,Hn(e),3!=t||n instanceof zn||Xn(e,n)))},Vn=function(e,t,n,r){if(e instanceof Nn)return null!=t&&W(t,"opt_onFulfilled should be a function."),null!=n&&W(n,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),jn(e,Rn(t||u,n||null,r)),!0
if(In(e))return e.then(t,n,r),!0
if(f(e))try{var i=e.then
if(d(i))return qn(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1},qn=function(e,t,n,r,i){var o=!1,a=function(e){o||(o=!0,n.call(i,e))},s=function(e){o||(o=!0,r.call(i,e))}
try{t.call(e,a,s)}catch(e){s(e)}},Hn=function(e){e.od||(e.od=!0,un(e.vf,e))},Kn=function(e){var t=null
return e.ua&&(t=e.ua,e.ua=t.next,t.next=null),e.ua||(e.jb=null),null!=t&&M(null!=t.Ta),t}
Nn.prototype.vf=function(){for(var e;e=Kn(this);)Gn(this,e,this.aa,this.za)
this.od=!1}
var Gn=function(e,t,n,r){if(3==n&&t.rb&&!t.Gb)for(;e&&e.vc;e=e.w)e.vc=!1
if(t.child)t.child.w=null,Qn(t,n,r)
else try{t.Gb?t.Ta.call(t.context):Qn(t,n,r)}catch(e){Yn.call(null,e)}kn.put(t)},Qn=function(e,t,n){2==t?e.Ta.call(e.context,n):e.rb&&e.rb.call(e.context,n)},Xn=function(e,t){e.vc=!0,un(function(){e.vc&&Yn.call(null,t)})},Yn=tn,zn=function(e){E.call(this,e)}
b(zn,E),zn.prototype.name="cancel"
var $n=function(e,t){this.Qc=[],this.He=e,this.ne=t||null,this.Ob=this.lb=!1,this.za=void 0,this.Yd=this.de=this.fd=!1,this.Yc=0,this.w=null,this.gd=0}
$n.prototype.cancel=function(e){if(this.lb)this.za instanceof $n&&this.za.cancel()
else{if(this.w){var t=this.w
delete this.w,e?t.cancel(e):0>=--t.gd&&t.cancel()}this.He?this.He.call(this.ne,this):this.Yd=!0,this.lb||er(this,new sr)}},$n.prototype.le=function(e,t){this.fd=!1,Jn(this,e,t)}
var Jn=function(e,t,n){e.lb=!0,e.za=n,e.Ob=!t,or(e)},Zn=function(e){if(e.lb){if(!e.Yd)throw new ar
e.Yd=!1}}
$n.prototype.callback=function(e){Zn(this),tr(e),Jn(this,!0,e)}
var er=function(e,t){Zn(e),tr(t),Jn(e,!1,t)},tr=function(e){M(!(e instanceof $n),"An execution sequence may not be initiated with a blocking Deferred.")},nr=function(e,t){rr(e,null,t,void 0)},rr=function(e,t,n,r){M(!e.de,"Blocking Deferreds can not be re-used"),e.Qc.push([t,n,r]),e.lb&&or(e)}
$n.prototype.then=function(e,t,n){var r,i,o=new Nn(function(e,t){r=e,i=t})
return rr(this,r,function(e){e instanceof sr?o.cancel():i(e)}),o.then(e,t,n)},Pn($n)
var ir=function(e){return re(e.Qc,function(e){return d(e[1])})},or=function(e){if(e.Yc&&e.lb&&ir(e)){var t=e.Yc,n=cr[t]
n&&(r.clearTimeout(n.Pb),delete cr[t]),e.Yc=0}e.w&&(e.w.gd--,delete e.w),t=e.za
for(var o=n=!1;e.Qc.length&&!e.fd;){var a=e.Qc.shift(),s=a[0],u=a[1]
if(a=a[2],s=e.Ob?u:s)try{var c=s.call(a||e.ne,t)
i(c)&&(e.Ob=e.Ob&&(c==t||c instanceof Error),e.za=t=c),(In(t)||"function"==typeof r.Promise&&t instanceof r.Promise)&&(o=!0,e.fd=!0)}catch(r){t=r,e.Ob=!0,ir(e)||(n=!0)}}e.za=t,o&&(c=_(e.le,e,!0),o=_(e.le,e,!1),t instanceof $n?(rr(t,c,o),t.de=!0):t.then(c,o)),n&&(t=new ur(t),cr[t.Pb]=t,e.Yc=t.Pb)},ar=function(){E.call(this)}
b(ar,E),ar.prototype.message="Deferred has already fired",ar.prototype.name="AlreadyCalledError"
var sr=function(){E.call(this)}
b(sr,E),sr.prototype.message="Deferred was canceled",sr.prototype.name="CanceledError"
var ur=function(e){this.Pb=r.setTimeout(_(this.vg,this),0),this.ba=e}
ur.prototype.vg=function(){throw M(cr[this.Pb],"Cannot throw an error that is not scheduled."),delete cr[this.Pb],this.ba}
var cr={},lr=function(e){var t={},n=t.document||document,r=Q(e),i=document.createElement("SCRIPT"),o={Oe:i,ic:void 0},a=new $n(pr,o),s=null,u=null!=t.timeout?t.timeout:5e3
return 0<u&&(s=window.setTimeout(function(){dr(i,!0),er(a,new fr(1,"Timeout reached for loading script "+r))},u),o.ic=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(dr(i,t.Lg||!1,s),a.callback(null))},i.onerror=function(){dr(i,!0,s),er(a,new fr(0,"Error while loading script "+r))},o=t.attributes||{},Se(o,{type:"text/javascript",charset:"UTF-8"}),En(i,o),mn(i,e),hr(n).appendChild(i),a},hr=function(e){var t
return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement},pr=function(){if(this&&this.Oe){var e=this.Oe
e&&"SCRIPT"==e.tagName&&dr(e,!0,this.ic)}},dr=function(e,t,n){null!=n&&r.clearTimeout(n),e.onload=u,e.onerror=u,e.onreadystatechange=u,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)},fr=function(e,t){var n="Jsloader error (code #"+e+")"
t&&(n+=": "+t),E.call(this,n),this.code=e}
b(fr,E)
var vr=function(e,t,n,r,i){this.reset(e,t,n,r,i)}
vr.prototype.pe=null
var yr=0
vr.prototype.reset=function(e,t,n,r,i){"number"==typeof i||yr++,r||m(),this.Ub=e,this.Xf=t,delete this.pe},vr.prototype.Qe=function(e){this.Ub=e}
var _r=function(e){this.Fe=e,this.ve=this.jd=this.Ub=this.w=null},gr=function(e,t){this.name=e,this.value=t}
gr.prototype.toString=function(){return this.name}
var mr=new gr("SEVERE",1e3),br=new gr("INFO",800),Er=new gr("CONFIG",700),wr=new gr("FINE",500)
_r.prototype.getName=function(){return this.Fe},_r.prototype.getParent=function(){return this.w},_r.prototype.Qe=function(e){this.Ub=e}
var Sr=function(e){return e.Ub?e.Ub:e.w?Sr(e.w):(F("Root logger has no level set."),null)}
_r.prototype.log=function(e,t,n){if(e.value>=Sr(this).value)for(d(t)&&(t=t()),e=new vr(e,String(t),this.Fe),n&&(e.pe=n),n="log:"+e.Xf,(t=r.console)&&t.timeStamp&&t.timeStamp(n),(t=r.msWriteProfilerMark)&&t(n),n=this;n;){var i=n,o=e
if(i.ve)for(var a=0;t=i.ve[a];a++)t(o)
n=n.getParent()}},_r.prototype.info=function(e,t){this.log(br,e,t)},_r.prototype.config=function(e,t){this.log(Er,e,t)}
var Cr={},Tr=null,Pr=function(e){Tr||(Tr=new _r(""),Cr[""]=Tr,Tr.Qe(Er))
var t
if(!(t=Cr[e])){t=new _r(e)
var n=e.lastIndexOf("."),r=e.substr(n+1)
n=Pr(e.substr(0,n)),n.jd||(n.jd={}),n.jd[r]=t,t.w=n,Cr[e]=t}return t},Ir=function(){rt.call(this),this.ga=new dt(this),this.gf=this,this.Hd=null}
b(Ir,rt),Ir.prototype[ct]=!0,e=Ir.prototype,e.addEventListener=function(e,t,n,r){mt(this,e,t,n,r)},e.removeEventListener=function(e,t,n,r){St(this,e,t,n,r)},e.dispatchEvent=function(e){kr(this)
var t=this.Hd
if(t)for(var n=[],r=1;t;t=t.Hd)n.push(t),M(1e3>++r,"infinite loop")
if(t=this.gf,r=e.type||e,o(e))e=new st(e,t)
else if(e instanceof st)e.target=e.target||t
else{var i=e
e=new st(r,t),Se(e,i)}if(i=!0,n)for(var a=n.length-1;!e.Va&&0<=a;a--){var s=e.currentTarget=n[a]
i=Or(s,r,!0,e)&&i}if(e.Va||(s=e.currentTarget=t,i=Or(s,r,!0,e)&&i,e.Va||(i=Or(s,r,!1,e)&&i)),n)for(a=0;!e.Va&&a<n.length;a++)s=e.currentTarget=n[a],i=Or(s,r,!1,e)&&i
return i},e.kb=function(){if(Ir.Uc.kb.call(this),this.ga){var e,t=this.ga,n=0
for(e in t.J){for(var r=t.J[e],i=0;i<r.length;i++)++n,pt(r[i])
delete t.J[e],t.jc--}}this.Hd=null},e.listen=function(e,t,n,r){return kr(this),this.ga.add(String(e),t,!1,n,r)}
var Nr=function(e,t,n,r,i){e.ga.add(String(t),n,!0,r,i)},Or=function(e,t,n,r){if(!(t=e.ga.J[String(t)]))return!0
t=t.concat()
for(var i=!0,o=0;o<t.length;++o){var a=t[o]
if(a&&!a.Ab&&a.capture==n){var s=a.listener,u=a.wc||a.src
a.pc&&ft(e.ga,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ne}
Ir.prototype.rd=function(e,t,n,r){return this.ga.rd(String(e),t,n,r)},Ir.prototype.hasListener=function(e,t){return this.ga.hasListener(i(e)?String(e):void 0,t)}
var kr=function(e){M(e.ga,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},Rr="StopIteration"in r?r.StopIteration:{message:"StopIteration",stack:""},Ar=function(){}
Ar.prototype.next=function(){throw Rr},Ar.prototype.ff=function(){return this}
var Dr=function(e,t){e&&e.log(wr,t,void 0)},xr=function(e,t){this.ja={},this.A=[],this.fb=this.s=0
var n=arguments.length
if(1<n){if(n%2)throw Error("Uneven number of arguments")
for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else e&&this.addAll(e)}
e=xr.prototype,e.ha=function(){Lr(this)
for(var e=[],t=0;t<this.A.length;t++)e.push(this.ja[this.A[t]])
return e},e.va=function(){return Lr(this),this.A.concat()},e.Ib=function(e){return Mr(this.ja,e)},e.clear=function(){this.ja={},this.fb=this.s=this.A.length=0},e.remove=function(e){return!!Mr(this.ja,e)&&(delete this.ja[e],this.s--,this.fb++,this.A.length>2*this.s&&Lr(this),!0)}
var Lr=function(e){if(e.s!=e.A.length){for(var t=0,n=0;t<e.A.length;){var r=e.A[t]
Mr(e.ja,r)&&(e.A[n++]=r),t++}e.A.length=n}if(e.s!=e.A.length){var i={}
for(n=t=0;t<e.A.length;)r=e.A[t],Mr(i,r)||(e.A[n++]=r,i[r]=1),t++
e.A.length=n}}
e=xr.prototype,e.get=function(e,t){return Mr(this.ja,e)?this.ja[e]:t},e.set=function(e,t){Mr(this.ja,e)||(this.s++,this.A.push(e),this.fb++),this.ja[e]=t},e.addAll=function(e){if(e instanceof xr){var t=e.va()
e=e.ha()}else t=ge(e),e=_e(e)
for(var n=0;n<t.length;n++)this.set(t[n],e[n])},e.forEach=function(e,t){for(var n=this.va(),r=0;r<n.length;r++){var i=n[r],o=this.get(i)
e.call(t,o,i,this)}},e.clone=function(){return new xr(this)},e.ff=function(e){Lr(this)
var t=0,n=this.fb,r=this,i=new Ar
return i.next=function(){if(n!=r.fb)throw Error("The map has changed since the iterator was created")
if(t>=r.A.length)throw Rr
var i=r.A[t++]
return e?i:r.ja[i]},i}
var Mr=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Fr=function(e){if(e.ha&&"function"==typeof e.ha)return e.ha()
if(o(e))return e.split("")
if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r])
return t}return _e(e)},Ur=function(e){if(e.va&&"function"==typeof e.va)return e.va()
if(!e.ha||"function"!=typeof e.ha){if(p(e)||o(e)){var t=[]
e=e.length
for(var n=0;n<e;n++)t.push(n)
return t}return ge(e)}},jr=function(e,t,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,n)
else if(p(e)||o(e))ee(e,t,n)
else for(var r=Ur(e),i=Fr(e),a=i.length,s=0;s<a;s++)t.call(n,i[s],r&&r[s],e)},Wr=function(e,t,n){if(d(e))n&&(e=_(e,n))
else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument")
e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)},Br=function(e){var t=null
return new Nn(function(n,r){-1==(t=Wr(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).f(function(e){throw r.clearTimeout(t),e})},Vr=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,qr=function(e,t){if(e){e=e.split("&")
for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null
if(0<=r){var o=e[n].substring(0,r)
i=e[n].substring(r+1)}else o=e[n]
t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}},Hr=function(e){Ir.call(this),this.headers=new xr,this.dd=e||null,this.Ba=!1,this.cd=this.b=null,this.Tb=this.Ee=this.Fc="",this.Pa=this.wd=this.Ac=this.nd=!1,this.Cb=0,this.Vc=null,this.Pc="",this.Zc=this.dg=this.af=!1}
b(Hr,Ir)
var Kr=Hr.prototype,Gr=Pr("goog.net.XhrIo")
Kr.P=Gr
var Qr=/^https?$/i,Xr=["POST","PUT"]
Hr.prototype.send=function(e,t,n,i){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Fc+"; newUri="+e)
t=t?t.toUpperCase():"GET",this.Fc=e,this.Tb="",this.Ee=t,this.nd=!1,this.Ba=!0,this.b=this.dd?this.dd.rc():Gt.rc(),this.cd=Qt(this.dd?this.dd:Gt),this.b.onreadystatechange=_(this.Ke,this),this.dg&&"onprogress"in this.b&&(this.b.onprogress=_(function(e){this.Je(e,!0)},this),this.b.upload&&(this.b.upload.onprogress=_(this.Je,this)))
try{Dr(this.P,oi(this,"Opening Xhr")),this.wd=!0,this.b.open(t,String(e),!0),this.wd=!1}catch(e){return Dr(this.P,oi(this,"Error opening Xhr: "+e.message)),void this.ba(5,e)}e=n||""
var o=this.headers.clone()
i&&jr(i,function(e,t){o.set(t,e)}),i=ie(o.va()),n=r.FormData&&e instanceof r.FormData,!oe(Xr,t)||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.b.setRequestHeader(t,e)},this),this.Pc&&(this.b.responseType=this.Pc),"withCredentials"in this.b&&this.b.withCredentials!==this.af&&(this.b.withCredentials=this.af)
try{ti(this),0<this.Cb&&(this.Zc=Yr(this.b),Dr(this.P,oi(this,"Will abort after "+this.Cb+"ms if incomplete, xhr2 "+this.Zc)),this.Zc?(this.b.timeout=this.Cb,this.b.ontimeout=_(this.ic,this)):this.Vc=Wr(this.ic,this.Cb,this)),Dr(this.P,oi(this,"Sending request")),this.Ac=!0,this.b.send(e),this.Ac=!1}catch(e){Dr(this.P,oi(this,"Send error: "+e.message)),this.ba(5,e)}}
var Yr=function(e){return Ne&&We(9)&&s(e.timeout)&&i(e.ontimeout)},zr=function(e){return"content-type"==e.toLowerCase()}
Hr.prototype.ic=function(){void 0!==n&&this.b&&(this.Tb="Timed out after "+this.Cb+"ms, aborting",Dr(this.P,oi(this,this.Tb)),this.dispatchEvent("timeout"),this.abort(8))},Hr.prototype.ba=function(e,t){this.Ba=!1,this.b&&(this.Pa=!0,this.b.abort(),this.Pa=!1),this.Tb=t,$r(this),ei(this)}
var $r=function(e){e.nd||(e.nd=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}
Hr.prototype.abort=function(){this.b&&this.Ba&&(Dr(this.P,oi(this,"Aborting")),this.Ba=!1,this.Pa=!0,this.b.abort(),this.Pa=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ei(this))},Hr.prototype.kb=function(){this.b&&(this.Ba&&(this.Ba=!1,this.Pa=!0,this.b.abort(),this.Pa=!1),ei(this,!0)),Hr.Uc.kb.call(this)},Hr.prototype.Ke=function(){this.isDisposed()||(this.wd||this.Ac||this.Pa?Jr(this):this.$f())},Hr.prototype.$f=function(){Jr(this)}
var Jr=function(e){if(e.Ba&&void 0!==n)if(e.cd[1]&&4==ni(e)&&2==ri(e))Dr(e.P,oi(e,"Local request error detected and ignored"))
else if(e.Ac&&4==ni(e))Wr(e.Ke,0,e)
else if(e.dispatchEvent("readystatechange"),4==ni(e)){Dr(e.P,oi(e,"Request complete")),e.Ba=!1
try{var t=ri(e)
e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0
break e
default:i=!1}var o
if(!(o=i)){var a
if(a=0===t){var s=String(e.Fc).match(Vr)[1]||null
if(!s&&r.self&&r.self.location){var u=r.self.location.protocol
s=u.substr(0,u.length-1)}a=!Qr.test(s?s.toLowerCase():"")}o=a}if(o)e.dispatchEvent("complete"),e.dispatchEvent("success")
else{try{var c=2<ni(e)?e.b.statusText:""}catch(t){Dr(e.P,"Can not get status: "+t.message),c=""}e.Tb=c+" ["+ri(e)+"]",$r(e)}}finally{ei(e)}}}
Hr.prototype.Je=function(e,t){M("progress"===e.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress."),this.dispatchEvent(Zr(e,"progress")),this.dispatchEvent(Zr(e,t?"downloadprogress":"uploadprogress"))}
var Zr=function(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}},ei=function(e,t){if(e.b){ti(e)
var n=e.b,r=e.cd[0]?u:null
e.b=null,e.cd=null,t||e.dispatchEvent("ready")
try{n.onreadystatechange=r}catch(t){(e=e.P)&&e.log(mr,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}},ti=function(e){e.b&&e.Zc&&(e.b.ontimeout=null),s(e.Vc)&&(r.clearTimeout(e.Vc),e.Vc=null)},ni=function(e){return e.b?e.b.readyState:0},ri=function(e){try{return 2<ni(e)?e.b.status:-1}catch(e){return-1}},ii=function(e){try{return e.b?e.b.responseText:""}catch(t){return Dr(e.P,"Can not get responseText: "+t.message),""}}
Hr.prototype.getResponse=function(){try{if(!this.b)return null
if("response"in this.b)return this.b.response
switch(this.Pc){case"":case"text":return this.b.responseText
case"arraybuffer":if("mozResponseArrayBuffer"in this.b)return this.b.mozResponseArrayBuffer}var e=this.P
return e&&e.log(mr,"Response type "+this.Pc+" is not supported on this browser",void 0),null}catch(e){return Dr(this.P,"Can not get response: "+e.message),null}},Hr.prototype.getResponseHeader=function(e){if(this.b&&4==ni(this))return e=this.b.getResponseHeader(e),null===e?void 0:e},Hr.prototype.getAllResponseHeaders=function(){return this.b&&4==ni(this)?this.b.getAllResponseHeaders():""}
var oi=function(e,t){return t+" ["+e.Ee+" "+e.Fc+" "+ri(e)+"]"},ai=function(e,t){if(this.pa=this.cb=this.qa="",this.tb=null,this.Oa=this.Fa="",this.da=this.Sf=!1,e instanceof ai){this.da=i(t)?t:e.da,si(this,e.qa)
var n=e.cb
fi(this),this.cb=n,ui(this,e.pa),ci(this,e.tb),li(this,e.Fa),hi(this,e.ea.clone()),e=e.Oa,fi(this),this.Oa=e}else e&&(n=String(e).match(Vr))?(this.da=!!t,si(this,n[1]||"",!0),e=n[2]||"",fi(this),this.cb=_i(e),ui(this,n[3]||"",!0),ci(this,n[4]),li(this,n[5]||"",!0),hi(this,n[6]||"",!0),e=n[7]||"",fi(this),this.Oa=_i(e)):(this.da=!!t,this.ea=new Ti(null,0,this.da))}
ai.prototype.toString=function(){var e=[],t=this.qa
t&&e.push(gi(t,bi,!0),":")
var n=this.pa
return(n||"file"==t)&&(e.push("//"),(t=this.cb)&&e.push(gi(t,bi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.tb)&&e.push(":",String(n))),(n=this.Fa)&&(this.pa&&"/"!=n.charAt(0)&&e.push("/"),e.push(gi(n,"/"==n.charAt(0)?wi:Ei,!0))),(n=this.ea.toString())&&e.push("?",n),(n=this.Oa)&&e.push("#",gi(n,Ci)),e.join("")},ai.prototype.resolve=function(e){var t=this.clone(),n=!!e.qa
if(n?si(t,e.qa):n=!!e.cb,n){var r=e.cb
fi(t),t.cb=r}else n=!!e.pa
if(n?ui(t,e.pa):n=null!=e.tb,r=e.Fa,n)ci(t,e.tb)
else if(n=!!e.Fa){if("/"!=r.charAt(0))if(this.pa&&!this.Fa)r="/"+r
else{var i=t.Fa.lastIndexOf("/");-1!=i&&(r=t.Fa.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r=""
else if(A(i,"./")||A(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/")
for(var o=[],a=0;a<i.length;){var s=i[a++]
"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?li(t,r):n=""!==e.ea.toString(),n?hi(t,e.ea.clone()):n=!!e.Oa,n&&(e=e.Oa,fi(t),t.Oa=e),t},ai.prototype.clone=function(){return new ai(this)}
var si=function(e,t,n){fi(e),e.qa=n?_i(t,!0):t,e.qa&&(e.qa=e.qa.replace(/:$/,""))},ui=function(e,t,n){fi(e),e.pa=n?_i(t,!0):t},ci=function(e,t){if(fi(e),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t)
e.tb=t}else e.tb=null},li=function(e,t,n){fi(e),e.Fa=n?_i(t,!0):t},hi=function(e,t,n){fi(e),t instanceof Ti?(e.ea=t,e.ea.Wd(e.da)):(n||(t=gi(t,Si)),e.ea=new Ti(t,0,e.da))},pi=function(e,t,n){fi(e),e.ea.set(t,n)},di=function(e,t){return e.ea.get(t)}
ai.prototype.removeParameter=function(e){return fi(this),this.ea.remove(e),this}
var fi=function(e){if(e.Sf)throw Error("Tried to modify a read-only Uri")}
ai.prototype.Wd=function(e){return this.da=e,this.ea&&this.ea.Wd(e),this}
var vi=function(e){return e instanceof ai?e.clone():new ai(e,void 0)},yi=function(e,t){var n=new ai(null,void 0)
return si(n,"https"),e&&ui(n,e),t&&li(n,t),n},_i=function(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""},gi=function(e,t,n){return o(e)?(e=encodeURI(e).replace(t,mi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null},mi=function(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)},bi=/[#\/\?@]/g,Ei=/[\#\?:]/g,wi=/[\#\?]/g,Si=/[\#\?@]/g,Ci=/#/g,Ti=function(e,t,n){this.s=this.m=null,this.U=e||null,this.da=!!n},Pi=function(e){e.m||(e.m=new xr,e.s=0,e.U&&qr(e.U,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))},Ii=function(e){var t=Ur(e)
if(void 0===t)throw Error("Keys are undefined")
var n=new Ti(null,0,void 0)
e=Fr(e)
for(var r=0;r<t.length;r++){var i=t[r],o=e[r]
h(o)?Ni(n,i,o):n.add(i,o)}return n}
e=Ti.prototype,e.add=function(e,t){Pi(this),this.U=null,e=this.ca(e)
var n=this.m.get(e)
return n||this.m.set(e,n=[]),n.push(t),this.s=U(this.s)+1,this},e.remove=function(e){return Pi(this),e=this.ca(e),!!this.m.Ib(e)&&(this.U=null,this.s=U(this.s)-this.m.get(e).length,this.m.remove(e))},e.clear=function(){this.m=this.U=null,this.s=0},e.Ib=function(e){return Pi(this),e=this.ca(e),this.m.Ib(e)},e.forEach=function(e,t){Pi(this),this.m.forEach(function(n,r){ee(n,function(n){e.call(t,n,r,this)},this)},this)},e.va=function(){Pi(this)
for(var e=this.m.ha(),t=this.m.va(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r])
return n},e.ha=function(e){Pi(this)
var t=[]
if(o(e))this.Ib(e)&&(t=ce(t,this.m.get(this.ca(e))))
else{e=this.m.ha()
for(var n=0;n<e.length;n++)t=ce(t,e[n])}return t},e.set=function(e,t){return Pi(this),this.U=null,e=this.ca(e),this.Ib(e)&&(this.s=U(this.s)-this.m.get(e).length),this.m.set(e,[t]),this.s=U(this.s)+1,this},e.get=function(e,t){return e=e?this.ha(e):[],0<e.length?String(e[0]):t}
var Ni=function(e,t,n){e.remove(t),0<n.length&&(e.U=null,e.m.set(e.ca(t),le(n)),e.s=U(e.s)+n.length)}
e=Ti.prototype,e.toString=function(){if(this.U)return this.U
if(!this.m)return""
for(var e=[],t=this.m.va(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r))
r=this.ha(r)
for(var o=0;o<r.length;o++){var a=i
""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.U=e.join("&")},e.clone=function(){var e=new Ti
return e.U=this.U,this.m&&(e.m=this.m.clone(),e.s=this.s),e},e.ca=function(e){return e=String(e),this.da&&(e=e.toLowerCase()),e},e.Wd=function(e){e&&!this.da&&(Pi(this),this.U=null,this.m.forEach(function(e,t){var n=t.toLowerCase()
t!=n&&(this.remove(t),Ni(this,n,e))},this)),this.da=e},e.extend=function(e){for(var t=0;t<arguments.length;t++)jr(arguments[t],function(e,t){this.add(t,e)},this)}
var Oi,ki={Gg:{pd:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Sd:"https://securetoken.googleapis.com/v1/token",id:"p"},Hg:{pd:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Sd:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Ig:{pd:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Sd:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}},Ri=function(e){for(var t in ki)if(ki[t].id===e)return e=ki[t],{firebaseEndpoint:e.pd,secureTokenEndpoint:e.Sd}
return null}
Oi=Ri("__EID__")?"__EID__":void 0
var Ai=function(){var e=zi()
return Ne&&!!Fe&&11==Fe||/Edge\/\d+/.test(e)},Di=function(){return r.window&&r.window.location.href||""},xi=function(e,t){t=t||r.window
var n="about:blank"
e&&(n=xt(Mt(e))),t.location.href=n},Li=function(e,t){var n,r=[]
for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):h(e[n])?be(e[n],t[n])||r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Li(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n)
for(n in t)n in e||r.push(n)
return r},Mi=function(){var e=zi()
return!((e="Chrome"!=Xi(e)?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Ne||!Fe||9<Fe)},Fi=function(e){return e=(e||zi()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))},Ui=function(e){e=e||r.window
try{e.close()}catch(e){}},ji=function(e,t,n){var r=Math.floor(1e9*Math.random()).toString()
t=t||500,n=n||600
var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2
t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=zi().toLowerCase(),r&&(t.target=r,A(n,"crios/")&&(t.target="_blank")),"Firefox"==Xi(zi())&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(r=t)||(r={}),e=window,t=n instanceof Dt?n:Mt(void 0!==n.href?n.href:String(n)),n=r.target||n.target,i=[]
for(a in r)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+r[a])
break
case"target":case"noreferrer":break
default:i.push(a+"="+(r[a]?1:0))}var a=i.join(",")
if((fe("iPhone")&&!fe("iPod")&&!fe("iPad")||fe("iPad")||fe("iPod"))&&e.navigator&&e.navigator.standalone&&n&&"_self"!=n?(a=e.document.createElement("A"),i=fn(a),void 0!==i.HTMLAnchorElement&&void 0!==i.Location&&void 0!==i.Element&&M(a&&(a instanceof i.HTMLAnchorElement||!(a instanceof i.Location||a instanceof i.Element)),"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",dn(a)),t instanceof Dt||t instanceof Dt||(t=t.ob?t.mb():String(t),M(Lt.test(t))||(t="about:invalid#zClosurez"),t=Ut(t)),a.href=xt(t),a.setAttribute("target",n),r.noreferrer&&a.setAttribute("rel","noreferrer"),r=document.createEvent("MouseEvent"),r.initMouseEvent("click",!0,!0,e,1),a.dispatchEvent(r),a={}):r.noreferrer?(a=e.open("",n,a),r=xt(t),a&&(ke&&A(r,";")&&(r="'"+r.replace(/'/g,"%27")+"'"),a.opener=null,e=H("b/12014412, meta tag with sanitized URL"),r='<META HTTP-EQUIV="refresh" content="0; url='+C(r)+'">',j(V(e),"must provide justification"),M(!/^[\s\xa0]*$/.test(V(e)),"must provide non-empty justification"),a.document.write(_n((new yn).Of(r))),a.document.close())):a=e.open(xt(t),n,a),a)try{a.focus()}catch(e){}return a},Wi=function(e){return new Nn(function(t){var n=function(){Br(2e3).then(function(){if(e&&!e.closed)return n()
t()})}
return n()})},Bi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vi=function(){var e=null
return new Nn(function(t){"complete"==r.document.readyState?t():(e=function(){t()},wt(window,"load",e))}).f(function(t){throw St(window,"load",e),t})},qi=function(){return Hi(void 0)?Vi().then(function(){return new Nn(function(e,t){var n=r.document,i=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3)
n.addEventListener("deviceready",function(){clearTimeout(i),e()},!1)})}):Dn(Error("Cordova must run in an Android or iOS file scheme."))},Hi=function(e){return e=e||zi(),!("file:"!==to()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))},Ki=function(){var e=r.window
try{return!(!e||e==e.top)}catch(e){return!1}},Gi=function(){return t.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.INTERNAL.hasOwnProperty("node")?"Node":"Browser"},Qi=function(){var e=Gi()
return"ReactNative"===e||"Node"===e},Xi=function(e){var t=e.toLowerCase()
return A(t,"opera/")||A(t,"opr/")||A(t,"opios/")?"Opera":A(t,"iemobile")?"IEMobile":A(t,"msie")||A(t,"trident/")?"IE":A(t,"edge/")?"Edge":A(t,"firefox/")?"Firefox":A(t,"silk/")?"Silk":A(t,"blackberry")?"Blackberry":A(t,"webos")?"Webos":!A(t,"safari/")||A(t,"chrome/")||A(t,"crios/")||A(t,"android")?!A(t,"chrome/")&&!A(t,"crios/")||A(t,"edge/")?A(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"},Yi=function(e){var t=Gi()
return("Browser"===t?Xi(zi()):t)+"/JsCore/"+e},zi=function(){return r.navigator&&r.navigator.userAgent||""},$i=function(e,t){e=e.split("."),t=t||r
for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]]
return n!=e.length&&(t=void 0),t},Ji=function(){try{var e=r.localStorage,t=ao()
if(e)return e.setItem(t,"1"),e.removeItem(t),!Ai()||!!r.indexedDB}catch(e){}return!1},Zi=function(){return(eo()||"chrome-extension:"===to()||Hi())&&!Qi()&&Ji()},eo=function(){return"http:"===to()||"https:"===to()},to=function(){return r.location&&r.location.protocol||null},no=function(e){return e=e||zi(),!Fi(e)&&"Firefox"!=Xi(e)},ro=function(e){return void 0===e?null:jt(e)},io=function(e){var t,n={}
for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t])
return n},oo=function(e){if(null!==e)return JSON.parse(e)},ao=function(e){return e||""+Math.floor(1e9*Math.random()).toString()},so=function(e){return e=e||zi(),"Safari"!=Xi(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)},uo=function(){var e=r.___jsl
if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null},co=function(){var e=r.navigator
return!e||"boolean"!=typeof e.onLine||!eo()&&"chrome-extension:"!==to()&&void 0===e.connection||e.onLine},lo=function(e,t,n,r){if(e>t)throw Error("Short delay should be less than long delay!")
this.rg=e,this.Wf=t,e=n||zi(),r=r||Gi(),this.Rf=Fi(e)||"ReactNative"===r}
lo.prototype.get=function(){return this.Rf?this.Wf:this.rg}
var ho,po=function(){var e=r.document
return!e||void 0===e.visibilityState||"visible"==e.visibilityState},fo=function(){var e=r.document,t=null
return po()||!e?An():new Nn(function(n){t=function(){po()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).f(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})},vo={}
try{var yo={}
Object.defineProperty(yo,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(yo,"abcd",{configurable:!0,enumerable:!0,value:2}),ho=2==yo.abcd}catch(e){ho=!1}var _o=function(e,t,n){ho?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n},go=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&_o(e,n,t[n])},mo=function(e){var t={}
return go(t,e),t},bo=function(e){var t,n={}
for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t])
return n},Eo=function(e,t){if(!t||!t.length)return!0
if(!e)return!1
for(var n=0;n<t.length;n++){var r=e[t[n]]
if(void 0===r||null===r||""===r)return!1}return!0},wo=function(e){var t=e
if("object"==typeof e&&null!=e){t="length"in e?[]:{}
for(var n in e)_o(t,n,wo(e[n]))}return t},So="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Co=["client_id","response_type","scope","redirect_uri","state"],To={Dg:{Ec:"locale",Yb:500,Xb:600,providerId:"facebook.com",Qd:Co},Eg:{Ec:null,Yb:500,Xb:620,providerId:"github.com",Qd:Co},Fg:{Ec:"hl",Yb:515,Xb:680,providerId:"google.com",Qd:Co},Jg:{Ec:"lang",Yb:485,Xb:705,providerId:"twitter.com",Qd:So}},Po=function(e){for(var t in To)if(To[t].providerId==e)return To[t]
return null},Io=function(e,t){this.code="auth/"+e,this.message=t||Oo[e]||""}
b(Io,Error),Io.prototype.I=function(){return{code:this.code,message:this.message}},Io.prototype.toJSON=function(){return this.I()}
var No=function(e){var t=e&&e.code
return t?new Io(t.substring(5),e.message):null},Oo={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The SMS quota for this project has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ko=function(e,t,n,r,i){if(this.ma=e,this.W=t||null,this.Db=n||null,this.Ud=r||null,this.ba=i||null,!this.Db&&!this.ba)throw new Io("invalid-auth-event")
if(this.Db&&this.ba)throw new Io("invalid-auth-event")
if(this.Db&&!this.Ud)throw new Io("invalid-auth-event")}
ko.prototype.uc=function(){return this.Ud},ko.prototype.getError=function(){return this.ba},ko.prototype.I=function(){return{type:this.ma,eventId:this.W,urlResponse:this.Db,sessionId:this.Ud,error:this.ba&&this.ba.I()}}
var Ro=function(e){return e=e||{},e.type?new ko(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&No(e.error)):null},Ao=function(e){var t="unauthorized-domain",n=void 0,r=vi(e)
e=r.pa,r=r.qa,"chrome-extension"==r?n=w("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=w("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Io.call(this,t,n)}
b(Ao,Io)
var Do=function(e){this.Vf=e.sub,m(),this.Lb=e.email||null,this.eg=e.provider_id||null,this.jf=!!e.is_anonymous||"anonymous"==this.eg}
Do.prototype.getEmail=function(){return this.Lb},Do.prototype.isAnonymous=function(){return this.jf}
var xo=function(e,t){return e.then(function(e){if(e.idToken){e:{var n=e.idToken.split(".")
if(3==n.length){n=n[1]
for(var r=(4-n.length%4)%4,i=0;i<r;i++)n+="."
try{var o=JSON.parse(Ke(n))
if(o.sub&&o.iss&&o.aud&&o.exp){var a=new Do(o)
break e}}catch(e){}}a=null}if(!a||t!=a.Vf)throw new Io("user-mismatch")
return e}throw new Io("user-mismatch")}).f(function(e){throw e&&e.code&&"auth/user-not-found"==e.code?new Io("user-mismatch"):e})},Lo=function(e,t){if(t.idToken||t.accessToken)t.idToken&&_o(this,"idToken",t.idToken),t.accessToken&&_o(this,"accessToken",t.accessToken)
else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Io("internal-error","failed to construct a credential")
_o(this,"accessToken",t.oauthToken),_o(this,"secret",t.oauthTokenSecret)}_o(this,"providerId",e)}
Lo.prototype.Nb=function(e){return Ia(e,Mo(this))},Lo.prototype.Gc=function(e,t){var n=Mo(this)
return n.idToken=t,Na(e,n)},Lo.prototype.Dd=function(e,t){var n=Mo(this)
return xo(Oa(e,n),t)}
var Mo=function(e){var t={}
return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,{postBody:Ii(t).toString(),requestUri:"http://localhost"}}
Lo.prototype.I=function(){var e={providerId:this.providerId}
return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),e}
var Fo=function(e,t){this.hg=t||[],go(this,{providerId:e,isOAuthProvider:!0}),this.me={},this.Bd=(Po(e)||{}).Ec||null,this.md=null}
Fo.prototype.setCustomParameters=function(e){return this.me=Ee(e),this}
var Uo=function(e){Fo.call(this,e,Co),this.Rd=[]}
b(Uo,Fo),Uo.prototype.addScope=function(e){return oe(this.Rd,e)||this.Rd.push(e),this},Uo.prototype.te=function(){return le(this.Rd)},Uo.prototype.credential=function(e,t){if(!e&&!t)throw new Io("argument-error","credential failed: must provide the ID token and/or the access token.")
return new Lo(this.providerId,{idToken:e||null,accessToken:t||null})}
var jo=function(){Uo.call(this,"facebook.com")}
b(jo,Uo),_o(jo,"PROVIDER_ID","facebook.com")
var Wo=function(e){if(!e)throw new Io("argument-error","credential failed: expected 1 argument (the OAuth access token).")
var t=e
return f(e)&&(t=e.accessToken),(new jo).credential(null,t)},Bo=function(){Uo.call(this,"github.com")}
b(Bo,Uo),_o(Bo,"PROVIDER_ID","github.com")
var Vo=function(e){if(!e)throw new Io("argument-error","credential failed: expected 1 argument (the OAuth access token).")
var t=e
return f(e)&&(t=e.accessToken),(new Bo).credential(null,t)},qo=function(){Uo.call(this,"google.com"),this.addScope("profile")}
b(qo,Uo),_o(qo,"PROVIDER_ID","google.com")
var Ho=function(e,t){var n=e
return f(e)&&(n=e.idToken,t=e.accessToken),(new qo).credential(n,t)},Ko=function(){Fo.call(this,"twitter.com",So)}
b(Ko,Fo),_o(Ko,"PROVIDER_ID","twitter.com")
var Go=function(e,t){var n=e
if(f(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Io("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).")
return new Lo("twitter.com",n)},Qo=function(e,t){this.Lb=e,this.Id=t,_o(this,"providerId","password")}
Qo.prototype.Nb=function(e){return ts(e,$a,{email:this.Lb,password:this.Id})},Qo.prototype.Gc=function(e,t){return ts(e,Ka,{idToken:t,email:this.Lb,password:this.Id})},Qo.prototype.Dd=function(e,t){return xo(this.Nb(e),t)},Qo.prototype.I=function(){return{email:this.Lb,password:this.Id}}
var Xo=function(){go(this,{providerId:"password",isOAuthProvider:!1})}
go(Xo,{PROVIDER_ID:"password"})
var Yo=function(e){if(!(e.verificationId&&e.$c||e.hc&&e.phoneNumber))throw new Io("internal-error")
this.R=e,_o(this,"providerId","phone")}
Yo.prototype.Nb=function(e){return e.verifyPhoneNumber(zo(this))},Yo.prototype.Gc=function(e,t){var n=zo(this)
return n.idToken=t,ts(e,Za,n)},Yo.prototype.Dd=function(e,t){var n=zo(this)
return n.operation="REAUTH",e=ts(e,es,n),xo(e,t)},Yo.prototype.I=function(){var e={providerId:"phone"}
return this.R.verificationId&&(e.verificationId=this.R.verificationId),this.R.$c&&(e.verificationCode=this.R.$c),this.R.hc&&(e.temporaryProof=this.R.hc),this.R.phoneNumber&&(e.phoneNumber=this.R.phoneNumber),e}
var zo=function(e){return e.R.hc&&e.R.phoneNumber?{temporaryProof:e.R.hc,phoneNumber:e.R.phoneNumber}:{sessionInfo:e.R.verificationId,code:e.R.$c}},$o=function(e){try{this.mf=e||t.auth()}catch(e){throw new Io("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}go(this,{providerId:"phone",isOAuthProvider:!1})}
$o.prototype.verifyPhoneNumber=function(e,t){var n=this.mf.g
return An(t.verify()).then(function(r){if(!o(r))throw new Io("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.")
switch(t.type){case"recaptcha":return ts(n,qa,{phoneNumber:e,recaptchaToken:r})
default:throw new Io("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})}
var Jo=function(e,t){if(!e)throw new Io("missing-verification-id")
if(!t)throw new Io("missing-verification-code")
return new Yo({verificationId:e,$c:t})}
go($o,{PROVIDER_ID:"phone"})
var Zo=function(e){if(e.temporaryProof&&e.phoneNumber)return new Yo({hc:e.temporaryProof,phoneNumber:e.phoneNumber})
var t=e&&e.providerId
if(!t||"password"===t)return null
var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret
e=e&&e.oauthIdToken
try{switch(t){case"google.com":return Ho(e,n)
case"facebook.com":return Wo(n)
case"github.com":return Vo(n)
case"twitter.com":return Go(n,r)
default:return new Uo(t).credential(e,n)}}catch(e){return null}},ea=function(e){if(!e.isOAuthProvider)throw new Io("invalid-oauth-provider")},ta=function(e,t,n){Io.call(this,e,n),e=t||{},e.email&&_o(this,"email",e.email),e.phoneNumber&&_o(this,"phoneNumber",e.phoneNumber),e.credential&&_o(this,"credential",e.credential)}
b(ta,Io),ta.prototype.I=function(){var e={code:this.code,message:this.message}
this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber)
var t=this.credential&&this.credential.I()
return t&&Se(e,t),e},ta.prototype.toJSON=function(){return this.I()}
var na=function(e){if(e.code){var t=e.code||""
0==t.indexOf("auth/")&&(t=t.substring(5))
var n={credential:Zo(e)}
if(e.email)n.email=e.email
else{if(!e.phoneNumber)return new Io(t,e.message||void 0)
n.phoneNumber=e.phoneNumber}return new ta(t,n,e.message)}return null},ra=function(e){this.Cg=e}
b(ra,Kt),ra.prototype.rc=function(){return new this.Cg},ra.prototype.zd=function(){return{}}
var ia,oa=function(e,n,i){var o="Node"==Gi()
if(!(o=r.XMLHttpRequest||o&&t.INTERNAL.node&&t.INTERNAL.node.XMLHttpRequest))throw new Io("internal-error","The XMLHttpRequest compatibility library was not found.")
this.o=e,e=n||{},this.ng=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.og=e.secureTokenTimeout||aa,this.Pe=Ee(e.secureTokenHeaders||sa),this.xf=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.yf=e.firebaseTimeout||ua,this.sc=Ee(e.firebaseHeaders||ca),i&&(this.sc["X-Client-Version"]=i,this.Pe["X-Client-Version"]=i),this.pf=new zt,this.Bg=new ra(o)},aa=new lo(3e4,6e4),sa={"Content-Type":"application/x-www-form-urlencoded"},ua=new lo(3e4,6e4),ca={"Content-Type":"application/json"},la=function(e,t){t?e.sc["X-Firebase-Locale"]=t:delete e.sc["X-Firebase-Locale"]},ha=function(e,t,n,r,i,o,a){co()?(Mi()?e=_(e.qg,e):(ia||(ia=new Nn(function(e,t){fa(e,t)})),e=_(e.pg,e)),e(t,n,r,i,o,a)):n&&n(null)}
oa.prototype.qg=function(e,t,n,r,i,o){var a="Node"==Gi(),s=Qi()?a?new Hr(this.Bg):new Hr:new Hr(this.pf)
if(o){s.Cb=Math.max(0,o)
var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}s.listen("complete",function(){u&&clearTimeout(u)
var e=null
try{e=JSON.parse(ii(this))||null}catch(t){e=null}t&&t(e)}),Nr(s,"ready",function(){u&&clearTimeout(u),this.La||(this.La=!0,this.kb())}),Nr(s,"timeout",function(){u&&clearTimeout(u),this.La||(this.La=!0,this.kb()),t&&t(null)}),s.send(e,n,r,i)}
var pa=H("https://apis.google.com/js/client.js?onload=%{onload}"),da="__fcb"+Math.floor(1e6*Math.random()).toString(),fa=function(e,t){if(((window.gapi||{}).client||{}).request)e()
else{r[da]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))}
var n=X(pa,{onload:da})
nr(lr(n),function(){t(Error("CORS_UNSUPPORTED"))})}}
oa.prototype.pg=function(e,t,n,r,i){var o=this
ia.then(function(){window.gapi.client.setApiKey(o.o)
var a=window.gapi.auth.getToken()
window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).f(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})}
var va=function(e,t){return new Nn(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ha(e,e.ng+"?key="+encodeURIComponent(e.o),function(e){e?e.error?r(ns(e)):e.access_token&&e.refresh_token?n(e):r(new Io("internal-error")):r(new Io("network-request-failed"))},"POST",Ii(t).toString(),e.Pe,e.og.get()):r(new Io("internal-error"))})},ya=function(e,t,n,r,i,o){var a=vi(e.xf+t)
pi(a,"key",e.o),o&&pi(a,"cb",m().toString())
var s="GET"==n
if(s)for(var u in r)r.hasOwnProperty(u)&&pi(a,u,r[u])
return new Nn(function(t,o){ha(e,a.toString(),function(e){e?e.error?o(ns(e,i||{})):t(e):o(new Io("network-request-failed"))},n,s?void 0:jt(io(r)),e.sc,e.yf.get())})},_a=function(e){if(!At.test(e.email))throw new Io("invalid-email")},ga=function(e){"email"in e&&_a(e)},ma=function(e,t){return ts(e,xa,{identifier:t,continueUri:eo()?Di():"http://localhost"}).then(function(e){return e.allProviders||[]})},ba=function(e){return ts(e,Wa,{}).then(function(e){return e.authorizedDomains||[]})},Ea=function(e){if(!e.idToken)throw new Io("internal-error")},wa=function(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Io("internal-error")}else{if(!e.sessionInfo)throw new Io("missing-verification-id")
if(!e.code)throw new Io("missing-verification-code")}}
oa.prototype.signInAnonymously=function(){return ts(this,Ga,{})},oa.prototype.updateEmail=function(e,t){return ts(this,Ha,{idToken:e,email:t})},oa.prototype.updatePassword=function(e,t){return ts(this,Ka,{idToken:e,password:t})}
var Sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"}
oa.prototype.updateProfile=function(e,t){var n={idToken:e},r=[]
return ve(Sa,function(e,i){var o=t[i]
null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),ts(this,Ha,n)},oa.prototype.sendPasswordResetEmail=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},Se(e,t),ts(this,ja,e)},oa.prototype.sendEmailVerification=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},Se(e,t),ts(this,Ua,e)},oa.prototype.verifyPhoneNumber=function(e){return ts(this,Ja,e)}
var Ca=function(e,t,n){return ts(e,Ma,{idToken:t,deleteProvider:n})},Ta=function(e){if(!e.requestUri||!e.sessionId&&!e.postBody)throw new Io("internal-error")},Pa=function(e){var t=null
if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=na(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=na(e)):"EMAIL_EXISTS"==e.errorMessage&&(e.code="email-already-in-use",t=na(e)),t)throw t
if(!e.idToken)throw new Io("internal-error")},Ia=function(e,t){return t.returnIdpCredential=!0,ts(e,Qa,t)},Na=function(e,t){return t.returnIdpCredential=!0,ts(e,Ya,t)},Oa=function(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,ts(e,Xa,t)},ka=function(e){if(!e.oobCode)throw new Io("invalid-action-code")}
oa.prototype.confirmPasswordReset=function(e,t){return ts(this,Va,{oobCode:e,newPassword:t})},oa.prototype.checkActionCode=function(e){return ts(this,Aa,{oobCode:e})},oa.prototype.applyActionCode=function(e){return ts(this,Ra,{oobCode:e})}
var Ra={endpoint:"setAccountInfo",F:ka,ab:"email"},Aa={endpoint:"resetPassword",F:ka,$:function(e){if(!e.email||!e.requestType)throw new Io("internal-error")}},Da={endpoint:"signupNewUser",F:function(e){if(_a(e),!e.password)throw new Io("weak-password")},$:Ea,Aa:!0},xa={endpoint:"createAuthUri"},La={endpoint:"deleteAccount",Za:["idToken"]},Ma={endpoint:"setAccountInfo",Za:["idToken","deleteProvider"],F:function(e){if(!h(e.deleteProvider))throw new Io("internal-error")}},Fa={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",Za:["idToken","requestType"],F:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Io("internal-error")},ab:"email"},ja={endpoint:"getOobConfirmationCode",Za:["requestType"],F:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Io("internal-error")
_a(e)},ab:"email"},Wa={ee:!0,endpoint:"getProjectConfig",ye:"GET"},Ba={ee:!0,endpoint:"getRecaptchaParam",ye:"GET",$:function(e){if(!e.recaptchaSiteKey)throw new Io("internal-error")}},Va={endpoint:"resetPassword",F:ka,ab:"email"},qa={endpoint:"sendVerificationCode",Za:["phoneNumber","recaptchaToken"],ab:"sessionInfo"},Ha={endpoint:"setAccountInfo",Za:["idToken"],F:ga,Aa:!0},Ka={endpoint:"setAccountInfo",Za:["idToken"],F:function(e){if(ga(e),!e.password)throw new Io("weak-password")},$:Ea,Aa:!0},Ga={endpoint:"signupNewUser",$:Ea,Aa:!0},Qa={endpoint:"verifyAssertion",F:Ta,$:Pa,Aa:!0},Xa={endpoint:"verifyAssertion",F:Ta,$:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Io("user-not-found")
if(!e.idToken)throw new Io("internal-error")},Aa:!0},Ya={endpoint:"verifyAssertion",F:function(e){if(Ta(e),!e.idToken)throw new Io("internal-error")},$:Pa,Aa:!0},za={endpoint:"verifyCustomToken",F:function(e){if(!e.token)throw new Io("invalid-custom-token")},$:Ea,Aa:!0},$a={endpoint:"verifyPassword",F:function(e){if(_a(e),!e.password)throw new Io("wrong-password")},$:Ea,Aa:!0},Ja={endpoint:"verifyPhoneNumber",F:wa,$:Ea},Za={endpoint:"verifyPhoneNumber",F:function(e){if(!e.idToken)throw new Io("internal-error")
wa(e)},$:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",na(e)
Ea(e)}},es={sf:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",F:wa,$:Ea},ts=function(e,t,n){if(!Eo(n,t.Za))return Dn(new Io("internal-error"))
var r,i=t.ye||"POST"
return An(n).then(t.F).then(function(){return t.Aa&&(n.returnSecureToken=!0),ya(e,t.endpoint,i,n,t.sf,t.ee||!1)}).then(function(e){return r=e}).then(t.$).then(function(){if(!t.ab)return r
if(!(t.ab in r))throw new Io("internal-error")
return r[t.ab]})},ns=function(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"}
if(n=r[n]?new Io(r[n]):null)return n
n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri"},Se(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0
for(var i in r)if(0===n.indexOf(i))return new Io(r[i],t)
return!t&&e&&(t=ro(e)),new Io("internal-error",t)},rs=function(e){this.D=e}
rs.prototype.value=function(){return this.D},rs.prototype.Re=function(e){return this.D.style=e,this},rs.prototype.getStyle=function(){return this.D.style}
var is=function(e){this.D=e||{}}
e=is.prototype,e.value=function(){return this.D},e.getUrl=function(){return this.D.url},e.Re=function(e){return this.D.style=e,this},e.getStyle=function(){return this.D.style},e.getId=function(){return this.D.id},e.getContext=function(){return this.D.context}
var os=function(e){this.yg=e,this.zc=null,this.Fd=ss(this)},as=function(e){var t=new is
return t.D.where=document.body,t.D.url=e.yg,t.D.messageHandlersFilter=$i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),t.D.attributes=t.D.attributes||{},new rs(t.D.attributes).Re({position:"absolute",top:"-100px",width:"1px",height:"1px"}),t.D.dontclear=!0,t},ss=function(e){return ds().then(function(){return new Nn(function(t,n){$i("gapi.iframes.getContext")().open(as(e).value(),function(r){e.zc=r,e.zc.restyle({setHideOnLeave:!1})
var i=setTimeout(function(){n(Error("Network Error"))},hs.get()),o=function(){clearTimeout(i),t()}
r.ping(o).then(o,function(){n(Error("Network Error"))})})})})}
os.prototype.sendMessage=function(e){var t=this
return this.Fd.then(function(){return new Nn(function(n){t.zc.send(e.type,e,n,$i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}
var us=function(e,t){e.Fd.then(function(){e.zc.register("authEvent",t,$i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})},cs=H("https://apis.google.com/js/api.js?onload=%{onload}"),ls=new lo(3e4,6e4),hs=new lo(5e3,15e3),ps=null,ds=function(){return ps||(ps=new Nn(function(e,t){if(co()){var n=function(){uo(),$i("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){uo(),t(Error("Network Error"))},timeout:ls.get()})}
if($i("gapi.iframes.Iframe"))e()
else if($i("gapi.load"))n()
else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString()
r[i]=function(){$i("gapi.load")?n():t(Error("Network Error"))},i=X(cs,{onload:i}),An(lr(i)).f(function(){t(Error("Network Error"))})}}else t(Error("Network Error"))}).f(function(e){throw ps=null,e}))},fs=function(e,t,n){this.C=e,this.o=t,this.u=n,this.eb=null,this.bb=yi(this.C,"/__/auth/iframe"),pi(this.bb,"apiKey",this.o),pi(this.bb,"appName",this.u),this.V=null}
fs.prototype.Xd=function(e){return this.eb=e,this},fs.prototype.Vd=function(e){return this.V=e,this},fs.prototype.toString=function(){return this.eb?pi(this.bb,"v",this.eb):this.bb.removeParameter("v"),this.V?pi(this.bb,"eid",this.V):this.bb.removeParameter("eid"),this.bb.toString()}
var vs=function(e,t,n,r,i){this.C=e,this.o=t,this.u=n,this.lf=r,this.eb=this.W=this.Pd=null,this.vb=i,this.V=null}
vs.prototype.Xd=function(e){return this.eb=e,this},vs.prototype.Vd=function(e){return this.V=e,this},vs.prototype.toString=function(){var e=yi(this.C,"/__/auth/handler")
if(pi(e,"apiKey",this.o),pi(e,"appName",this.u),pi(e,"authType",this.lf),this.vb.isOAuthProvider){var n=this.vb
try{var r=t.app(this.u).auth().ia}catch(e){r=null}n.md=r,pi(e,"providerId",this.vb.providerId),n=this.vb,r=io(n.me)
for(var i in r)r[i]=r[i].toString()
i=n.hg,r=Ee(r)
for(var o=0;o<i.length;o++){var a=i[o]
a in r&&delete r[a]}n.Bd&&n.md&&!r[n.Bd]&&(r[n.Bd]=n.md),me(r)||pi(e,"customParameters",ro(r))}if("function"==typeof this.vb.te&&(n=this.vb.te(),n.length&&pi(e,"scopes",n.join(","))),this.Pd?pi(e,"redirectUrl",this.Pd):e.removeParameter("redirectUrl"),this.W?pi(e,"eventId",this.W):e.removeParameter("eventId"),this.eb?pi(e,"v",this.eb):e.removeParameter("v"),this.mc)for(var s in this.mc)this.mc.hasOwnProperty(s)&&!di(e,s)&&pi(e,s,this.mc[s])
return this.V?pi(e,"eid",this.V):e.removeParameter("eid"),e.toString()}
var ys=function(e,t,n,r,i){this.C=e,this.o=t,this.u=n,this.Ka=r||null,this.V=i||null,this.Af=this.Ka?Yi(this.Ka):null,r=this.Ka
var o=this.V
this.Kf=new fs(e,t,n).Xd(r).Vd(o).toString(),this.ta=[],this.g=new oa(t,Ri(i),this.Af),this.Bc=this.wa=null},_s=function(e){var t=Di()
return ba(e).then(function(e){e:{var n=vi(t),r=n.qa
n=n.pa
for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r
if(0==o.indexOf("chrome-extension://")?a=vi(o).pa==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Bi.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0
break e}}e=!1}if(!e)throw new Ao(Di())})}
e=ys.prototype,e.Rb=function(){if(this.Bc)return this.Bc
var e=this
return this.Bc=Vi().then(function(){e.yc=new os(e.Kf),ms(e)})},e.ec=function(e,t,n){var r=new Io("popup-closed-by-user"),i=new Io("web-storage-unsupported"),o=this,a=!1
return this.Qa().then(function(){bs(o).then(function(n){n||(e&&Ui(e),t(i),a=!0)})}).f(function(){}).then(function(){if(!a)return Wi(e)}).then(function(){if(!a)return Br(n).then(function(){t(r)})})},e.Se=function(){var e=zi()
return!no(e)&&!so(e)},e.we=function(){return!1},e.Zb=function(e,t,n,r,i,o,a){if(!e)return Dn(new Io("popup-blocked"))
if(a&&!no())return this.Qa().f(function(t){Ui(e),i(t)}),r(),An()
this.wa||(this.wa=_s(this.g))
var s=this
return this.wa.then(function(){var t=s.Qa().f(function(t){throw Ui(e),i(t),t})
return r(),t}).then(function(){if(ea(n),!a){var r=gs(s.C,s.o,s.u,t,n,null,o,s.Ka,void 0,s.V)
xi(r,e)}}).f(function(e){throw"auth/network-request-failed"==e.code&&(s.wa=null),e})},e.$b=function(e,t,n){this.wa||(this.wa=_s(this.g))
var r=this
return this.wa.then(function(){ea(t)
var i=gs(r.C,r.o,r.u,e,t,Di(),n,r.Ka,void 0,r.V)
xi(i)}).f(function(e){throw"auth/network-request-failed"==e.code&&(r.wa=null),e})},e.Qa=function(){var e=this
return this.Rb().then(function(){return e.yc.Fd}).f(function(){throw e.wa=null,new Io("network-request-failed")})},e.We=function(){return!0}
var gs=function(e,t,n,r,i,o,a,s,u,c){return e=new vs(e,t,n,r,i),e.Pd=o,e.W=a,o=e.Xd(s),o.mc=Ee(u||null),o.Vd(c).toString()},ms=function(e){if(!e.yc)throw Error("IfcHandler must be initialized!")
us(e.yc,function(t){var n={}
if(t&&t.authEvent){var r=!1
for(t=Ro(t.authEvent),n=0;n<e.ta.length;n++)r=e.ta[n](t)||r
return n={},n.status=r?"ACK":"ERROR",An(n)}return n.status="ERROR",An(n)})},bs=function(e){var t={type:"webStorageSupport"}
return e.Rb().then(function(){return e.yc.sendMessage(t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport
throw Error()})}
ys.prototype.hb=function(e){this.ta.push(e)},ys.prototype.cc=function(e){ue(this.ta,function(t){return t==e})}
var Es=function(e,t,n,i,o,a){if(_o(this,"type","recaptcha"),this.ad=this.Hb=null,this.Jb=!1,this.ke=t,this.Ea=n||{theme:"light",type:"image"},this.K=[],this.Ea.sitekey)throw new Io("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.")
if(this.Cc="invisible"===this.Ea.size,!bn(t)||!this.Cc&&bn(t).hasChildNodes())throw new Io("argument-error","reCAPTCHA container is either not found or already contains inner elements!")
this.g=new oa(e,a||null,o||null),this.Df=i||function(){return null}
var s=this
this.Wc=[]
var u=this.Ea.callback
this.Ea.callback=function(e){if(s.Kb(e),"function"==typeof u)u(e)
else if("string"==typeof u){var t=$i(u,r)
"function"==typeof t&&t(e)}}
var c=this.Ea["expired-callback"]
this.Ea["expired-callback"]=function(){if(s.Kb(null),"function"==typeof c)c()
else if("string"==typeof c){var e=$i(c,r)
"function"==typeof e&&e()}}}
Es.prototype.Kb=function(e){for(var t=0;t<this.Wc.length;t++)try{this.Wc[t](e)}catch(e){}}
var ws=function(e,t){ue(e.Wc,function(e){return e==t})}
Es.prototype.c=function(e){var t=this
return this.K.push(e),Fn(e,function(){ae(t.K,e)}),e},Es.prototype.Sb=function(){var e=this
return this.Hb?this.Hb:this.Hb=this.c(An().then(function(){if(eo())return Vi()
throw new Io("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return Ps(Ns(),e.Df())}).then(function(){return ts(e.g,Ba,{})}).then(function(t){e.Ea.sitekey=t.recaptchaSiteKey}).f(function(t){throw e.Hb=null,t}))},Es.prototype.render=function(){Ss(this)
var e=this
return this.c(this.Sb().then(function(){if(null===e.ad){var t=e.ke
if(!e.Cc){var n=bn(t)
t=Sn("DIV"),n.appendChild(t)}e.ad=grecaptcha.render(t,e.Ea)}return e.ad}))},Es.prototype.verify=function(){Ss(this)
var e=this
return this.c(this.render().then(function(t){return new Nn(function(n){var r=grecaptcha.getResponse(t)
if(r)n(r)
else{var i=function(t){t&&(ws(e,i),n(t))}
e.Wc.push(i),e.Cc&&grecaptcha.execute(e.ad)}})}))}
var Ss=function(e){if(e.Jb)throw new Io("internal-error","RecaptchaVerifier instance has been destroyed.")}
Es.prototype.clear=function(){Ss(this),this.Jb=!0,Ns().kd--
for(var e=0;e<this.K.length;e++)this.K[e].cancel("RecaptchaVerifier instance has been destroyed.")
if(!this.Cc){e=bn(this.ke)
for(var t;t=e.firstChild;)e.removeChild(t)}}
var Cs=H("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ts=function(){this.kd=r.grecaptcha?1/0:0,this.xe=null,this.hd="__rcb"+Math.floor(1e6*Math.random()).toString()},Ps=function(e,t){return new Nn(function(n,i){if(co())if(!r.grecaptcha||t!==e.xe&&!e.kd){r[e.hd]=function(){if(r.grecaptcha){e.xe=t
var o=r.grecaptcha.render
r.grecaptcha.render=function(t,n){return t=o(t,n),e.kd++,t},n()}else i(new Io("internal-error"))
delete r[e.hd]}
var o=X(Cs,{onload:e.hd,hl:t||""})
An(lr(o)).f(function(){i(new Io("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else n()
else i(new Io("network-request-failed"))})},Is=null,Ns=function(){return Is||(Is=new Ts),Is},Os=function(e,n,r){try{this.j=r||t.app()}catch(e){throw new Io("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.j.options||!this.j.options.apiKey)throw new Io("invalid-api-key")
r=this.j.options.apiKey
var i=this,o=t.SDK_VERSION?Yi(t.SDK_VERSION):null
Es.call(this,r,e,n,function(){try{var e=i.j.auth().ia}catch(t){e=null}return e},o,Ri(Oi))}
b(Os,Es)
var ks=function(e){if(this.G=e||t.INTERNAL.reactNative&&t.INTERNAL.reactNative.AsyncStorage,!this.G)throw new Io("internal-error","The React Native compatibility library was not found.")}
e=ks.prototype,e.get=function(e){return An(this.G.getItem(e)).then(function(e){return e&&oo(e)})},e.set=function(e,t){return An(this.G.setItem(e,ro(t)))},e.remove=function(e){return An(this.G.removeItem(e))},e.ib=function(){},e.Ya=function(){}
var Rs=function(){this.G={}}
e=Rs.prototype,e.get=function(e){return An(this.G[e])},e.set=function(e,t){return this.G[e]=t,An()},e.remove=function(e){return delete this.G[e],An()},e.ib=function(){},e.Ya=function(){}
var As=function(){if(!Ds()){if("Node"==Gi())throw new Io("internal-error","The LocalStorage compatibility library was not found.")
throw new Io("web-storage-unsupported")}this.G=r.localStorage||t.INTERNAL.node.localStorage},Ds=function(){var e="Node"==Gi()
if(!(e=r.localStorage||e&&t.INTERNAL.node&&t.INTERNAL.node.localStorage))return!1
try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}
e=As.prototype,e.get=function(e){var t=this
return An().then(function(){var n=t.G.getItem(e)
return oo(n)})},e.set=function(e,t){var n=this
return An().then(function(){var r=ro(t)
null===r?n.remove(e):n.G.setItem(e,r)})},e.remove=function(e){var t=this
return An().then(function(){t.G.removeItem(e)})},e.ib=function(e){r.window&&mt(r.window,"storage",e)},e.Ya=function(e){r.window&&St(r.window,"storage",e)}
var xs=function(){this.G={}}
e=xs.prototype,e.get=function(){return An(null)},e.set=function(){return An()},e.remove=function(){return An()},e.ib=function(){},e.Ya=function(){}
var Ls=function(){if(!Ms()){if("Node"==Gi())throw new Io("internal-error","The SessionStorage compatibility library was not found.")
throw new Io("web-storage-unsupported")}this.G=r.sessionStorage||t.INTERNAL.node.sessionStorage},Ms=function(){var e="Node"==Gi()
if(!(e=r.sessionStorage||e&&t.INTERNAL.node&&t.INTERNAL.node.sessionStorage))return!1
try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}
e=Ls.prototype,e.get=function(e){var t=this
return An().then(function(){var n=t.G.getItem(e)
return oo(n)})},e.set=function(e,t){var n=this
return An().then(function(){var r=ro(t)
null===r?n.remove(e):n.G.setItem(e,r)})},e.remove=function(e){var t=this
return An().then(function(){t.G.removeItem(e)})},e.ib=function(){},e.Ya=function(){}
var Fs,Us=function(e,t,n,i,o,a){if(!window.indexedDB)throw new Io("web-storage-unsupported")
this.tf=e,this.Ed=t,this.ld=n,this.$e=i,this.fb=o,this.Y={},this.fc=[],this.Vb=0,this.Mf=a||r.indexedDB},js=function(e){return new Nn(function(t,n){var r=e.Mf.open(e.tf,e.fb)
r.onerror=function(e){n(Error(e.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result
try{t.createObjectStore(e.Ed,{keyPath:e.ld})}catch(e){n(e)}},r.onsuccess=function(e){t(e.target.result)}})},Ws=function(e){return e.Be||(e.Be=js(e)),e.Be},Bs=function(e,t){return t.objectStore(e.Ed)},Vs=function(e,t,n){return t.transaction([e.Ed],n?"readwrite":"readonly")},qs=function(e){return new Nn(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(Error(e.target.errorCode))}})}
e=Us.prototype,e.set=function(e,t){var n,r=!1,i=this
return Fn(Ws(this).then(function(t){return n=t,t=Bs(i,Vs(i,n,!0)),qs(t.get(e))}).then(function(o){var a=Bs(i,Vs(i,n,!0))
return o?(o.value=t,qs(a.put(o))):(i.Vb++,r=!0,o={},o[i.ld]=e,o[i.$e]=t,qs(a.add(o)))}).then(function(){i.Y[e]=t}),function(){r&&i.Vb--})},e.get=function(e){var t=this
return Ws(this).then(function(n){return qs(Bs(t,Vs(t,n,!1)).get(e))}).then(function(e){return e&&e.value})},e.remove=function(e){var t=!1,n=this
return Fn(Ws(this).then(function(r){return t=!0,n.Vb++,qs(Bs(n,Vs(n,r,!0)).delete(e))}).then(function(){delete n.Y[e]}),function(){t&&n.Vb--})},e.ug=function(){var e=this
return Ws(this).then(function(t){var n=Bs(e,Vs(e,t,!1))
return n.getAll?qs(n.getAll()):new Nn(function(e,t){var r=[],i=n.openCursor()
i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){t(Error(e.target.errorCode))}})}).then(function(t){var n={},r=[]
if(0==e.Vb){for(r=0;r<t.length;r++)n[t[r][e.ld]]=t[r][e.$e]
r=Li(e.Y,n),e.Y=n}return r})},e.ib=function(e){0==this.fc.length&&this.Zd(),this.fc.push(e)},e.Ya=function(e){ue(this.fc,function(t){return t==e}),0==this.fc.length&&this.Sc()},e.Zd=function(){var e=this
this.Sc()
var t=function(){return e.Kd=Br(800).then(_(e.ug,e)).then(function(t){0<t.length&&ee(e.fc,function(e){e(t)})}).then(t).f(function(e){"STOP_EVENT"!=e.message&&t()}),e.Kd}
t()},e.Sc=function(){this.Kd&&this.Kd.cancel("STOP_EVENT")}
var Hs,Ks=function(){this.oe={Browser:Gs,Node:Qs,ReactNative:Xs}[Gi()]},Gs={B:As,ae:Ls},Qs={B:As,ae:Ls},Xs={B:ks,ae:xs},Ys=function(e){this.yd(e)}
Ys.prototype.yd=function(e){var t=e.url
if(void 0===t)throw new Io("missing-continue-uri")
if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Io("invalid-continue-uri")
this.nf=t,this.ce=this.nc=null,this.Ce=!1
var n=e.android
if(n&&"object"==typeof n){t=n.packageName
var r=n.installApp
if(n=n.minimumVersion,"string"==typeof t&&t.length){if(this.nc=t,void 0!==r&&"boolean"!=typeof r)throw new Io("argument-error","installApp property must be a boolean when specified.")
if(this.Ce=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Io("argument-error","minimumVersion property must be a non empty string when specified.")
this.ce=n||null}else{if(void 0!==t)throw new Io("argument-error","packageName property must be a non empty string when specified.")
if(void 0!==r||void 0!==n)throw new Io("missing-android-pkg-name")}}else if(void 0!==n)throw new Io("argument-error","android property must be a non null object when specified.")
if(this.vd=null,(t=e.iOS)&&"object"==typeof t){if("string"==typeof(t=t.bundleId)&&t.length)this.vd=t
else if(void 0!==t)throw new Io("argument-error","bundleId property must be a non empty string when specified.")}else if(void 0!==t)throw new Io("argument-error","iOS property must be a non null object when specified.")
if(void 0!==(e=e.handleCodeInApp)&&"boolean"!=typeof e)throw new Io("argument-error","handleCodeInApp property must be a boolean when specified.")
if((this.ie=!!e)&&!this.vd&&!this.nc)throw new Io("argument-error","handleCodeInApp property can't be true when no mobile application is provided.")}
var zs=function(e){var t={}
t.continueUrl=e.nf,t.canHandleCodeInApp=e.ie,(t.androidPackageName=e.nc)&&(t.androidMinimumVersion=e.ce,t.androidInstallApp=e.Ce),t.iOSBundleId=e.vd
for(var n in t)null===t[n]&&delete t[n]
return t},$s=function(e,t){this.rf=t,_o(this,"verificationId",e)}
$s.prototype.confirm=function(e){return e=Jo(this.verificationId,e),this.rf(e)}
var Js=function(e,t,n,r){return new $o(e).verifyPhoneNumber(t,n).then(function(e){return new $s(e,r)})},Zs=function(e){var t={},n=e.email,r=e.newEmail
if(e=e.requestType,!n||!e)throw Error("Invalid provider user info!")
t.fromEmail=r||null,t.email=n,_o(this,"operation",e),_o(this,"data",wo(t))},eu=function(e,t,n,r,i,o){if(this.bg=e,this.jg=t,this.Ef=n,this.Hc=r,this.be=i,this.kg=!!o,this.sb=null,this.Ra=this.Hc,this.be<this.Hc)throw Error("Proactive refresh lower bound greater than upper bound!")}
eu.prototype.start=function(){this.Ra=this.Hc,nu(this,!0)}
var tu=function(e,t){return t?(e.Ra=e.Hc,e.Ef()):(t=e.Ra,e.Ra*=2,e.Ra>e.be&&(e.Ra=e.be),t)},nu=function(e,t){e.stop(),e.sb=Br(tu(e,t)).then(function(){return e.kg?An():fo()}).then(function(){return e.bg()}).then(function(){nu(e,!0)}).f(function(t){e.jg(t)&&nu(e,!1)})}
eu.prototype.stop=function(){this.sb&&(this.sb.cancel(),this.sb=null)}
var ru=function(e){var t={}
t["facebook.com"]=ou,t["google.com"]=su,t["github.com"]=au,t["twitter.com"]=uu
var n=e&&e.providerId
return n?t[n]?new t[n](e):new iu(e):null},iu=function(e){var t=oo(e.rawUserInfo||"{}")
if(!(e=e.providerId))throw Error("Invalid additional user info!")
_o(this,"profile",wo(t||{})),_o(this,"providerId",e)},ou=function(e){if(iu.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider id!")}
b(ou,iu)
var au=function(e){if(iu.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider id!")
_o(this,"username",this.profile&&this.profile.login||null)}
b(au,iu)
var su=function(e){if(iu.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider id!")}
b(su,iu)
var uu=function(e){if(iu.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider id!")
_o(this,"username",e.screenName||null)}
b(uu,iu)
var cu,lu={LOCAL:"local",NONE:"none",SESSION:"session"},hu=function(e){var t=new Io("invalid-persistence-type"),n=new Io("unsupported-persistence-type")
e:{for(r in lu)if(lu[r]==e){var r=!0
break e}r=!1}if(!r||"string"!=typeof e)throw t
switch(Gi()){case"ReactNative":if("session"===e)throw n
break
case"Node":if("none"!==e)throw n
break
default:if(!Ji()&&"none"!==e)throw n}},pu=function(e,t,n,r){this.Ge=e,this.Td=t,this.lg=n,this.dc=r,this.X={},Hs||(Hs=new Ks),e=Hs
try{if(Ai()){Fs||(Fs=new Us("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1))
var i=Fs}else i=new e.oe.B
this.Le=i}catch(e){this.Le=new Rs,this.dc=!0}try{this.Ve=new e.oe.ae}catch(e){this.Ve=new Rs}this.Lf=new Rs,this.$d=_(this.Te,this),this.Y={}},du=function(){return cu||(cu=new pu("firebase",":",!(so(zi())||!Ki()),no())),cu},fu=function(e,t){switch(t){case"session":return e.Ve
case"none":return e.Lf
default:return e.Le}}
e=pu.prototype,e.ca=function(e,t){return this.Ge+this.Td+e.name+(t?this.Td+t:"")},e.get=function(e,t){return fu(this,e.B).get(this.ca(e,t))},e.remove=function(e,t){return t=this.ca(e,t),"local"!=e.B||this.dc||(this.Y[t]=null),fu(this,e.B).remove(t)},e.set=function(e,t,n){var r=this.ca(e,n),i=this,o=fu(this,e.B)
return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"!=e.B||i.dc||(i.Y[r]=t)})},e.addListener=function(e,t,n){e=this.ca(e,t),this.dc||(this.Y[e]=r.localStorage.getItem(e)),me(this.X)&&this.Zd(),this.X[e]||(this.X[e]=[]),this.X[e].push(n)},e.removeListener=function(e,t,n){e=this.ca(e,t),this.X[e]&&(ue(this.X[e],function(e){return e==n}),0==this.X[e].length&&delete this.X[e]),me(this.X)&&this.Sc()},e.Zd=function(){fu(this,"local").ib(this.$d),this.dc||Ai()||vu(this)}
var vu=function(e){yu(e),e.Cd=setInterval(function(){for(var t in e.X){var n=r.localStorage.getItem(t),i=e.Y[t]
n!=i&&(e.Y[t]=n,n=new ut({type:"storage",key:t,target:window,oldValue:i,newValue:n,Jd:!0}),e.Te(n))}},1e3)},yu=function(e){e.Cd&&(clearInterval(e.Cd),e.Cd=null)}
pu.prototype.Sc=function(){fu(this,"local").Ya(this.$d),yu(this)},pu.prototype.Te=function(e){if(e&&e.Bf){var t=e.O.key
if(0==t.indexOf(this.Ge+this.Td)&&this.X[t]){if(void 0!==e.O.Jd?fu(this,"local").Ya(this.$d):yu(this),this.lg){var n=r.localStorage.getItem(t),i=e.O.newValue
if(i!==n)null!==i?r.localStorage.setItem(t,i):r.localStorage.removeItem(t)
else if(this.Y[t]===i&&void 0===e.O.Jd)return}var o=this
n=function(){void 0===e.O.Jd&&o.Y[t]===r.localStorage.getItem(t)||(o.Y[t]=r.localStorage.getItem(t),o.ge(t))},Ne&&Fe&&10==Fe&&r.localStorage.getItem(t)!==e.O.newValue&&e.O.newValue!==e.O.oldValue?setTimeout(n,10):n()}}else ee(e,_(this.ge,this))},pu.prototype.ge=function(e){this.X[e]&&ee(this.X[e],function(e){e()})}
var _u=function(e,t){this.i=e,this.h=t||du()},gu={name:"authEvent",B:"local"},mu=function(e){return e.h.get(gu,e.i).then(function(e){return Ro(e)})}
_u.prototype.hb=function(e){this.h.addListener(gu,this.i,e)},_u.prototype.cc=function(e){this.h.removeListener(gu,this.i,e)}
var bu=function(e){this.h=e||du()},Eu={name:"sessionId",B:"session"}
bu.prototype.uc=function(e){return this.h.get(Eu,e)}
var wu=function(e,t,n,r,i,o,a){this.C=e,this.o=t,this.u=n,this.Ka=r||null,this.V=a||null,this.Ue=t+":"+n,this.mg=new bu,this.se=new _u(this.Ue),this.xd=null,this.ta=[],this.Qf=i||500,this.fg=o||2e3,this.Qb=this.Kc=null},Su=function(e){return new Io("invalid-cordova-configuration",e)}
wu.prototype.Qa=function(){return this.Sb?this.Sb:this.Sb=qi().then(function(){if("function"!=typeof $i("universalLinks.subscribe",r))throw Su("cordova-universal-links-plugin is not installed")
if(void 0===$i("BuildInfo.packageName",r))throw Su("cordova-plugin-buildinfo is not installed")
if("function"!=typeof $i("cordova.plugins.browsertab.openUrl",r))throw Su("cordova-plugin-browsertab is not installed")
if("function"!=typeof $i("cordova.InAppBrowser.open",r))throw Su("cordova-plugin-inappbrowser is not installed")},function(){throw new Io("cordova-not-ready")})}
var Cu=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--
return t.join("")},Tu=function(e){var t=new tt
return t.update(e),he(t.digest())}
e=wu.prototype,e.ec=function(e,t){return t(new Io("operation-not-supported-in-this-environment")),An()},e.Zb=function(){return Dn(new Io("operation-not-supported-in-this-environment"))},e.We=function(){return!1},e.Se=function(){return!0},e.we=function(){return!0},e.$b=function(e,t,n){if(this.Kc)return Dn(new Io("redirect-operation-pending"))
var i=this,o=r.document,a=null,s=null,u=null,c=null
return this.Kc=Fn(An().then(function(){return ea(t),Iu(i)}).then(function(){return Pu(i,e,t,n)}).then(function(){return new Nn(function(e,t){s=function(){var t=$i("cordova.plugins.browsertab.close",r)
return e(),"function"==typeof t&&t(),i.Qb&&"function"==typeof i.Qb.close&&(i.Qb.close(),i.Qb=null),!1},i.hb(s),u=function(){a||(a=Br(i.fg).then(function(){t(new Io("redirect-cancelled-by-user"))}))},c=function(){po()&&u()},o.addEventListener("resume",u,!1),zi().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).f(function(e){return Nu(i).then(function(){throw e})})}),function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.cc(s),i.Kc=null})}
var Pu=function(e,t,n,i){var o=Cu(),a=new ko(t,i,null,o,new Io("no-auth-event")),s=$i("BuildInfo.packageName",r)
if("string"!=typeof s)throw new Io("invalid-cordova-configuration")
var u=$i("BuildInfo.displayName",r),c={}
if(zi().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s
else{if(!zi().toLowerCase().match(/android/))return Dn(new Io("operation-not-supported-in-this-environment"))
c.apn=s}u&&(c.appDisplayName=u),o=Tu(o),c.sessionId=o
var l=gs(e.C,e.o,e.u,t,n,null,i,e.Ka,c,e.V)
return e.Qa().then(function(){var t=e.Ue
return e.mg.h.set(gu,a.I(),t)}).then(function(){var t=$i("cordova.plugins.browsertab.isAvailable",r)
if("function"!=typeof t)throw new Io("invalid-cordova-configuration")
var n=null
t(function(t){if(t){if("function"!=typeof(n=$i("cordova.plugins.browsertab.openUrl",r)))throw new Io("invalid-cordova-configuration")
n(l)}else{if("function"!=typeof(n=$i("cordova.InAppBrowser.open",r)))throw new Io("invalid-cordova-configuration")
t=n
var i=zi()
i=!(!i.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!i.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),e.Qb=t(l,i?"_blank":"_system","location=yes")}})})}
wu.prototype.Kb=function(e){for(var t=0;t<this.ta.length;t++)try{this.ta[t](e)}catch(e){}}
var Iu=function(e){return e.xd||(e.xd=e.Qa().then(function(){return new Nn(function(t){var n=function(r){return t(r),e.cc(n),!1}
e.hb(n),Ou(e)})})),e.xd},Nu=function(e){var t=null
return mu(e.se).then(function(n){return t=n,n=e.se,n.h.remove(gu,n.i)}).then(function(){return t})},Ou=function(e){var t=$i("universalLinks.subscribe",r)
if("function"!=typeof t)throw new Io("invalid-cordova-configuration")
var n=new ko("unknown",null,null,null,new Io("no-auth-event")),i=!1,o=Br(e.Qf).then(function(){return Nu(e).then(function(){i||e.Kb(n)})}),a=function(t){i=!0,o&&o.cancel(),Nu(e).then(function(r){var i=n
if(r&&t&&t.url){i=null
var o=t.url,a=vi(o),s=di(a,"link"),u=di(vi(s),"link")
a=di(a,"deep_link_id"),o=di(vi(a),"link")||a||u||s||o,-1!=o.indexOf("/__/auth/callback")&&(i=vi(o),i=oo(di(i,"firebaseError")||null),i=(i="object"==typeof i?No(i):null)?new ko(r.ma,r.W,null,null,i):new ko(r.ma,r.W,o,r.uc())),i=i||n}e.Kb(i)})},s=r.handleOpenURL
r.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf($i("BuildInfo.packageName",r).toLowerCase()+"://")&&a({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}},t(null,a)}
wu.prototype.hb=function(e){this.ta.push(e),Iu(this).f(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ko("unknown",null,null,null,new Io("no-auth-event")),e(t))})},wu.prototype.cc=function(e){ue(this.ta,function(t){return t==e})}
var ku=function(e){this.i=e,this.h=du()},Ru={name:"pendingRedirect",B:"session"},Au=function(e){return e.h.set(Ru,"pending",e.i)},Du=function(e){return e.h.remove(Ru,e.i)},xu=function(e){return e.h.get(Ru,e.i).then(function(e){return"pending"==e})},Lu=function(e,t,n){this.C=e,this.o=t,this.u=n,this.gc=[],this.qb=!1,this.ed=_(this.td,this),this.Wa=new qu(this),this.Ld=new Yu(this),this.Wb=new ku(this.o+":"+this.u),this.Ha={},this.Ha.unknown=this.Wa,this.Ha.signInViaRedirect=this.Wa,this.Ha.linkViaRedirect=this.Wa,this.Ha.reauthViaRedirect=this.Wa,this.Ha.signInViaPopup=this.Ld,this.Ha.linkViaPopup=this.Ld,this.Ha.reauthViaPopup=this.Ld,this.Z=Mu(this.C,this.o,this.u,Oi)},Mu=function(e,n,r,i){var o=t.SDK_VERSION||null
return Hi()?new wu(e,n,r,o,void 0,void 0,i):new ys(e,n,r,o,i)}
Lu.prototype.reset=function(){this.qb=!1,this.Z.cc(this.ed),this.Z=Mu(this.C,this.o,this.u)},Lu.prototype.Rb=function(){var e=this
this.qb||(this.qb=!0,this.Z.hb(this.ed))
var t=this.Z
return this.Z.Qa().f(function(n){throw e.Z==t&&e.reset(),n})}
var Fu=function(e){e.Z.Se()&&e.Rb().f(function(t){var n=new ko("unknown",null,null,null,new Io("operation-not-supported-in-this-environment"))
Wu(t)&&e.td(n)}),e.Z.we()||Hu(e.Wa)}
Lu.prototype.subscribe=function(e){if(oe(this.gc,e)||this.gc.push(e),!this.qb){var t=this
xu(this.Wb).then(function(e){e?Du(t.Wb).then(function(){t.Rb().f(function(e){var n=new ko("unknown",null,null,null,new Io("operation-not-supported-in-this-environment"))
Wu(e)&&t.td(n)})}):Fu(t)}).f(function(){Fu(t)})}},Lu.prototype.unsubscribe=function(e){ue(this.gc,function(t){return t==e})},Lu.prototype.td=function(e){if(!e)throw new Io("invalid-auth-event")
for(var t=!1,n=0;n<this.gc.length;n++){var r=this.gc[n]
if(r.he(e.ma,e.W)){(t=this.Ha[e.ma])&&t.Me(e,r),t=!0
break}}return Hu(this.Wa),t}
var Uu=new lo(2e3,1e4),ju=new lo(3e4,6e4)
Lu.prototype.getRedirectResult=function(){return this.Wa.getRedirectResult()},Lu.prototype.Zb=function(e,t,n,r,i){var o=this
return this.Z.Zb(e,t,n,function(){o.qb||(o.qb=!0,o.Z.hb(o.ed))},function(){o.reset()},r,i)}
var Wu=function(e){return!(!e||"auth/cordova-not-ready"!=e.code)}
Lu.prototype.$b=function(e,t,n){var r,i=this
return Au(this.Wb).then(function(){return i.Z.$b(e,t,n).f(function(e){if(Wu(e))throw new Io("operation-not-supported-in-this-environment")
return r=e,Du(i.Wb).then(function(){throw r})}).then(function(){return i.Z.We()?new Nn(function(){}):Du(i.Wb).then(function(){return i.getRedirectResult()}).then(function(){}).f(function(){})})})},Lu.prototype.ec=function(e,t,n,r){return this.Z.ec(n,function(n){e.$a(t,null,n,r)},Uu.get())}
var Bu={},Vu=function(e,t,n){var r=t+":"+n
return Bu[r]||(Bu[r]=new Lu(e,t,n)),Bu[r]},qu=function(e){this.h=e,this.zb=null,this.bc=[],this.ac=[],this.wb=null,this.Od=!1}
qu.prototype.reset=function(){this.zb=null,this.wb&&(this.wb.cancel(),this.wb=null)},qu.prototype.Me=function(e,t){if(!e)return Dn(new Io("invalid-auth-event"))
this.reset(),this.Od=!0
var n=e.ma,r=e.W,i=e.getError()&&"auth/web-storage-unsupported"==e.getError().code,o=e.getError()&&"auth/operation-not-supported-in-this-environment"==e.getError().code
return"unknown"!=n||i||o?e=e.ba?this.Md(e,t):t.Mb(n,r)?this.Nd(e,t):Dn(new Io("invalid-auth-event")):(Qu(this,!1,null,null),e=An()),e}
var Hu=function(e){e.Od||(e.Od=!0,Qu(e,!1,null,null))}
qu.prototype.Md=function(e){return Qu(this,!0,null,e.getError()),An()},qu.prototype.Nd=function(e,t){var n=this
t=t.Mb(e.ma,e.W)
var r=e.Db,i=e.uc(),o=!!e.ma.match(/Redirect$/)
return t(r,i).then(function(e){Qu(n,o,e,null)}).f(function(e){Qu(n,o,null,e)})}
var Ku=function(e,t){if(e.zb=function(){return Dn(t)},e.ac.length)for(var n=0;n<e.ac.length;n++)e.ac[n](t)},Gu=function(e,t){if(e.zb=function(){return An(t)},e.bc.length)for(var n=0;n<e.bc.length;n++)e.bc[n](t)},Qu=function(e,t,n,r){t?r?Ku(e,r):Gu(e,n):Gu(e,{user:null}),e.bc=[],e.ac=[]}
qu.prototype.getRedirectResult=function(){var e=this
return new Nn(function(t,n){e.zb?e.zb().then(t,n):(e.bc.push(t),e.ac.push(n),Xu(e))})}
var Xu=function(e){var t=new Io("timeout")
e.wb&&e.wb.cancel(),e.wb=Br(ju.get()).then(function(){e.zb||Qu(e,!0,null,t)})},Yu=function(e){this.h=e}
Yu.prototype.Me=function(e,t){if(!e)return Dn(new Io("invalid-auth-event"))
var n=e.ma,r=e.W
return e.ba?this.Md(e,t):t.Mb(n,r)?this.Nd(e,t):Dn(new Io("invalid-auth-event"))},Yu.prototype.Md=function(e,t){return t.$a(e.ma,null,e.getError(),e.W),An()},Yu.prototype.Nd=function(e,t){var n=e.W,r=e.ma,i=t.Mb(r,n),o=e.Db
return e=e.uc(),i(o,e).then(function(e){t.$a(r,e,null,n)}).f(function(e){t.$a(r,null,e,n)})}
var zu=function(e){this.g=e,this.Ia=this.fa=null,this.Ma=0}
zu.prototype.I=function(){return{apiKey:this.g.o,refreshToken:this.fa,accessToken:this.Ia,expirationTime:this.Ma}}
var $u=function(e,t){var n=t.idToken,r=t.refreshToken
t=Ju(t.expiresIn),e.Ia=n,e.Ma=t,e.fa=r},Ju=function(e){return m()+1e3*parseInt(e,10)},Zu=function(e,t){return va(e.g,t).then(function(t){return e.Ia=t.access_token,e.Ma=Ju(t.expires_in),e.fa=t.refresh_token,{accessToken:e.Ia,expirationTime:e.Ma,refreshToken:e.fa}}).f(function(t){throw"auth/user-token-expired"==t.code&&(e.fa=null),t})}
zu.prototype.getToken=function(e){return e=!!e,this.Ia&&!this.fa?Dn(new Io("user-token-expired")):e||!this.Ia||m()>this.Ma-3e4?this.fa?Zu(this,{grant_type:"refresh_token",refresh_token:this.fa}):An(null):An({accessToken:this.Ia,expirationTime:this.Ma,refreshToken:this.fa})}
var ec=function(e,t,n,r,i,o){go(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})},tc=function(e,t){st.call(this,e)
for(var n in t)this[n]=t[n]}
b(tc,st)
var nc=function(e,n,r){this.K=[],this.o=e.apiKey,this.u=e.appName,this.C=e.authDomain||null,e=t.SDK_VERSION?Yi(t.SDK_VERSION):null,this.g=new oa(this.o,Ri(Oi),e),this.ra=new zu(this.g),uc(this,n.idToken),$u(this.ra,n),_o(this,"refreshToken",this.ra.fa),pc(this,r||{}),Ir.call(this),this.Lc=!1,this.C&&Zi()&&(this.v=Vu(this.C,this.o,this.u)),this.Rc=[],this.sa=null,this.ub=oc(this),this.Fb=_(this.ud,this)
var i=this
this.ia=null,this.Ie=function(e){i.Bb(e.Tf)},this.Ad=null}
b(nc,Ir),nc.prototype.Bb=function(e){this.ia=e,la(this.g,e)}
var rc=function(e,t){e.Ad&&St(e.Ad,"languageCodeChanged",e.Ie),(e.Ad=t)&&mt(t,"languageCodeChanged",e.Ie)}
nc.prototype.ud=function(){this.ub.sb&&(this.ub.stop(),this.ub.start())}
var ic=function(e){try{return t.app(e.u).auth()}catch(t){throw new Io("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.u+"'!")}},oc=function(e){return new eu(function(){return e.getIdToken(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.ra.Ma-m()-3e5
return 0<t?t:0},3e4,96e4,!1)},ac=function(e){e.Jb||e.ub.sb||(e.ub.start(),St(e,"tokenChanged",e.Fb),mt(e,"tokenChanged",e.Fb))},sc=function(e){St(e,"tokenChanged",e.Fb),e.ub.stop()},uc=function(e,t){e.De=t,_o(e,"_lat",t)},cc=function(e,t){ue(e.Rc,function(e){return e==t})},lc=function(e){for(var t=[],n=0;n<e.Rc.length;n++)t.push(e.Rc[n](e))
return Mn(t).then(function(){return e})},hc=function(e){e.v&&!e.Lc&&(e.Lc=!0,e.v.subscribe(e))},pc=function(e,t){go(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,providerData:[]})}
_o(nc.prototype,"providerId","firebase")
var dc=function(){},fc=function(e){return An().then(function(){if(e.Jb)throw new Io("app-deleted")})},vc=function(e){return ne(e.providerData,function(e){return e.providerId})},yc=function(e,t){t&&(_c(e,t.providerId),e.providerData.push(t))},_c=function(e,t){ue(e.providerData,function(e){return e.providerId==t})},gc=function(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&_o(e,t,n)}
nc.prototype.copy=function(e){var t=this
t!=e&&(go(this,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),ee(e.providerData,function(e){yc(t,e)}),this.ra=e.ra,_o(this,"refreshToken",this.ra.fa))},nc.prototype.reload=function(){var e=this
return this.c(fc(this).then(function(){return mc(e).then(function(){return lc(e)}).then(dc)}))}
var mc=function(e){return e.getIdToken().then(function(t){var n=e.isAnonymous
return Ec(e,t).then(function(){return n||gc(e,"isAnonymous",!1),t})})}
nc.prototype.getIdToken=function(e){var t=this
return this.c(fc(this).then(function(){return t.ra.getToken(e)}).then(function(e){if(!e)throw new Io("internal-error")
return e.accessToken!=t.De&&(uc(t,e.accessToken),t.Sa()),gc(t,"refreshToken",e.refreshToken),e.accessToken}))},nc.prototype.getToken=function(e){return vo["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(vo["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.getIdToken(e)}
var bc=function(e,t){t.idToken&&e.De!=t.idToken&&($u(e.ra,t),e.Sa(),uc(e,t.idToken),gc(e,"refreshToken",e.ra.fa))}
nc.prototype.Sa=function(){this.dispatchEvent(new tc("tokenChanged"))}
var Ec=function(e,t){return ts(e.g,Fa,{idToken:t}).then(_(e.cg,e))}
nc.prototype.cg=function(e){if(!(e=e.users)||!e.length)throw new Io("internal-error")
e=e[0],pc(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber})
for(var t=wc(e),n=0;n<t.length;n++)yc(this,t[n])
gc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))}
var wc=function(e){return(e=e.providerUserInfo)&&e.length?ne(e,function(e){return new ec(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}
nc.prototype.reauthenticateAndRetrieveDataWithCredential=function(e){var t=this,n=null
return this.c(e.Dd(this.g,this.uid).then(function(e){return bc(t,e),n=Cc(t,e,"reauthenticate"),t.sa=null,t.reload()}).then(function(){return n}),!0)},nc.prototype.reauthenticateWithCredential=function(e){return this.reauthenticateAndRetrieveDataWithCredential(e).then(function(){})}
var Sc=function(e,t){return mc(e).then(function(){if(oe(vc(e),t))return lc(e).then(function(){throw new Io("provider-already-linked")})})}
nc.prototype.linkAndRetrieveDataWithCredential=function(e){var t=this,n=null
return this.c(Sc(this,e.providerId).then(function(){return t.getIdToken()}).then(function(n){return e.Gc(t.g,n)}).then(function(e){return n=Cc(t,e,"link"),Tc(t,e)}).then(function(){return n}))},nc.prototype.linkWithCredential=function(e){return this.linkAndRetrieveDataWithCredential(e).then(function(e){return e.user})},nc.prototype.linkWithPhoneNumber=function(e,t){var n=this
return this.c(Sc(this,"phone").then(function(){return Js(ic(n),e,t,_(n.linkAndRetrieveDataWithCredential,n))}))},nc.prototype.reauthenticateWithPhoneNumber=function(e,t){var n=this
return this.c(An().then(function(){return Js(ic(n),e,t,_(n.reauthenticateAndRetrieveDataWithCredential,n))}),!0)}
var Cc=function(e,t,n){var r=Zo(t)
return t=ru(t),mo({user:e,credential:r,additionalUserInfo:t,operationType:n})},Tc=function(e,t){return bc(e,t),e.reload().then(function(){return e})}
e=nc.prototype,e.updateEmail=function(e){var t=this
return this.c(this.getIdToken().then(function(n){return t.g.updateEmail(n,e)}).then(function(e){return bc(t,e),t.reload()}))},e.updatePhoneNumber=function(e){var t=this
return this.c(this.getIdToken().then(function(n){return e.Gc(t.g,n)}).then(function(e){return bc(t,e),t.reload()}))},e.updatePassword=function(e){var t=this
return this.c(this.getIdToken().then(function(n){return t.g.updatePassword(n,e)}).then(function(e){return bc(t,e),t.reload()}))},e.updateProfile=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return fc(this)
var t=this
return this.c(this.getIdToken().then(function(n){return t.g.updateProfile(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return bc(t,e),gc(t,"displayName",e.displayName||null),gc(t,"photoURL",e.photoUrl||null),ee(t.providerData,function(e){"password"===e.providerId&&(_o(e,"displayName",t.displayName),_o(e,"photoURL",t.photoURL))}),lc(t)}).then(dc))},e.unlink=function(e){var t=this
return this.c(mc(this).then(function(n){return oe(vc(t),e)?Ca(t.g,n,[e]).then(function(e){var n={}
return ee(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),ee(vc(t),function(e){n[e]||_c(t,e)}),n[$o.PROVIDER_ID]||_o(t,"phoneNumber",null),lc(t)}):lc(t).then(function(){throw new Io("no-such-provider")})}))},e.delete=function(){var e=this
return this.c(this.getIdToken().then(function(t){return ts(e.g,La,{idToken:t})}).then(function(){e.dispatchEvent(new tc("userDeleted"))})).then(function(){for(var t=0;t<e.K.length;t++)e.K[t].cancel("app-deleted")
rc(e,null),e.K=[],e.Jb=!0,sc(e),_o(e,"refreshToken",null),e.v&&e.v.unsubscribe(e)})},e.he=function(e,t){return!!("linkViaPopup"==e&&(this.la||null)==t&&this.ka||"reauthViaPopup"==e&&(this.la||null)==t&&this.ka||"linkViaRedirect"==e&&(this.Ga||null)==t||"reauthViaRedirect"==e&&(this.Ga||null)==t)},e.$a=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.la||null)||(n&&this.Ua?this.Ua(n):t&&!n&&this.ka&&this.ka(t),this.M&&(this.M.cancel(),this.M=null),delete this.ka,delete this.Ua)},e.Mb=function(e,t){return"linkViaPopup"==e&&t==(this.la||null)?_(this.qe,this):"reauthViaPopup"==e&&t==(this.la||null)?_(this.re,this):"linkViaRedirect"==e&&(this.Ga||null)==t?_(this.qe,this):"reauthViaRedirect"==e&&(this.Ga||null)==t?_(this.re,this):null},e.tc=function(){return ao(this.uid+":::")},e.linkWithPopup=function(e){var t=this
return Pc(this,"linkViaPopup",e,function(){return Sc(t,e.providerId).then(function(){return lc(t)})},!1)},e.reauthenticateWithPopup=function(e){return Pc(this,"reauthViaPopup",e,function(){return An()},!0)}
var Pc=function(e,n,r,i,o){if(!Zi())return Dn(new Io("operation-not-supported-in-this-environment"))
if(e.sa&&!o)return Dn(e.sa)
var a=Po(r.providerId),s=e.tc(),u=null;(!no()||Ki())&&e.C&&r.isOAuthProvider&&(u=gs(e.C,e.o,e.u,n,r,null,s,t.SDK_VERSION||null))
var c=ji(u,a&&a.Yb,a&&a.Xb)
return i=i().then(function(){if(Nc(e),!o)return e.getIdToken().then(function(){})}).then(function(){return e.v.Zb(c,n,r,s,!!u)}).then(function(){return new Nn(function(t,r){e.$a(n,null,new Io("cancelled-popup-request"),e.la||null),e.ka=t,e.Ua=r,e.la=s,e.M=e.v.ec(e,n,c,s)})}).then(function(e){return c&&Ui(c),e?mo(e):null}).f(function(e){throw c&&Ui(c),e}),e.c(i,o)}
nc.prototype.linkWithRedirect=function(e){var t=this
return Ic(this,"linkViaRedirect",e,function(){return Sc(t,e.providerId)},!1)},nc.prototype.reauthenticateWithRedirect=function(e){return Ic(this,"reauthViaRedirect",e,function(){return An()},!0)}
var Ic=function(e,t,n,r,i){if(!Zi())return Dn(new Io("operation-not-supported-in-this-environment"))
if(e.sa&&!i)return Dn(e.sa)
var o=null,a=e.tc()
return r=r().then(function(){if(Nc(e),!i)return e.getIdToken().then(function(){})}).then(function(){return e.Ga=a,lc(e)}).then(function(t){return e.Xa&&(t=e.Xa,t=t.h.set(Dc,e.I(),t.i)),t}).then(function(){return e.v.$b(t,n,a)}).f(function(t){if(o=t,e.Xa)return xc(e.Xa)
throw o}).then(function(){if(o)throw o}),e.c(r,i)},Nc=function(e){if(!e.v||!e.Lc){if(e.v&&!e.Lc)throw new Io("internal-error")
throw new Io("auth-domain-config-required")}}
nc.prototype.qe=function(e,t){var n=this
this.M&&(this.M.cancel(),this.M=null)
var r=null,i=this.getIdToken().then(function(r){return Na(n.g,{requestUri:e,sessionId:t,idToken:r})}).then(function(e){return r=Cc(n,e,"link"),Tc(n,e)}).then(function(){return r})
return this.c(i)},nc.prototype.re=function(e,t){var n=this
this.M&&(this.M.cancel(),this.M=null)
var r=null,i=An().then(function(){return xo(Oa(n.g,{requestUri:e,sessionId:t}),n.uid)}).then(function(e){return r=Cc(n,e,"reauthenticate"),bc(n,e),n.sa=null,n.reload()}).then(function(){return r})
return this.c(i,!0)},nc.prototype.sendEmailVerification=function(e){var t=this,n=null
return this.c(this.getIdToken().then(function(t){return n=t,void 0===e||me(e)?{}:zs(new Ys(e))}).then(function(e){return t.g.sendEmailVerification(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},nc.prototype.c=function(e,t){var n=this,r=Oc(this,e,t)
return this.K.push(r),Fn(r,function(){ae(n.K,r)}),r}
var Oc=function(e,t,n){return e.sa&&!n?(t.cancel(),Dn(e.sa)):t.f(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.sa||e.dispatchEvent(new tc("userInvalidated")),e.sa=t),t})}
nc.prototype.toJSON=function(){return this.I()},nc.prototype.I=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.o,appName:this.u,authDomain:this.C,stsTokenManager:this.ra.I(),redirectEventId:this.Ga||null}
return ee(this.providerData,function(t){e.providerData.push(bo(t))}),e}
var kc=function(e){if(!e.apiKey)return null
var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={}
if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null
n.idToken=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-m())/1e3
var r=new nc(t,n,e)
return e.providerData&&ee(e.providerData,function(e){e&&yc(r,mo(e))}),e.redirectEventId&&(r.Ga=e.redirectEventId),r},Rc=function(e,t,n){var r=new nc(e,t)
return n&&(r.Xa=n),r.reload().then(function(){return r})},Ac=function(e){this.i=e,this.h=du()},Dc={name:"redirectUser",B:"session"},xc=function(e){return e.h.remove(Dc,e.i)},Lc=function(e,t){return e.h.get(Dc,e.i).then(function(e){return e&&t&&(e.authDomain=t),kc(e||{})})},Mc=function(e,t){this.i=e,this.h=t||du(),this.N=null,this.Gd=this.yd(),this.h.addListener(jc("local"),this.i,_(this.sg,this))}
Mc.prototype.sg=function(){var e=this,t=jc("local")
Hc(this,function(){return An().then(function(){return e.N&&"local"!=e.N.B?e.h.get(t,e.i):null}).then(function(n){if(n)return Fc(e,"local").then(function(){e.N=t})})})}
var Fc=function(e,t){var n,r=[]
for(n in lu)lu[n]!==t&&r.push(e.h.remove(jc(lu[n]),e.i))
return r.push(e.h.remove(Uc,e.i)),Ln(r)}
Mc.prototype.yd=function(){var e=this,t=jc("local"),n=jc("session"),r=jc("none")
return this.h.get(n,this.i).then(function(i){return i?n:e.h.get(r,e.i).then(function(n){return n?r:e.h.get(t,e.i).then(function(n){return n?t:e.h.get(Uc,e.i).then(function(e){return e?jc(e):t})})})}).then(function(t){return e.N=t,Fc(e,t.B)}).f(function(){e.N||(e.N=t)})}
var Uc={name:"persistence",B:"session"},jc=function(e){return{name:"authUser",B:e}}
Mc.prototype.setPersistence=function(e){var t=null,n=this
return hu(e),Hc(this,function(){return e!=n.N.B?n.h.get(n.N,n.i).then(function(r){return t=r,Fc(n,e)}).then(function(){if(n.N=jc(e),t)return n.h.set(n.N,t,n.i)}):An()})}
var Wc=function(e){return Hc(e,function(){return e.h.set(Uc,e.N.B,e.i)})},Bc=function(e,t){return Hc(e,function(){return e.h.set(e.N,t.I(),e.i)})},Vc=function(e){return Hc(e,function(){return e.h.remove(e.N,e.i)})},qc=function(e,t){return Hc(e,function(){return e.h.get(e.N,e.i).then(function(e){return e&&t&&(e.authDomain=t),kc(e||{})})})},Hc=function(e,t){return e.Gd=e.Gd.then(t,t),e.Gd},Kc=function(e){if(this.Da=!1,_o(this,"app",e),!this.j().options||!this.j().options.apiKey)throw new Io("invalid-api-key")
e=t.SDK_VERSION?Yi(t.SDK_VERSION):null,this.g=new oa(this.j().options&&this.j().options.apiKey,Ri(Oi),e),this.K=[],this.Ja=[],this.Eb=[],this.Zf=t.INTERNAL.createSubscribe(_(this.Nf,this)),this.kc=void 0,this.ag=t.INTERNAL.createSubscribe(_(this.Pf,this)),$c(this,null),e=this.j().options.apiKey
var n=this.j().name
this.na=new Mc(e+":"+n),e=this.j().options.apiKey,n=this.j().name,this.xb=new Ac(e+":"+n),this.oc=this.c(Zc(this)),this.ya=this.c(el(this)),this.Dc=!1,this.sd=_(this.tg,this),this.Ze=_(this.nb,this),this.Fb=_(this.ud,this),this.Xe=_(this.If,this),this.Ye=_(this.Jf,this),Yc(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.Na=0,Ir.call(this),Qc(this)}
b(Kc,Ir)
var Gc=function(e){st.call(this,"languageCodeChanged"),this.Tf=e}
b(Gc,st),Kc.prototype.setPersistence=function(e){return e=this.na.setPersistence(e),this.c(e)},Kc.prototype.Bb=function(e){this.ia===e||this.Da||(this.ia=e,la(this.g,this.ia),this.dispatchEvent(new Gc(this.ia)))},Kc.prototype.zg=function(){var e=r.navigator
this.Bb(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)}
var Qc=function(e){Object.defineProperty(e,"lc",{get:function(){return this.ia},set:function(e){this.Bb(e)},enumerable:!1}),e.ia=null}
Kc.prototype.toJSON=function(){return{apiKey:this.j().options.apiKey,authDomain:this.j().options.authDomain,appName:this.j().name,currentUser:nl(this)&&nl(this).I()}}
var Xc=function(e){return e.uf||Dn(new Io("auth-domain-config-required"))},Yc=function(e){var t=e.j().options.authDomain,n=e.j().options.apiKey
t&&Zi()&&(e.uf=e.oc.then(function(){if(!e.Da){if(e.v=Vu(t,n,e.j().name),e.v.subscribe(e),nl(e)&&hc(nl(e)),e.yb){hc(e.yb)
var r=e.yb
r.Bb(e.ia),rc(r,e),e.yb=null}return e.v}}))}
e=Kc.prototype,e.he=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0
case"signInViaPopup":return this.la==t&&!!this.ka
default:return!1}},e.$a=function(e,t,n,r){"signInViaPopup"==e&&this.la==r&&(n&&this.Ua?this.Ua(n):t&&!n&&this.ka&&this.ka(t),this.M&&(this.M.cancel(),this.M=null),delete this.ka,delete this.Ua)},e.Mb=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.la==t&&this.ka?_(this.wf,this):null},e.wf=function(e,t){var n=this
e={requestUri:e,sessionId:t},this.M&&(this.M.cancel(),this.M=null)
var r=null,i=null,o=Ia(n.g,e).then(function(e){return r=Zo(e),i=ru(e),e})
return e=n.oc.then(function(){return o}).then(function(e){return zc(n,e)}).then(function(){return mo({user:nl(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}),this.c(e)},e.tc=function(){return ao()},e.signInWithPopup=function(e){if(!Zi())return Dn(new Io("operation-not-supported-in-this-environment"))
var n=this,r=Po(e.providerId),i=this.tc(),o=null;(!no()||Ki())&&this.j().options.authDomain&&e.isOAuthProvider&&(o=gs(this.j().options.authDomain,this.j().options.apiKey,this.j().name,"signInViaPopup",e,null,i,t.SDK_VERSION||null))
var a=ji(o,r&&r.Yb,r&&r.Xb)
return r=Xc(this).then(function(t){return t.Zb(a,"signInViaPopup",e,i,!!o)}).then(function(){return new Nn(function(e,t){n.$a("signInViaPopup",null,new Io("cancelled-popup-request"),n.la),n.ka=e,n.Ua=t,n.la=i,n.M=n.v.ec(n,"signInViaPopup",a,i)})}).then(function(e){return a&&Ui(a),e?mo(e):null}).f(function(e){throw a&&Ui(a),e}),this.c(r)},e.signInWithRedirect=function(e){if(!Zi())return Dn(new Io("operation-not-supported-in-this-environment"))
var t=this,n=Xc(this).then(function(){return Wc(t.na)}).then(function(){return t.v.$b("signInViaRedirect",e)})
return this.c(n)},e.getRedirectResult=function(){if(!Zi())return Dn(new Io("operation-not-supported-in-this-environment"))
var e=this,t=Xc(this).then(function(){return e.v.getRedirectResult()}).then(function(e){return e?mo(e):null})
return this.c(t)}
var zc=function(e,t){var n={}
return n.apiKey=e.j().options.apiKey,n.authDomain=e.j().options.authDomain,n.appName=e.j().name,e.oc.then(function(){return Rc(n,t,e.xb)}).then(function(t){return nl(e)&&t.uid==nl(e).uid?(nl(e).copy(t),e.nb(t)):($c(e,t),hc(t),e.nb(t))}).then(function(){e.Sa()})},$c=function(e,t){nl(e)&&(cc(nl(e),e.Ze),St(nl(e),"tokenChanged",e.Fb),St(nl(e),"userDeleted",e.Xe),St(nl(e),"userInvalidated",e.Ye),sc(nl(e))),t&&(t.Rc.push(e.Ze),mt(t,"tokenChanged",e.Fb),mt(t,"userDeleted",e.Xe),mt(t,"userInvalidated",e.Ye),0<e.Na&&ac(t)),_o(e,"currentUser",t),t&&(t.Bb(e.ia),rc(t,e))}
Kc.prototype.signOut=function(){var e=this,t=this.ya.then(function(){return nl(e)?($c(e,null),Vc(e.na).then(function(){e.Sa()})):An()})
return this.c(t)}
var Jc=function(e){var t=e.j().options.authDomain
return t=Lc(e.xb,t).then(function(t){return(e.yb=t)&&(t.Xa=e.xb),xc(e.xb)}),e.c(t)},Zc=function(e){var t=e.j().options.authDomain,n=Jc(e).then(function(){return qc(e.na,t)}).then(function(t){return t?(t.Xa=e.xb,e.yb&&(e.yb.Ga||null)==(t.Ga||null)?t:t.reload().then(function(){return Bc(e.na,t).then(function(){return t})}).f(function(n){return"auth/network-request-failed"==n.code?t:Vc(e.na)})):null}).then(function(t){$c(e,t||null)})
return e.c(n)},el=function(e){return e.oc.then(function(){return e.getRedirectResult()}).f(function(){}).then(function(){if(!e.Da)return e.sd()}).f(function(){}).then(function(){if(!e.Da){e.Dc=!0
var t=e.na
t.h.addListener(jc("local"),t.i,e.sd)}})}
e=Kc.prototype,e.tg=function(){var e=this,t=this.j().options.authDomain
return qc(this.na,t).then(function(t){if(!e.Da){var n
if(n=nl(e)&&t){n=nl(e).uid
var r=t.uid
n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return nl(e).copy(t),nl(e).getIdToken();(nl(e)||t)&&($c(e,t),t&&(hc(t),t.Xa=e.xb),e.v&&e.v.subscribe(e),e.Sa())}})},e.nb=function(e){return Bc(this.na,e)},e.ud=function(){this.Sa(),this.nb(nl(this))},e.If=function(){this.signOut()},e.Jf=function(){this.signOut()}
var tl=function(e,t){var n=null,r=null
return e.c(t.then(function(t){return n=Zo(t),r=ru(t),zc(e,t)}).then(function(){return mo({user:nl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}
e=Kc.prototype,e.Nf=function(e){var t=this
this.addAuthTokenListener(function(){e.next(nl(t))})},e.Pf=function(e){var t=this
il(this,function(){e.next(nl(t))})},e.onIdTokenChanged=function(e,n,r){var i=this
return this.Dc&&t.Promise.resolve().then(function(){d(e)?e(nl(i)):d(e.next)&&e.next(nl(i))}),this.Zf(e,n,r)},e.onAuthStateChanged=function(e,n,r){var i=this
return this.Dc&&t.Promise.resolve().then(function(){i.kc=i.getUid(),d(e)?e(nl(i)):d(e.next)&&e.next(nl(i))}),this.ag(e,n,r)},e.Cf=function(e){var t=this,n=this.ya.then(function(){return nl(t)?nl(t).getIdToken(e).then(function(e){return{accessToken:e}}):null})
return this.c(n)},e.signInWithCustomToken=function(e){var t=this
return this.ya.then(function(){return tl(t,ts(t.g,za,{token:e}))}).then(function(e){return e=e.user,gc(e,"isAnonymous",!1),t.nb(e)}).then(function(){return nl(t)})},e.signInWithEmailAndPassword=function(e,t){var n=this
return this.ya.then(function(){return tl(n,ts(n.g,$a,{email:e,password:t}))}).then(function(e){return e.user})},e.createUserWithEmailAndPassword=function(e,t){var n=this
return this.ya.then(function(){return tl(n,ts(n.g,Da,{email:e,password:t}))}).then(function(e){return e.user})},e.signInWithCredential=function(e){return this.signInAndRetrieveDataWithCredential(e).then(function(e){return e.user})},e.signInAndRetrieveDataWithCredential=function(e){var t=this
return this.ya.then(function(){return tl(t,e.Nb(t.g))})},e.signInAnonymously=function(){var e=this
return this.ya.then(function(){var t=nl(e)
return t&&t.isAnonymous?t:tl(e,e.g.signInAnonymously()).then(function(t){return t=t.user,gc(t,"isAnonymous",!0),e.nb(t)}).then(function(){return nl(e)})})},e.j=function(){return this.app}
var nl=function(e){return e.currentUser}
Kc.prototype.getUid=function(){return nl(this)&&nl(this).uid||null}
var rl=function(e){return nl(e)&&nl(e)._lat||null}
e=Kc.prototype,e.Sa=function(){if(this.Dc){for(var e=0;e<this.Ja.length;e++)this.Ja[e]&&this.Ja[e](rl(this))
if(this.kc!==this.getUid()&&this.Eb.length)for(this.kc=this.getUid(),e=0;e<this.Eb.length;e++)this.Eb[e]&&this.Eb[e](rl(this))}},e.hf=function(e){this.addAuthTokenListener(e),0<++this.Na&&nl(this)&&ac(nl(this))},e.gg=function(e){var t=this
ee(this.Ja,function(n){n==e&&t.Na--}),0>this.Na&&(this.Na=0),0==this.Na&&nl(this)&&sc(nl(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this
this.Ja.push(e),this.c(this.ya.then(function(){t.Da||oe(t.Ja,e)&&e(rl(t))}))},e.removeAuthTokenListener=function(e){ue(this.Ja,function(t){return t==e})}
var il=function(e,t){e.Eb.push(t),e.c(e.ya.then(function(){!e.Da&&oe(e.Eb,t)&&e.kc!==e.getUid()&&(e.kc=e.getUid(),t(rl(e)))}))}
e=Kc.prototype,e.delete=function(){this.Da=!0
for(var e=0;e<this.K.length;e++)this.K[e].cancel("app-deleted")
return this.K=[],this.na&&(e=this.na,e.h.removeListener(jc("local"),e.i,this.sd)),this.v&&this.v.unsubscribe(this),t.Promise.resolve()},e.c=function(e){var t=this
return this.K.push(e),Fn(e,function(){ae(t.K,e)}),e},e.fetchProvidersForEmail=function(e){return this.c(ma(this.g,e))},e.verifyPasswordResetCode=function(e){return this.checkActionCode(e).then(function(e){return e.data.email})},e.confirmPasswordReset=function(e,t){return this.c(this.g.confirmPasswordReset(e,t).then(function(){}))},e.checkActionCode=function(e){return this.c(this.g.checkActionCode(e).then(function(e){return new Zs(e)}))},e.applyActionCode=function(e){return this.c(this.g.applyActionCode(e).then(function(){}))},e.sendPasswordResetEmail=function(e,t){var n=this
return this.c(An().then(function(){return void 0===t||me(t)?{}:zs(new Ys(t))}).then(function(t){return n.g.sendPasswordResetEmail(e,t)}).then(function(){}))},e.signInWithPhoneNumber=function(e,t){return this.c(Js(this,e,t,_(this.signInAndRetrieveDataWithCredential,this)))}
var ol=function(e,t,n,r){e:{n=Array.prototype.slice.call(n)
for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0
else{if(o)throw new Io("internal-error","Argument validator encountered a required argument after an optional argument.")
i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+"."
else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].T(n[i])&&!o){if(t=t[i],0>i||i>=al.length)throw new Io("internal-error","Argument validator received an unsupported number of arguments.")
n=al[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.S+"."
break e}r=null}}if(r)throw new Io("argument-error",e+" failed: "+r)},al="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),sl=function(e,t){return{name:e||"",S:"a valid string",optional:!!t,T:o}},ul=function(){return{name:"opt_forceRefresh",S:"a boolean",optional:!0,T:a}},cl=function(e,t){return{name:e||"",S:"a valid object",optional:!!t,T:f}},ll=function(e,t){return{name:e||"",S:"a function",optional:!!t,T:d}},hl=function(e,t){return{name:e||"",S:"null",optional:!!t,T:l}},pl=function(){return{name:"",S:"an HTML element",optional:!1,T:function(e){return!!(e&&e instanceof Element)}}},dl=function(){return{name:"auth",S:"an instance of Firebase Auth",optional:!0,T:function(e){return!!(e&&e instanceof Kc)}}},fl=function(){return{name:"app",S:"an instance of Firebase App",optional:!0,T:function(e){return!!(e&&e instanceof t.app.App)}}},vl=function(e){return{name:e?e+"Credential":"credential",S:e?"a valid "+e+" credential":"a valid credential",optional:!1,T:function(t){if(!t)return!1
var n=!e||t.providerId===e
return!(!t.Nb||!n)}}},yl=function(){return{name:"authProvider",S:"a valid Auth provider",optional:!1,T:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}},_l=function(){return{name:"applicationVerifier",S:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,T:function(e){return!!(e&&o(e.type)&&d(e.verify))}}},gl=function(e,t,n,r){return{name:n||"",S:e.S+" or "+t.S,optional:!!r,T:function(n){return e.T(n)||t.T(n)}}},ml=function(e,t){for(var n in t){var r=t[n].name
e[r]=El(r,e[n],t[n].a)}},bl=function(e,t,n,r){e[t]=El(t,n,r)},El=function(e,t,n){if(!n)return t
var r=wl(e)
e=function(){var e=Array.prototype.slice.call(arguments)
return ol(r,n,e),t.apply(this,e)}
for(var i in t)e[i]=t[i]
for(i in t.prototype)e.prototype[i]=t.prototype[i]
return e},wl=function(e){return e=e.split("."),e[e.length-1]}
ml(Kc.prototype,{applyActionCode:{name:"applyActionCode",a:[sl("code")]},checkActionCode:{name:"checkActionCode",a:[sl("code")]},confirmPasswordReset:{name:"confirmPasswordReset",a:[sl("code"),sl("newPassword")]},createUserWithEmailAndPassword:{name:"createUserWithEmailAndPassword",a:[sl("email"),sl("password")]},fetchProvidersForEmail:{name:"fetchProvidersForEmail",a:[sl("email")]},getRedirectResult:{name:"getRedirectResult",a:[]},onAuthStateChanged:{name:"onAuthStateChanged",a:[gl(cl(),ll(),"nextOrObserver"),ll("opt_error",!0),ll("opt_completed",!0)]},onIdTokenChanged:{name:"onIdTokenChanged",a:[gl(cl(),ll(),"nextOrObserver"),ll("opt_error",!0),ll("opt_completed",!0)]},sendPasswordResetEmail:{name:"sendPasswordResetEmail",a:[sl("email"),gl(cl("opt_actionCodeSettings",!0),hl(null,!0),"opt_actionCodeSettings",!0)]},setPersistence:{name:"setPersistence",a:[sl("persistence")]},signInAndRetrieveDataWithCredential:{name:"signInAndRetrieveDataWithCredential",a:[vl()]},signInAnonymously:{name:"signInAnonymously",a:[]},signInWithCredential:{name:"signInWithCredential",a:[vl()]},signInWithCustomToken:{name:"signInWithCustomToken",a:[sl("token")]},signInWithEmailAndPassword:{name:"signInWithEmailAndPassword",a:[sl("email"),sl("password")]},signInWithPhoneNumber:{name:"signInWithPhoneNumber",a:[sl("phoneNumber"),_l()]},signInWithPopup:{name:"signInWithPopup",a:[yl()]},signInWithRedirect:{name:"signInWithRedirect",a:[yl()]},signOut:{name:"signOut",a:[]},toJSON:{name:"toJSON",a:[sl(null,!0)]},zg:{name:"useDeviceLanguage",a:[]},verifyPasswordResetCode:{name:"verifyPasswordResetCode",a:[sl("code")]}}),function(e,t){for(var n in t){var r=t[n].name
if(r!==n){var i=t[n].kf
Object.defineProperty(e,r,{get:function(){return this[n]},set:function(e){ol(r,[i],[e],!0),this[n]=e},enumerable:!0})}}}(Kc.prototype,{lc:{name:"languageCode",kf:gl(sl(),hl(),"languageCode")}}),Kc.Persistence=lu,Kc.Persistence.LOCAL="local",Kc.Persistence.SESSION="session",Kc.Persistence.NONE="none",ml(nc.prototype,{delete:{name:"delete",a:[]},getIdToken:{name:"getIdToken",a:[ul()]},getToken:{name:"getToken",a:[ul()]},linkAndRetrieveDataWithCredential:{name:"linkAndRetrieveDataWithCredential",a:[vl()]},linkWithCredential:{name:"linkWithCredential",a:[vl()]},linkWithPhoneNumber:{name:"linkWithPhoneNumber",a:[sl("phoneNumber"),_l()]},linkWithPopup:{name:"linkWithPopup",a:[yl()]},linkWithRedirect:{name:"linkWithRedirect",a:[yl()]},reauthenticateAndRetrieveDataWithCredential:{name:"reauthenticateAndRetrieveDataWithCredential",a:[vl()]},reauthenticateWithCredential:{name:"reauthenticateWithCredential",a:[vl()]},reauthenticateWithPhoneNumber:{name:"reauthenticateWithPhoneNumber",a:[sl("phoneNumber"),_l()]},reauthenticateWithPopup:{name:"reauthenticateWithPopup",a:[yl()]},reauthenticateWithRedirect:{name:"reauthenticateWithRedirect",a:[yl()]},reload:{name:"reload",a:[]},sendEmailVerification:{name:"sendEmailVerification",a:[gl(cl("opt_actionCodeSettings",!0),hl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",a:[sl(null,!0)]},unlink:{name:"unlink",a:[sl("provider")]},updateEmail:{name:"updateEmail",a:[sl("email")]},updatePassword:{name:"updatePassword",a:[sl("password")]},updatePhoneNumber:{name:"updatePhoneNumber",a:[vl("phone")]},updateProfile:{name:"updateProfile",a:[cl("profile")]}}),ml(Nn.prototype,{f:{name:"catch"},then:{name:"then"}}),ml($s.prototype,{confirm:{name:"confirm",a:[sl("verificationCode")]}}),bl(Xo,"credential",function(e,t){return new Qo(e,t)},[sl("email"),sl("password")]),ml(jo.prototype,{addScope:{name:"addScope",a:[sl("scope")]},setCustomParameters:{name:"setCustomParameters",a:[cl("customOAuthParameters")]}}),bl(jo,"credential",Wo,[gl(sl(),cl(),"token")]),ml(Bo.prototype,{addScope:{name:"addScope",a:[sl("scope")]},setCustomParameters:{name:"setCustomParameters",a:[cl("customOAuthParameters")]}}),bl(Bo,"credential",Vo,[gl(sl(),cl(),"token")]),ml(qo.prototype,{addScope:{name:"addScope",a:[sl("scope")]},setCustomParameters:{name:"setCustomParameters",a:[cl("customOAuthParameters")]}}),bl(qo,"credential",Ho,[gl(sl(),gl(cl(),hl()),"idToken"),gl(sl(),hl(),"accessToken",!0)]),ml(Ko.prototype,{setCustomParameters:{name:"setCustomParameters",a:[cl("customOAuthParameters")]}}),bl(Ko,"credential",Go,[gl(sl(),cl(),"token"),sl("secret",!0)]),ml(Uo.prototype,{addScope:{name:"addScope",a:[sl("scope")]},credential:{name:"credential",a:[gl(sl(),hl(),"idToken",!0),gl(sl(),hl(),"accessToken",!0)]},setCustomParameters:{name:"setCustomParameters",a:[cl("customOAuthParameters")]}}),bl($o,"credential",Jo,[sl("verificationId"),sl("verificationCode")]),ml($o.prototype,{verifyPhoneNumber:{name:"verifyPhoneNumber",a:[sl("phoneNumber"),_l()]}}),ml(Io.prototype,{toJSON:{name:"toJSON",a:[sl(null,!0)]}}),ml(ta.prototype,{toJSON:{name:"toJSON",a:[sl(null,!0)]}}),ml(Ao.prototype,{toJSON:{name:"toJSON",a:[sl(null,!0)]}}),ml(Os.prototype,{clear:{name:"clear",a:[]},render:{name:"render",a:[]},verify:{name:"verify",a:[]}}),function(){if(void 0===t||!t.INTERNAL||!t.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")
var e={Auth:Kc,Error:Io}
bl(e,"EmailAuthProvider",Xo,[]),bl(e,"FacebookAuthProvider",jo,[]),bl(e,"GithubAuthProvider",Bo,[]),bl(e,"GoogleAuthProvider",qo,[]),bl(e,"TwitterAuthProvider",Ko,[]),bl(e,"OAuthProvider",Uo,[sl("providerId")]),bl(e,"PhoneAuthProvider",$o,[dl()]),bl(e,"RecaptchaVerifier",Os,[gl(sl(),pl(),"recaptchaContainer"),cl("recaptchaParameters",!0),fl()]),t.INTERNAL.registerService("auth",function(e,t){return e=new Kc(e),t({INTERNAL:{getUid:_(e.getUid,e),getToken:_(e.Cf,e),addAuthTokenListener:_(e.hf,e),removeAuthTokenListener:_(e.gg,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),t.INTERNAL.extendNamespace({User:nc})}()}).call(this)}).call(void 0!==typeof e?e:void 0!==typeof self?self:void 0!==typeof window?window:{})}).call(t,function(){return this}())},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(t){var n=t.INTERNAL.registerService("database",function(e){return h.RepoManager.getInstance().databaseFromApp(e)},{Reference:c.Reference,Query:u.Query,Database:s.Database,enableLogging:l.enableLogging,INTERNAL:d,ServerValue:s.Database.ServerValue,TEST_ACCESS:v});(0,y.isNodeSdk)()&&(e.exports=n)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerDatabase=i
var o=n(7),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(21),u=n(45),c=n(39),l=n(22),h=n(109),p=n(112),d=r(p),f=n(113),v=r(f),y=n(34)
i(a.default)},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseInternals=t.Database=void 0
var r=n(22),i=n(35),o=n(36),a=n(11),s=n(39),u=n(63),c=n(109),l=n(41),h=n(42),p=function(){function e(e){this.repo_=e,e instanceof u.Repo||(0,r.fatal)("Don't call new Database() directly - please use firebase.database()."),this.root_=new s.Reference(e,o.Path.Empty),this.INTERNAL=new d(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),(0,l.validateArgCount)("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL"
this.checkDeleted_(t),(0,l.validateArgCount)(t,1,1,arguments.length)
var n=(0,i.parseRepoInfo)(e);(0,h.validateUrl)(t,1,n)
var o=n.repoInfo
return o.host!==this.repo_.repoInfo_.host&&(0,r.fatal)(t+": Host name does not match the current database: (found "+o.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&(0,r.fatal)("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){(0,l.validateArgCount)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){(0,l.validateArgCount)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}()
t.Database=p
var d=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),c.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,a.PromiseImpl.resolve()},e}()
t.DatabaseInternals=d},function(e,t,n){"use strict"
function r(e){o=e}Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeoutNonBlocking=t.exportPropGetter=t.beingCrawled=t.callUserCallback=t.exceptionGuard=t.tryParseInt=t.INTEGER_REGEXP_=t.errorForServerCode=t.isWindowsStoreApp=t.isChromeExtensionContentScript=t.doubleToIEEE754String=t.bindCallback=t.each=t.splitStringBySize=t.ObjectToUniqueKey=t.requireKey=t.stringCompare=t.nameCompare=t.MAX_NAME=t.MIN_NAME=t.executeWhenDOMReady=t.isInvalidJSONNumber=t.warnAboutUnsupportedMethod=t.warnIfPageIsSecure=t.warn=t.fatal=t.error=t.logWrapper=t.log=t.enableLogging=t.logger=t.sha1=t.base64Decode=t.base64Encode=t.LUIDGenerator=void 0
var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.setBufferImpl=r
var o,a=n(23),s=n(25),u=n(26),c=n(27),l=n(29),h=n(30),p=n(31),d=n(34),f=(t.LUIDGenerator=function(){var e=1
return function(){return e++}}(),t.base64Encode=function(e){var t=(0,l.stringToByteArray)(e)
return u.base64.encodeByteArray(t,!0)},t.base64Decode=function(e){try{return o?new o(e,"base64").toString("utf8"):u.base64.decodeString(e,!0)}catch(e){g("base64Decode failed: ",e)}return null},t.sha1=function(e){var t=(0,l.stringToByteArray)(e),n=new c.Sha1
n.update(t)
var r=n.digest()
return u.base64.encodeByteArray(r)},function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
for(var r="",o=0;o<t.length;o++)Array.isArray(t[o])||t[o]&&"object"===i(t[o])&&"number"==typeof t[o].length?r+=e.apply(null,t[o]):"object"===i(t[o])?r+=(0,h.stringify)(t[o]):r+=t[o],r+=" "
return r}),v=t.logger=null,y=!0,_=t.enableLogging=function(e,n){(0,a.assert)(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?("undefined"!=typeof console&&("function"==typeof console.log?t.logger=v=console.log.bind(console):"object"===i(console.log)&&(t.logger=v=function(e){console.log(e)})),n&&p.SessionStorage.set("logging_enabled",!0)):"function"==typeof e?t.logger=v=e:(t.logger=v=null,p.SessionStorage.remove("logging_enabled"))},g=t.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
if(!0===y&&(y=!1,null===v&&!0===p.SessionStorage.get("logging_enabled")&&_(!0)),v){var n=f.apply(null,e)
v(n)}},m=(t.logWrapper=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
g.apply(void 0,[e].concat(t))}},t.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
if("undefined"!=typeof console){var n="FIREBASE INTERNAL ERROR: "+f.apply(void 0,e)
void 0!==console.error?console.error(n):console.log(n)}},t.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
var n=f.apply(void 0,e)
throw new Error("FIREBASE FATAL ERROR: "+n)},t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
if("undefined"!=typeof console){var n="FIREBASE WARNING: "+f.apply(void 0,e)
void 0!==console.warn?console.warn(n):console.log(n)}}),b=(t.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&m("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},t.warnAboutUnsupportedMethod=function(e){m(e+" is unsupported and will likely change soon.  Please do not use.")},t.isInvalidJSONNumber=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}),E=(t.executeWhenDOMReady=function(e){if((0,d.isNodeSdk)()||"complete"===document.readyState)e()
else{var t=!1,n=function n(){if(!document.body)return void setTimeout(n,Math.floor(10))
t||(t=!0,e())}
document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},t.MIN_NAME="[MIN_NAME]"),w=t.MAX_NAME="[MAX_NAME]",S=(t.nameCompare=function(e,t){if(e===t)return 0
if(e===E||t===w)return-1
if(t===E||e===w)return 1
var n=C(e),r=C(t)
return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},t.stringCompare=function(e,t){return e===t?0:e<t?-1:1},t.requireKey=function(e,t){if(t&&e in t)return t[e]
throw new Error("Missing required key ("+e+") in object: "+(0,h.stringify)(t))},t.ObjectToUniqueKey=function e(t){if("object"!==(void 0===t?"undefined":i(t))||null===t)return(0,h.stringify)(t)
var n=[]
for(var r in t)n.push(r)
n.sort()
for(var o="{",a=0;a<n.length;a++)0!==a&&(o+=","),o+=(0,h.stringify)(n[a]),o+=":",o+=e(t[n[a]])
return o+="}"},t.splitStringBySize=function(e,t){var n=e.length
if(n<=t)return[e]
for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t))
return r},t.each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n])
else(0,s.forEach)(e,function(e,n){return t(n,e)})},t.bindCallback=function(e,t){return t?e.bind(t):e},t.doubleToIEEE754String=function(e){(0,a.assert)(!b(e),"Invalid JSON number")
var t,n,r,i,o,s,u
for(0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,e=Math.abs(e),e>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2)
for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2)
s.push(t?1:0),s.reverse(),u=s.join("")
var c=""
for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16)
1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},t.isChromeExtensionContentScript=function(){return!("object"!==("undefined"==typeof window?"undefined":i(window))||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},t.isWindowsStoreApp=function(){return"object"===("undefined"==typeof Windows?"undefined":i(Windows))&&"object"===i(Windows.UI)},t.errorForServerCode=function(e,t){var n="Unknown Error"
"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable")
var r=new Error(e+" at "+t.path.toString()+": "+n)
return r.code=e.toUpperCase(),r},t.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$")),C=t.tryParseInt=function(e){if(S.test(e)){var t=Number(e)
if(t>=-2147483648&&t<=2147483647)return t}return null},T=t.exceptionGuard=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||""
throw m("Exception was thrown by user callback.",t),e},Math.floor(0))}}
t.callUserCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]
"function"==typeof e&&T(function(){e.apply(void 0,t)})},t.beingCrawled=function(){return("object"===("undefined"==typeof window?"undefined":i(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},t.exportPropGetter=function(e,t,n){Object.defineProperty(e,t,{get:n})},t.setTimeoutNonBlocking=function(e,t){var n=setTimeout(e,t)
return"object"===(void 0===n?"undefined":i(n))&&n.unref&&n.unref(),n}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.assertionError=t.assert=void 0
var r=n(24),i=(t.assert=function(e,t){if(!e)throw i(t)},t.assertionError=function(e){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)})},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
t.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"4.3.0"}},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.forEach=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}),i=t.extend=function(e,t){return r(t,function(t,n){e[t]=n}),e},o=(t.clone=function(e){return i({},e)},t.isNonNullObject=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},t.isEmpty=function(e){for(var t in e)return!1
return!0},t.getCount=function(e){var t=0
for(var n in e)t++
return t},t.map=function(e,t,n){var r={}
for(var i in e)r[i]=t.call(n,e[i],i,e)
return r},t.findKey=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r})
t.findValue=function(e,t,n){var r=o(e,t,n)
return r&&e[r]},t.getAnyKey=function(e){for(var t in e)return t},t.getValues=function(e){var t=[],n=0
for(var r in e)t[n++]=e[r]
return t},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1
return!0}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0
var r=n(12),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var i=e.charCodeAt(r);i>255;)t[n++]=255&i,i>>=8
t[n++]=i}return t},o=function(e){if(e.length<8192)return String.fromCharCode.apply(null,e)
for(var t="",n=0;n<e.length;n+=8192){var r=e.slice(n,n+8192)
t+=String.fromCharCode.apply(null,r)}return t}
t.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof r.globalScope.atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter")
this.init_()
for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,p=(15&s)<<2|c>>6,d=63&c
u||(d=64,a||(p=64)),r.push(n[l],n[h],n[p],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):o(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_()
for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i
var u=i<e.length,c=u?n[e.charAt(i)]:64;++i
var l=i<e.length,h=l?n[e.charAt(i)]:64
if(++i,null==o||null==s||null==c||null==h)throw Error()
var p=o<<2|s>>4
if(r.push(p),64!=c){var d=s<<4&240|c>>2
if(r.push(d),64!=h){var f=c<<6&192|h
r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={}
for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Sha1=void 0
var r=n(28),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e){function t(){var t=e.call(this)||this
t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128
for(var n=1;n<t.blockSize;++n)t.pad_[n]=0
return t.reset(),t}return i(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0)
var n=this.W_
if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4
else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4
for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16]
n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782)
var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295
h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length)
for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize
if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0
break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o==this.blockSize){this.compress_(i),o=0
break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_
this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56))
for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256
this.compress_(this.buf_)
for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r
return e},t}(r.Hash)
t.Sha1=o},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(){this.blockSize=-1}return e}()
t.Hash=n},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.stringLength=t.stringToByteArray=void 0
var r=n(23)
t.stringToByteArray=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i)
if(o>=55296&&o<=56319){var a=o-55296
i++,(0,r.assert)(i<e.length,"Surrogate pair missing trail surrogate.")
o=65536+(a<<10)+(e.charCodeAt(i)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n)
r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t}},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
t.jsonEval=function(e){return JSON.parse(e)},t.stringify=function(e){return JSON.stringify(e)}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=t.PersistentStorage=void 0
var r=n(32),i=n(33),o=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e]
return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(t)}}catch(e){}return new i.MemoryStorage}
t.PersistentStorage=o("localStorage"),t.SessionStorage=o("sessionStorage")},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.DOMStorageWrapper=void 0
var r=n(30),i=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,r.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e))
return null==t?null:(0,r.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}()
t.DOMStorageWrapper=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0
var r=n(25),i=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,r.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}()
t.MemoryStorage=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeSdk=t.isReactNative=t.isMobileCordova=t.getUA=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(24),o=t.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())},t.isReactNative=function(){return"object"===("undefined"==typeof navigator?"undefined":r(navigator))&&"ReactNative"===navigator.product},t.isNodeSdk=function(){return!0===i.CONSTANTS.NODE_CLIENT||!0===i.CONSTANTS.NODE_ADMIN}},function(e,t,n){"use strict"
function r(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r]
try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseURL=t.parseRepoInfo=void 0
var i=n(36),o=n(37),a=n(22),s=(t.parseRepoInfo=function(e){var t=s(e),n=t.subdomain
"firebase"===t.domain&&(0,a.fatal)(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||(0,a.fatal)("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||(0,a.warnIfPageIsSecure)()
var r="ws"===t.scheme||"wss"===t.scheme
return{repoInfo:new o.RepoInfo(t.host,t.secure,n,r),path:new i.Path(t.pathString)}},t.parseURL=function(e){var t="",n="",i="",o="",a=!0,s="https",u=443
if("string"==typeof e){var c=e.indexOf("//")
c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2))
var l=e.indexOf("/");-1===l&&(l=e.length),t=e.substring(0,l),o=r(e.substring(l))
var h=t.split(".")
3===h.length?(n=h[1],i=h[0].toLowerCase()):2===h.length&&(n=h[0]),c=t.indexOf(":"),c>=0&&(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10))}return{host:t,port:u,domain:n,subdomain:i,secure:a,scheme:s,pathString:o}})},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationPath=t.Path=void 0
var r=n(22),i=n(29),o=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/")
for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++)
this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_
return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t])
return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])))
return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null
for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n])
return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r])
if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r])
else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])
return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront()
if(null===r)return n
if(r===i)return e.relativePath(t.popFront(),n.popFront())
throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),i=t.slice(),o=0;o<n.length&&o<i.length;o++){var a=(0,r.nameCompare)(n[o],i[o])
if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1
for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1
return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_
if(this.getLength()>e.getLength())return!1
for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}()
t.Path=o
var a=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length)
for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,i.stringLength)(this.parts_[n])
this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=(0,i.stringLength)(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop()
this.byteLength_-=(0,i.stringLength)(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").")
if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}()
t.ValidationPath=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.RepoInfo=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(23),o=n(25),a=n(31),s=n(38),u=function(){function e(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=a.PersistentStorage.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&a.PersistentStorage.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){(0,i.assert)("string"==typeof e,"typeof type must == string"),(0,i.assert)("object"===(void 0===t?"undefined":r(t)),"typeof params must == object")
var n
if(e===s.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?"
else{if(e!==s.LONG_POLLING)throw new Error("Unknown connection type: "+e)
n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace)
var a=[]
return(0,o.forEach)(t,function(e,t){a.push(e+"="+t)}),n+a.join("&")},e.prototype.toString=function(){var e=this.toURLString()
return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}()
t.RepoInfo=u},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
t.PROTOCOL_VERSION="5",t.VERSION_PARAM="v",t.TRANSPORT_SESSION_PARAM="s",t.REFERER_PARAM="r",t.FORGE_REF="f",t.FORGE_DOMAIN="firebaseio.com",t.LAST_SESSION_PARAM="ls",t.WEBSOCKET="websocket",t.LONG_POLLING="long_polling"},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Reference=void 0
var r=n(40),i=n(43),o=n(22),a=n(44),s=n(45),u=n(63),c=n(36),l=n(106),h=n(42),p=n(41),d=n(11),f=n(74),v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(e){function t(t,n){if(!(t instanceof u.Repo))throw new Error("new Reference() no longer supported - use app.database().")
return e.call(this,t,n,l.QueryParams.DEFAULT,!1)||this}return v(t,e),t.prototype.getKey=function(){return(0,p.validateArgCount)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return(0,p.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof c.Path||(null===this.path.getFront()?(0,h.validateRootPathString)("Reference.child",1,e,!1):(0,h.validatePathString)("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){(0,p.validateArgCount)("Reference.parent",0,0,arguments.length)
var e=this.path.parent()
return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){(0,p.validateArgCount)("Reference.root",0,0,arguments.length)
for(var e=this;null!==e.getParent();)e=e.getParent()
return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){(0,p.validateArgCount)("Reference.set",1,2,arguments.length),(0,h.validateWritablePath)("Reference.set",this.path),(0,h.validateFirebaseDataArg)("Reference.set",1,e,this.path,!1),(0,p.validateCallback)("Reference.set",2,t,!0)
var n=new d.Deferred
return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if((0,p.validateArgCount)("Reference.update",1,2,arguments.length),(0,h.validateWritablePath)("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r]
e=n,(0,o.warn)("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,h.validateFirebaseMergeDataArg)("Reference.update",1,e,this.path,!1),(0,p.validateCallback)("Reference.update",2,t,!0)
var i=new d.Deferred
return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if((0,p.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,h.validateWritablePath)("Reference.setWithPriority",this.path),(0,h.validateFirebaseDataArg)("Reference.setWithPriority",1,e,this.path,!1),(0,h.validatePriority)("Reference.setWithPriority",2,t,!1),(0,p.validateCallback)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object."
var r=new d.Deferred
return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return(0,p.validateArgCount)("Reference.remove",0,1,arguments.length),(0,h.validateWritablePath)("Reference.remove",this.path),(0,p.validateCallback)("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if((0,p.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,h.validateWritablePath)("Reference.transaction",this.path),(0,p.validateCallback)("Reference.transaction",1,e,!1),(0,p.validateCallback)("Reference.transaction",2,t,!0),(0,h.validateBoolean)("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object."
void 0===n&&(n=!0)
var r=new d.Deferred
"function"==typeof t&&(0,d.attachDummyErrorHandler)(r.promise)
var o=function(e,n,o){e?r.reject(e):r.resolve(new i.TransactionResult(n,o)),"function"==typeof t&&t(e,n,o)}
return this.repo.startTransaction(this.path,e,o,n),r.promise},t.prototype.setPriority=function(e,t){(0,p.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,h.validateWritablePath)("Reference.setPriority",this.path),(0,h.validatePriority)("Reference.setPriority",1,e,!1),(0,p.validateCallback)("Reference.setPriority",2,t,!0)
var n=new d.Deferred
return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){(0,p.validateArgCount)("Reference.push",0,2,arguments.length),(0,h.validateWritablePath)("Reference.push",this.path),(0,h.validateFirebaseDataArg)("Reference.push",1,e,this.path,!0),(0,p.validateCallback)("Reference.push",2,t,!0)
var n,r=this.repo.serverTime(),i=(0,a.nextPushId)(r),o=this.child(i),s=this.child(i)
return n=null!=e?o.set(e,t).then(function(){return s}):d.PromiseImpl.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&(0,d.attachDummyErrorHandler)(n),o},t.prototype.onDisconnect=function(){return(0,h.validateWritablePath)("Reference.onDisconnect",this.path),new r.OnDisconnect(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(s.Query)
t.Reference=y,s.Query.__referenceConstructor=y,f.SyncPoint.__referenceConstructor=y},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.OnDisconnect=void 0
var r=n(41),i=n(42),o=n(22),a=n(11),s=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){(0,r.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,r.validateCallback)("OnDisconnect.cancel",1,e,!0)
var t=new a.Deferred
return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){(0,r.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,i.validateWritablePath)("OnDisconnect.remove",this.path_),(0,r.validateCallback)("OnDisconnect.remove",1,e,!0)
var t=new a.Deferred
return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){(0,r.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,i.validateWritablePath)("OnDisconnect.set",this.path_),(0,i.validateFirebaseDataArg)("OnDisconnect.set",1,e,this.path_,!1),(0,r.validateCallback)("OnDisconnect.set",2,t,!0)
var n=new a.Deferred
return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){(0,r.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,i.validateWritablePath)("OnDisconnect.setWithPriority",this.path_),(0,i.validateFirebaseDataArg)("OnDisconnect.setWithPriority",1,e,this.path_,!1),(0,i.validatePriority)("OnDisconnect.setWithPriority",2,t,!1),(0,r.validateCallback)("OnDisconnect.setWithPriority",3,n,!0)
var o=new a.Deferred
return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,o.wrapCallback(n)),o.promise},e.prototype.update=function(e,t){if((0,r.validateArgCount)("OnDisconnect.update",1,2,arguments.length),(0,i.validateWritablePath)("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},s=0;s<e.length;++s)n[""+s]=e[s]
e=n,(0,o.warn)("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,i.validateFirebaseMergeDataArg)("OnDisconnect.update",1,e,this.path_,!1),(0,r.validateCallback)("OnDisconnect.update",2,t,!0)
var u=new a.Deferred
return this.repo_.onDisconnectUpdate(this.path_,e,u.wrapCallback(t)),u.promise},e}()
t.OnDisconnect=s},function(e,t){"use strict"
function n(e,t,n){var r=""
switch(t){case 1:r=n?"first":"First"
break
case 2:r=n?"second":"Second"
break
case 3:r=n?"third":"Third"
break
case 4:r=n?"fourth":"Fourth"
break
default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: "
return i+=r+" argument "}Object.defineProperty(t,"__esModule",{value:!0})
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.errorPrefix=n
t.validateArgCount=function(e,t,n,r){var i
if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+"."
throw new Error(o)}},t.validateNamespace=function(e,t,r,i){if((!i||r)&&"string"!=typeof r)throw new Error(n(e,t,i)+"must be a valid firebase namespace.")},t.validateCallback=function(e,t,r,i){if((!i||r)&&"function"!=typeof r)throw new Error(n(e,t,i)+"must be a valid function.")},t.validateContextObject=function(e,t,i,o){if((!o||i)&&("object"!==(void 0===i?"undefined":r(i))||null===i))throw new Error(n(e,t,o)+"must be a valid context object.")}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.validateObjectContainsKey=t.validateObject=t.validateString=t.validateBoolean=t.validateCredential=t.validateUrl=t.validateWritablePath=t.validateRootPathString=t.validatePathString=t.validateKey=t.validateEventType=t.validatePriority=t.validateFirebaseMergeDataArg=t.validateFirebaseMergePaths=t.validateFirebaseData=t.validateFirebaseDataArg=t.isValidPriority=t.isValidRootPathString=t.isValidPathString=t.isValidKey=t.MAX_LEAF_SIZE_=t.INVALID_PATH_REGEX_=t.INVALID_KEY_REGEX_=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(36),o=n(25),a=n(22),s=n(41),u=n(29),c=t.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,l=t.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,h=t.MAX_LEAF_SIZE_=10485760,p=t.isValidKey=function(e){return"string"==typeof e&&0!==e.length&&!c.test(e)},d=t.isValidPathString=function(e){return"string"==typeof e&&0!==e.length&&!l.test(e)},f=t.isValidRootPathString=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),d(e)},v=t.isValidPriority=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!(0,a.isInvalidJSONNumber)(e)||e&&"object"===(void 0===e?"undefined":r(e))&&(0,o.contains)(e,".sv")},y=(t.validateFirebaseDataArg=function(e,t,n,r,i){i&&void 0===n||y((0,s.errorPrefix)(e,t,i),n,r)},t.validateFirebaseData=function e(t,n,s){var c=s instanceof i.Path?new i.ValidationPath(s,t):s
if(void 0===n)throw new Error(t+"contains undefined "+c.toErrorString())
if("function"==typeof n)throw new Error(t+"contains a function "+c.toErrorString()+" with contents = "+n.toString())
if((0,a.isInvalidJSONNumber)(n))throw new Error(t+"contains "+n.toString()+" "+c.toErrorString())
if("string"==typeof n&&n.length>h/3&&(0,u.stringLength)(n)>h)throw new Error(t+"contains a string greater than "+h+" utf8 bytes "+c.toErrorString()+" ('"+n.substring(0,50)+"...')")
if(n&&"object"===(void 0===n?"undefined":r(n))){var l=!1,d=!1
if((0,o.forEach)(n,function(n,r){if(".value"===n)l=!0
else if(".priority"!==n&&".sv"!==n&&(d=!0,!p(n)))throw new Error(t+" contains an invalid key ("+n+") "+c.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')
c.push(n),e(t,r,c),c.pop()}),l&&d)throw new Error(t+' contains ".value" child '+c.toErrorString()+" in addition to actual children.")}}),_=t.validateFirebaseMergePaths=function(e,t){var n,r
for(n=0;n<t.length;n++){r=t[n]
for(var o=r.slice(),a=0;a<o.length;a++)if(".priority"===o[a]&&a===o.length-1);else if(!p(o[a]))throw new Error(e+"contains an invalid key ("+o[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(i.Path.comparePaths)
var s=null
for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString())
s=r}},g=(t.validateFirebaseMergeDataArg=function(e,t,n,a,u){if(!u||void 0!==n){var c=(0,s.errorPrefix)(e,t,u)
if(!n||"object"!==(void 0===n?"undefined":r(n))||Array.isArray(n))throw new Error(c+" must be an object containing the children to replace.")
var l=[];(0,o.forEach)(n,function(e,t){var n=new i.Path(e)
if(y(c,t,a.child(n)),".priority"===n.getBack()&&!v(t))throw new Error(c+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).")
l.push(n)}),_(c,l)}},t.validatePriority=function(e,t,n,r){if(!r||void 0!==n){if((0,a.isInvalidJSONNumber)(n))throw new Error((0,s.errorPrefix)(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).")
if(!v(n))throw new Error((0,s.errorPrefix)(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},t.validateEventType=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break
default:throw new Error((0,s.errorPrefix)(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.validateKey=function(e,t,n,r){if(!(r&&void 0===n||p(n)))throw new Error((0,s.errorPrefix)(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},t.validatePathString=function(e,t,n,r){if(!(r&&void 0===n||d(n)))throw new Error((0,s.errorPrefix)(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')})
t.validateRootPathString=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),g(e,t,n,r)},t.validateWritablePath=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},t.validateUrl=function(e,t,n){var r=n.path.toString()
if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!p(n.repoInfo.namespace)||0!==r.length&&!f(r))throw new Error((0,s.errorPrefix)(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},t.validateCredential=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error((0,s.errorPrefix)(e,t,r)+"must be a valid credential (a string).")},t.validateBoolean=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,s.errorPrefix)(e,t,r)+"must be a boolean.")},t.validateString=function(e,t,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw new Error((0,s.errorPrefix)(e,t,r)+"must be a valid string.")},t.validateObject=function(e,t,n,i){if(!(i&&void 0===n||n&&"object"===(void 0===n?"undefined":r(n))&&null!==n))throw new Error((0,s.errorPrefix)(e,t,i)+"must be a valid object.")},t.validateObjectContainsKey=function(e,t,n,i,a,u){if(!n||"object"!==(void 0===n?"undefined":r(n))||!(0,o.contains)(n,i)){if(a)return
throw new Error((0,s.errorPrefix)(e,t,a)+'must contain the key "'+i+'"')}if(u){var c=(0,o.safeGet)(n,i)
if("number"===u&&"number"!=typeof c||"string"===u&&"string"!=typeof c||"boolean"===u&&"boolean"!=typeof c||"function"===u&&"function"!=typeof c||"object"===u&&"object"!==(void 0===c?"undefined":r(c))&&c)throw a?new Error((0,s.errorPrefix)(e,t,a)+'contains invalid value for key "'+i+'" (must be of type "'+u+'")'):new Error((0,s.errorPrefix)(e,t,a)+'must contain the key "'+i+'" with type "'+u+'"')}}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionResult=void 0
var r=n(41),i=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,r.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}()
t.TransactionResult=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.nextPushId=void 0
var r=n(23)
t.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[]
return function(i){var o=i===t
t=i
var a,s=new Array(8)
for(a=7;a>=0;a--)s[a]=e.charAt(i%64),i=Math.floor(i/64);(0,r.assert)(0===i,"Cannot push at time == 0")
var u=s.join("")
if(o){for(a=11;a>=0&&63===n[a];a--)n[a]=0
n[a]++}else for(a=0;a<12;a++)n[a]=Math.floor(64*Math.random())
for(a=0;a<12;a++)u+=e.charAt(n[a])
return(0,r.assert)(20===u.length,"nextPushId: Length should be 20."),u}}()},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Query=void 0
var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(23),a=n(46),s=n(49),u=n(52),c=n(59),l=n(22),h=n(36),p=n(42),d=n(41),f=n(60),v=n(11),y=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return(0,o.assert)(r,"Reference.ts has not been loaded"),r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null
if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===a.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",h="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string."
if(e.hasStart()){if(e.getIndexStartName()!=l.MIN_NAME)throw new Error(r)
if("string"!=typeof t)throw new Error(h)}if(e.hasEnd()){if(e.getIndexEndName()!=l.MAX_NAME)throw new Error(r)
if("string"!=typeof n)throw new Error(h)}}else if(e.getIndex()===s.PRIORITY_INDEX){if(null!=t&&!(0,p.isValidPriority)(t)||null!=n&&!(0,p.isValidPriority)(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(e.getIndex()instanceof c.PathIndex||e.getIndex()===u.VALUE_INDEX,"unknown index type."),null!=t&&"object"===(void 0===t?"undefined":i(t))||null!=n&&"object"===(void 0===n?"undefined":i(n)))throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return(0,d.validateArgCount)("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){(0,d.validateArgCount)("Query.on",2,4,arguments.length),(0,p.validateEventType)("Query.on",1,t,!1),(0,d.validateCallback)("Query.on",2,n,!1)
var o=e.getCancelAndContextArgs_("Query.on",r,i)
if("value"===t)this.onValueEvent(n,o.cancel,o.context)
else{var a={}
a[t]=n,this.onChildEvent(a,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new f.ValueEventRegistration(e,t||null,n||null)
this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new f.ChildEventRegistration(e,t,n)
this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){(0,d.validateArgCount)("Query.off",0,3,arguments.length),(0,p.validateEventType)("Query.off",1,e,!0),(0,d.validateCallback)("Query.off",2,t,!0),(0,d.validateContextObject)("Query.off",3,n,!0)
var r=null,i=null
if("value"===e){var o=t||null
r=new f.ValueEventRegistration(o,null,n||null)}else e&&(t&&(i={},i[e]=t),r=new f.ChildEventRegistration(i,null,n||null))
this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;(0,d.validateArgCount)("Query.once",1,4,arguments.length),(0,p.validateEventType)("Query.once",1,t,!1),(0,d.validateCallback)("Query.once",2,n,!0)
var a=e.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new v.Deferred;(0,v.attachDummyErrorHandler)(u.promise)
var c=function e(r){s&&(s=!1,o.off(t,e),n&&n.bind(a.context)(r),u.resolve(r))}
return this.on(t,c,function(e){o.off(t,c),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if((0,d.validateArgCount)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.")
if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).")
return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if((0,d.validateArgCount)("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.")
if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).")
return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if((0,d.validateArgCount)("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.')
if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.')
if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');(0,p.validatePathString)("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild")
var n=new h.Path(t)
if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.")
var r=new c.PathIndex(n),i=this.queryParams_.orderBy(r)
return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){(0,d.validateArgCount)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey")
var t=this.queryParams_.orderBy(a.KEY_INDEX)
return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){(0,d.validateArgCount)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority")
var t=this.queryParams_.orderBy(s.PRIORITY_INDEX)
return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){(0,d.validateArgCount)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue")
var t=this.queryParams_.orderBy(u.VALUE_INDEX)
return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),(0,d.validateArgCount)("Query.startAt",0,2,arguments.length),(0,p.validateFirebaseDataArg)("Query.startAt",1,t,this.path,!0),(0,p.validateKey)("Query.startAt",2,n,!0)
var r=this.queryParams_.startAt(t,n)
if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).")
return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),(0,d.validateArgCount)("Query.endAt",0,2,arguments.length),(0,p.validateFirebaseDataArg)("Query.endAt",1,t,this.path,!0),(0,p.validateKey)("Query.endAt",2,n,!0)
var r=this.queryParams_.endAt(t,n)
if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).")
return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if((0,d.validateArgCount)("Query.equalTo",1,2,arguments.length),(0,p.validateFirebaseDataArg)("Query.equalTo",1,e,this.path,!1),(0,p.validateKey)("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).")
if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).")
return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return(0,d.validateArgCount)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return(0,d.validateArgCount)("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=(0,l.ObjectToUniqueKey)(e)
return"{}"===t?"default":t},e.prototype.isEqual=function(t){if((0,d.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===t.repo,r=this.path.equals(t.path),i=this.queryIdentifier()===t.queryIdentifier()
return n&&r&&i},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null}
if(t&&n)r.cancel=t,(0,d.validateCallback)(e,3,r.cancel,!0),r.context=n,(0,d.validateContextObject)(e,4,r.context,!0)
else if(t)if("object"===(void 0===t?"undefined":i(t))&&null!==t)r.context=t
else{if("function"!=typeof t)throw new Error((0,d.errorPrefix)(e,3,!0)+" must either be a cancel callback or a context object.")
r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}()
t.Query=y},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_INDEX=t.KeyIndex=void 0
var r,i=n(47),o=n(48),a=n(22),s=n(23),u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return(0,a.nameCompare)(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,s.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return o.NamedNode.MIN},t.prototype.maxPost=function(){return new o.NamedNode(a.MAX_NAME,r)},t.prototype.makePost=function(e,t){return(0,s.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new o.NamedNode(e,r)},t.prototype.toString=function(){return".key"},t}(i.Index)
t.KeyIndex=c
t.KEY_INDEX=new c},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0
var r=n(48),i=n(22),o=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new r.NamedNode(i.MIN_NAME,e),o=new r.NamedNode(i.MIN_NAME,t)
return 0!==this.compare(n,o)},e.prototype.minPost=function(){return r.NamedNode.MIN},e}()
t.Index=o},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}()
t.NamedNode=n},function(e,t,n){"use strict"
function r(e){o=e}function i(e){a=e}Object.defineProperty(t,"__esModule",{value:!0}),t.PRIORITY_INDEX=t.PriorityIndex=void 0,t.setNodeFromJSON=r,t.setMaxNode=i
var o,a,s=n(47),u=n(22),c=n(48),l=n(50),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r)
return 0===i?(0,u.nameCompare)(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return c.NamedNode.MIN},t.prototype.maxPost=function(){return new c.NamedNode(u.MAX_NAME,new l.LeafNode("[PRIORITY-POST]",a))},t.prototype.makePost=function(e,t){var n=o(e)
return new c.NamedNode(t,new l.LeafNode("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(s.Index)
t.PriorityIndex=p
t.PRIORITY_INDEX=new p},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.LeafNode=void 0
var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(23),a=n(22),s=n(51),u=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),(0,s.validatePriorityNode)(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront()
return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e=""
this.priorityNode_.isEmpty()||(e+="priority:"+(0,s.priorityHashText)(this.priorityNode_.val())+":")
var t=i(this.value_)
e+=t+":",e+="number"===t?(0,a.doubleToIEEE754String)(this.value_):this.value_,this.lazyHash_=(0,a.sha1)(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=i(t.value_),r=i(this.value_),a=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r)
return(0,o.assert)(a>=0,"Unknown leaf type: "+n),(0,o.assert)(s>=0,"Unknown leaf type: "+r),a===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-a},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0
if(e.isLeafNode()){var t=e
return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}()
t.LeafNode=u},function(e,t,n){"use strict"
function r(e){o=e}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePriorityNode=t.priorityHashText=void 0
var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.setMaxNode=r
var o,a=n(23),s=n(22),u=n(25)
t.priorityHashText=function(e){return"number"==typeof e?"number:"+(0,s.doubleToIEEE754String)(e):"string:"+e},t.validatePriorityNode=function(e){if(e.isLeafNode()){var t=e.val();(0,a.assert)("string"==typeof t||"number"==typeof t||"object"===(void 0===t?"undefined":i(t))&&(0,u.contains)(t,".sv"),"Priority must be a string or number.")}else(0,a.assert)(e===o||e.isEmpty(),"priority of unexpected type.");(0,a.assert)(e===o||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.VALUE_INDEX=t.ValueIndex=void 0
var r=n(47),i=n(48),o=n(22),a=n(53),s=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node)
return 0===n?(0,o.nameCompare)(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return i.NamedNode.MIN},t.prototype.maxPost=function(){return i.NamedNode.MAX},t.prototype.makePost=function(e,t){var n=(0,a.nodeFromJSON)(e)
return new i.NamedNode(t,n)},t.prototype.toString=function(){return".value"},t}(r.Index)
t.ValueIndex=u
t.VALUE_INDEX=new u},function(e,t,n){"use strict"
function r(e,t){if(void 0===t&&(t=null),null===e)return o.ChildrenNode.EMPTY_NODE
if("object"===(void 0===e?"undefined":i(e))&&".priority"in e&&(t=e[".priority"]),(0,c.assert)(null===t||"string"==typeof t||"number"==typeof t||"object"===(void 0===t?"undefined":i(t))&&".sv"in t,"Invalid priority type found: "+(void 0===t?"undefined":i(t))),"object"===(void 0===e?"undefined":i(e))&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==(void 0===e?"undefined":i(e))||".sv"in e){var n=e
return new a.LeafNode(n,r(t))}if(e instanceof Array||!f){var v=o.ChildrenNode.EMPTY_NODE,y=e
return(0,u.forEach)(y,function(e,t){if((0,u.contains)(y,e)&&"."!==e.substring(0,1)){var n=r(t)
!n.isLeafNode()&&n.isEmpty()||(v=v.updateImmediateChild(e,n))}}),v.updatePriority(r(t))}var _=[],g=!1,m=e
if((0,u.forEach)(m,function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=r(m[e])
n.isEmpty()||(g=g||!n.getPriority().isEmpty(),_.push(new s.NamedNode(e,n)))}}),0==_.length)return o.ChildrenNode.EMPTY_NODE
var b=(0,l.buildChildSet)(_,h.NAME_ONLY_COMPARATOR,function(e){return e.name},h.NAME_COMPARATOR)
if(g){var E=(0,l.buildChildSet)(_,d.PRIORITY_INDEX.getCompare())
return new o.ChildrenNode(b,r(t),new p.IndexMap({".priority":E},{".priority":d.PRIORITY_INDEX}))}return new o.ChildrenNode(b,r(t),p.IndexMap.Default)}Object.defineProperty(t,"__esModule",{value:!0})
var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.nodeFromJSON=r
var o=n(54),a=n(50),s=n(48),u=n(25),c=n(23),l=n(57),h=n(58),p=n(56),d=n(49),f=!0;(0,d.setNodeFromJSON)(r)},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_NODE=t.MaxNode=t.ChildrenNode=void 0
var r,i=n(23),o=n(22),a=n(55),s=n(48),u=n(51),c=n(49),l=n(46),h=n(56),p=n(50),d=n(58),f=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&(0,u.validatePriorityNode)(this.priorityNode_),this.children_.isEmpty()&&(0,i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return r||(r=new e(new a.SortedMap(d.NAME_COMPARATOR),null,h.IndexMap.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||r},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority()
var t=this.children_.get(e)
return null===t?r:t},e.prototype.getChild=function(e){var t=e.getFront()
return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,i.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n)
var o=new s.NamedNode(t,n),a=void 0,u=void 0,c=void 0
return n.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(o,this.children_)),c=a.isEmpty()?r:this.priorityNode_,new e(a,c,u)},e.prototype.updateChild=function(e,t){var n=e.getFront()
if(null===n)return t;(0,i.assert)(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path")
var r=this.getImmediateChild(n).updateChild(e.popFront(),t)
return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null
var n={},r=0,i=0,o=!0
if(this.forEachChild(c.PRIORITY_INDEX,function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!t&&o&&i<2*r){var a=[]
for(var s in n)a[s]=n[s]
return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e=""
this.getPriority().isEmpty()||(e+="priority:"+(0,u.priorityHashText)(this.getPriority().val())+":"),this.forEachChild(c.PRIORITY_INDEX,function(t,n){var r=n.hash()
""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":(0,o.sha1)(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n)
if(r){var i=r.getPredecessorKey(new s.NamedNode(e,t))
return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e)
if(t){var n=t.minKey()
return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e)
return t?new s.NamedNode(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e)
if(t){var n=t.maxKey()
return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e)
return t?new s.NamedNode(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e)
return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t)
if(n)return n.getIteratorFrom(e,function(e){return e})
for(var r=this.children_.getIteratorFrom(e.name,s.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek()
return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t)
if(n)return n.getReverseIteratorFrom(e,function(e){return e})
for(var r=this.children_.getReverseIteratorFrom(e.name,s.NamedNode.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek()
return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_?-1:0},e.prototype.withIndex=function(t){if(t===l.KEY_INDEX||this.indexMap_.hasIndex(t))return this
var n=this.indexMap_.addIndex(t,this.children_)
return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===l.KEY_INDEX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0
if(e.isLeafNode())return!1
var t=e
if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(c.PRIORITY_INDEX),r=t.getIterator(c.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1
i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===l.KEY_INDEX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}()
t.ChildrenNode=v
var y=function(e){function t(){return e.call(this,new a.SortedMap(d.NAME_COMPARATOR),v.EMPTY_NODE,h.IndexMap.Default)||this}return f(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return v.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(v)
t.MaxNode=y
var _=t.MAX_NODE=new y
Object.defineProperties(s.NamedNode,{MIN:{value:new s.NamedNode(o.MIN_NAME,v.EMPTY_NODE)},MAX:{value:new s.NamedNode(o.MAX_NAME,_)}}),l.KeyIndex.__EMPTY_NODE=v.EMPTY_NODE,p.LeafNode.__childrenNodeConstructor=v,(0,u.setMaxNode)(_),(0,c.setMaxNode)(_)},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[]
for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right
else{if(0===o){this.nodeStack_.push(e)
break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null
var e,t=this.nodeStack_.pop()
if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right
else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left
return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null
var e=this.nodeStack_[this.nodeStack_.length-1]
return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}()
t.SortedMapIterator=n
var r=function(){function e(t,n,r,i,a){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:o.EMPTY_NODE,this.right=null!=a?a:o.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i
return i=this,r=n(e,i.key),i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return o.EMPTY_NODE
var e=this
return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r
if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null)
else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return o.EMPTY_NODE
r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this
return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_()
return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_()
return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left)
return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null)
return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null)
return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_()
return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e
if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")")
if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red")
if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ")
return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}()
t.LLRBNode=r
var i=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new r(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}()
t.LLRBEmptyNode=i
var o=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,r.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,r.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value
t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null
for(n=n.left;!n.right.isEmpty();)n=n.right
return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new n(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new n(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new n(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new n(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new i,e}()
t.SortedMap=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.IndexMap=void 0
var r,i=n(23),o=n(57),a=n(25),s=n(48),u=n(49),c=n(46),l={},h=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,i.assert)(l&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new e({".priority":l},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=(0,a.safeGet)(this.indexes_,e)
if(!t)throw new Error("No index defined for "+e)
return t===l?null:t},e.prototype.hasIndex=function(e){return(0,a.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,i.assert)(t!==c.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.")
for(var r=[],u=!1,h=n.getIterator(s.NamedNode.Wrap),p=h.getNext();p;)u=u||t.isDefinedOn(p.node),r.push(p),p=h.getNext()
var d
d=u?(0,o.buildChildSet)(r,t.getCompare()):l
var f=t.toString(),v=(0,a.clone)(this.indexSet_)
v[f]=t
var y=(0,a.clone)(this.indexes_)
return y[f]=d,new e(y,v)},e.prototype.addToIndexes=function(t,n){var r=this
return new e((0,a.map)(this.indexes_,function(e,u){var c=(0,a.safeGet)(r.indexSet_,u)
if((0,i.assert)(c,"Missing index implementation for "+u),e===l){if(c.isDefinedOn(t.node)){for(var h=[],p=n.getIterator(s.NamedNode.Wrap),d=p.getNext();d;)d.name!=t.name&&h.push(d),d=p.getNext()
return h.push(t),(0,o.buildChildSet)(h,c.getCompare())}return l}var f=n.get(t.name),v=e
return f&&(v=v.remove(new s.NamedNode(t.name,f))),v.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,a.map)(this.indexes_,function(e){if(e===l)return e
var r=n.get(t.name)
return r?e.remove(new s.NamedNode(t.name,r)):e}),this.indexSet_)},e}()
t.IndexMap=h},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.buildChildSet=void 0
var r=n(55),i=Math.log(2),o=function(){function e(e){this.count=function(e){return parseInt(Math.log(e)/i,10)}(e+1),this.current_=this.count-1
var t=function(e){return parseInt(Array(e+1).join("1"),2)}(this.count)
this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_)
return this.current_--,e},e}()
t.buildChildSet=function(e,t,n,i){e.sort(t)
var a=function t(i,o){var a,s,u=o-i
if(0==u)return null
if(1==u)return a=e[i],s=n?n(a):a,new r.LLRBNode(s,a.node,r.LLRBNode.BLACK,null,null)
var c=parseInt(u/2,10)+i,l=t(i,c),h=t(c+1,o)
return a=e[c],s=n?n(a):a,new r.LLRBNode(s,a.node,r.LLRBNode.BLACK,l,h)},s=new o(e.length),u=function(t){for(var i=null,o=null,s=e.length,u=function(t,i){var o=s-t,u=s
s-=t
var l=a(o+1,u),h=e[o],p=n?n(h):h
c(new r.LLRBNode(p,h.node,i,null,l))},c=function(e){i?(i.left=e,i=e):(o=e,i=e)},l=0;l<t.count;++l){var h=t.nextBitIsOne(),p=Math.pow(2,t.count-(l+1))
h?u(p,r.LLRBNode.BLACK):(u(p,r.LLRBNode.BLACK),u(p,r.LLRBNode.RED))}return o}(s)
return new r.SortedMap(i||t,u)}},function(e,t,n){"use strict"
function r(e,t){return(0,o.nameCompare)(e.name,t.name)}function i(e,t){return(0,o.nameCompare)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NAME_ONLY_COMPARATOR=r,t.NAME_COMPARATOR=i
var o=n(22)},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.PathIndex=void 0
var r=n(23),i=n(22),o=n(47),a=n(54),s=n(48),u=n(53),c=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(t){var n=e.call(this)||this
return n.indexPath_=t,(0,r.assert)(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return c(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r)
return 0===o?(0,i.nameCompare)(e.name,t.name):o},t.prototype.makePost=function(e,t){var n=(0,u.nodeFromJSON)(e),r=a.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n)
return new s.NamedNode(t,r)},t.prototype.maxPost=function(){var e=a.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,a.MAX_NODE)
return new s.NamedNode(i.MAX_NAME,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(o.Index)
t.PathIndex=l},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ChildEventRegistration=t.ValueEventRegistration=void 0
var r=n(61),i=n(62),o=n(25),a=n(23),s=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex()
return new i.DataEvent("value",this,new r.DataSnapshot(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_
if("cancel"===e.getEventType()){(0,a.assert)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback")
var n=this.cancelCallback_
return function(){n.call(t,e.error)}}var r=this.callback_
return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}()
t.ValueEventRegistration=s
var u=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e
return t="children_removed"===t?"child_removed":t,(0,o.contains)(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new i.CancelEvent(this,e,t):null},e.prototype.createEvent=function(e,t){(0,a.assert)(null!=e.childName,"Child events should have a childName.")
var n=t.getRef().child(e.childName),o=t.getQueryParams().getIndex()
return new i.DataEvent(e.type,this,new r.DataSnapshot(e.snapshotNode,n,o),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_
if("cancel"===e.getEventType()){(0,a.assert)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback")
var n=this.cancelCallback_
return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType]
return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0
if(this.context_===t.context_){var n=(0,o.getCount)(t.callbacks_)
if(n===(0,o.getCount)(this.callbacks_)){if(1===n){var r=(0,o.getAnyKey)(t.callbacks_),i=(0,o.getAnyKey)(this.callbacks_)
return!(i!==r||t.callbacks_[r]&&this.callbacks_[i]&&t.callbacks_[r]!==this.callbacks_[i])}return(0,o.every)(this.callbacks_,function(e,n){return t.callbacks_[e]===n})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}()
t.ChildEventRegistration=u},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.DataSnapshot=void 0
var r=n(41),i=n(42),o=n(36),a=n(49),s=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return(0,r.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return(0,r.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return(0,r.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return(0,r.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){(0,r.validateArgCount)("DataSnapshot.child",0,1,arguments.length),t=String(t),(0,i.validatePathString)("DataSnapshot.child",1,t,!1)
var n=new o.Path(t),s=this.ref_.child(n)
return new e(this.node_.getChild(n),s,a.PRIORITY_INDEX)},e.prototype.hasChild=function(e){(0,r.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),(0,i.validatePathString)("DataSnapshot.hasChild",1,e,!1)
var t=new o.Path(e)
return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return(0,r.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this
return(0,r.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,r.validateCallback)("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return t(new e(i,n.ref_.child(r),a.PRIORITY_INDEX))})},e.prototype.hasChildren=function(){return(0,r.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return(0,r.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return(0,r.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}()
t.DataSnapshot=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.CancelEvent=t.DataEvent=void 0
var r=n(30),i=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef()
return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,r.stringify)(this.snapshot.exportVal())},e}()
t.DataEvent=i
var o=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}()
t.CancelEvent=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Repo=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(64),o=n(53),a=n(36),s=n(65),u=n(67),c=n(86),l=n(30),h=n(22),p=n(25),d=n(87),f=n(88),v=n(90),y=n(91),_=n(92),g=n(93),m=n(104),b=n(21),E=function(){function e(e,t,n){var i=this
this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new s.SparseSnapshotTree,this.persistentConnection_=null
var o=new d.AuthTokenProvider(n)
if(this.stats_=f.StatsManager.getCollection(e),t||(0,h.beingCrawled)())this.server_=new m.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0)
else{var a=n.options.databaseAuthVariableOverride
if(void 0!==a&&null!==a){if("object"!==(void 0===a?"undefined":r(a)))throw new Error("Only objects are supported for option databaseAuthVariableOverride")
try{(0,l.stringify)(a)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new g.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(e){i.server_.refreshAuthToken(e)}),this.statsReporter_=f.StatsManager.getOrCreateReporter(e,function(){return new v.StatsReporter(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new c.SnapshotHolder,this.infoSyncTree_=new u.SyncTree({startListening:function(e,t,n,r){var o=[],a=i.infoData_.getNode(e.path)
return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new u.SyncTree({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,function(t,n){var o=r(t,n)
i.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new a.Path(".info/serverTimeOffset")),t=e.val()||0
return(new Date).getTime()+t},e.prototype.generateServerValues=function(){return(0,i.generateWithValues)({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++
var i=new a.Path(e)
t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t
var s=[]
if(r)if(n){var u=(0,p.map)(t,function(e){return(0,o.nodeFromJSON)(e)})
s=this.serverSyncTree_.applyTaggedQueryMerge(i,u,r)}else{var c=(0,o.nodeFromJSON)(t)
s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,c,r)}else if(n){var l=(0,p.map)(t,function(e){return(0,o.nodeFromJSON)(e)})
s=this.serverSyncTree_.applyServerMerge(i,l)}else{var h=(0,o.nodeFromJSON)(t)
s=this.serverSyncTree_.applyServerOverwrite(i,h)}var d=i
s.length>0&&(d=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(d,s)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;(0,h.each)(e,function(e,n){t.updateInfo_(n,e)})},e.prototype.updateInfo_=function(e,t){var n=new a.Path("/.info/"+e),r=(0,o.nodeFromJSON)(t)
this.infoData_.updateSnapshot(n,r)
var i=this.infoSyncTree_.applyServerOverwrite(n,r)
this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var a=this
this.log_("set",{path:e.toString(),value:t,priority:n})
var s=this.generateServerValues(),u=(0,o.nodeFromJSON)(t,n),c=(0,i.resolveDeferredValueSnapshot)(u,s),l=this.getNextWriteId_(),p=this.serverSyncTree_.applyUserOverwrite(e,c,l,!0)
this.eventQueue_.queueEvents(p),this.server_.put(e.toString(),u.val(!0),function(t,n){var i="ok"===t
i||(0,h.warn)("set at "+e+" failed: "+t)
var o=a.serverSyncTree_.ackUserWrite(l,!i)
a.eventQueue_.raiseEventsForChangedPath(e,o),a.callOnCompleteCallback(r,t,n)})
var d=this.abortTransactions_(e)
this.rerunTransactions_(d),this.eventQueue_.raiseEventsForChangedPath(d,[])},e.prototype.update=function(e,t,n){var r=this
this.log_("update",{path:e.toString(),value:t})
var a=!0,s=this.generateServerValues(),u={}
if((0,p.forEach)(t,function(e,t){a=!1
var n=(0,o.nodeFromJSON)(t)
u[e]=(0,i.resolveDeferredValueSnapshot)(n,s)}),a)(0,h.log)("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok")
else{var c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(e,u,c)
this.eventQueue_.queueEvents(l),this.server_.merge(e.toString(),t,function(t,i){var o="ok"===t
o||(0,h.warn)("update at "+e+" failed: "+t)
var a=r.serverSyncTree_.ackUserWrite(c,!o),s=a.length>0?r.rerunTransactions_(e):e
r.eventQueue_.raiseEventsForChangedPath(s,a),r.callOnCompleteCallback(n,t,i)}),(0,p.forEach)(t,function(t){var n=r.abortTransactions_(e.child(t))
r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this
this.log_("onDisconnectEvents")
var t=this.generateServerValues(),n=(0,i.resolveDeferredValueTree)(this.onDisconnect_,t),r=[]
n.forEachTree(a.Path.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n))
var i=e.abortTransactions_(t)
e.rerunTransactions_(i)}),this.onDisconnect_=new s.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(a.Path.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this
this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=(0,o.nodeFromJSON)(t)
this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,a=(0,o.nodeFromJSON)(t,n)
this.server_.onDisconnectPut(e.toString(),a.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,a),i.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this
if((0,p.isEmpty)(t))return(0,h.log)("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok")
this.server_.onDisconnectMerge(e.toString(),t,function(i,a){"ok"===i&&(0,p.forEach)(t,function(t,n){var i=(0,o.nodeFromJSON)(n)
r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,a)})},e.prototype.addEventCallbackForQuery=function(e,t){var n
n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n
n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t
e?(this.statsListener_||(this.statsListener_=new y.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get()
var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);(0,p.forEach)(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" "
console.log(e+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
var n=""
this.persistentConnection_&&(n=this.persistentConnection_.id+":"),h.log.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&(0,h.exceptionGuard)(function(){if("ok"==t)e(null)
else{var r=(t||"error").toUpperCase(),i=r
n&&(i+=": "+n)
var o=new Error(i)
o.code=r,e(o)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new b.Database(this))},enumerable:!0,configurable:!0}),e}()
t.Repo=E},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.resolveDeferredValueSnapshot=t.resolveDeferredValueTree=t.resolveDeferredValue=t.generateWithValues=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(23),o=n(36),a=n(65),s=n(50),u=n(53),c=n(49),l=(t.generateWithValues=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},t.resolveDeferredValue=function(e,t){return e&&"object"===(void 0===e?"undefined":r(e))?((0,i.assert)(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}),h=(t.resolveDeferredValueTree=function(e,t){var n=new a.SparseSnapshotTree
return e.forEachTree(new o.Path(""),function(e,r){n.remember(e,h(r,t))}),n},t.resolveDeferredValueSnapshot=function e(t,n){var r,i=t.getPriority().val(),o=l(i,n)
if(t.isLeafNode()){var a=t,h=l(a.getValue(),n)
return h!==a.getValue()||o!==a.getPriority().val()?new s.LeafNode(h,(0,u.nodeFromJSON)(o)):t}var p=t
return r=p,o!==p.getPriority().val()&&(r=r.updatePriority(new s.LeafNode(o))),p.forEachChild(c.PRIORITY_INDEX,function(t,i){var o=e(i,n)
o!==i&&(r=r.updateImmediateChild(t,o))}),r})},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.SparseSnapshotTree=void 0
var r=n(36),i=n(49),o=n(66),a=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e)
if(e.isEmpty()||null==this.children_)return null
var t=e.getFront()
if(e=e.popFront(),this.children_.contains(t)){return this.children_.get(t).find(e)}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null
else if(null!==this.value_)this.value_=this.value_.updateChild(t,n)
else{null==this.children_&&(this.children_=new o.CountedSet)
var r=t.getFront()
this.children_.contains(r)||this.children_.add(r,new e)
var i=this.children_.get(r)
t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0
if(null!==this.value_){if(this.value_.isLeafNode())return!1
var t=this.value_
this.value_=null
var n=this
return t.forEachChild(i.PRIORITY_INDEX,function(e,t){n.remember(new r.Path(e),t)}),this.forget(e)}if(null!==this.children_){var o=e.getFront()
if(e=e.popFront(),this.children_.contains(o)){this.children_.get(o).forget(e)&&this.children_.remove(o)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,i){var o=new r.Path(e.toString()+"/"+n)
i.forEachTree(o,t)})},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})},e}()
t.SparseSnapshotTree=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.CountedSet=void 0
var r=n(25),i=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return(0,r.contains)(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return(0,r.isEmpty)(this.set)},e.prototype.count=function(){return(0,r.getCount)(this.set)},e.prototype.each=function(e){(0,r.forEach)(this.set,function(t,n){return e(t,n)})},e.prototype.keys=function(){var e=[]
return(0,r.forEach)(this.set,function(t){e.push(t)}),e},e}()
t.CountedSet=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.SyncTree=void 0
var r=n(23),i=n(22),o=n(68),a=n(54),s=n(25),u=n(70),c=n(71),l=n(72),h=n(69),p=n(73),d=n(36),f=n(74),v=n(84),y=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=u.ImmutableTree.Empty,this.pendingWriteTree_=new v.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new p.Overwrite(h.OperationSource.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n)
var r=u.ImmutableTree.fromObject(t)
return this.applyOperationToSyncPoints_(new l.Merge(h.OperationSource.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1)
var n=this.pendingWriteTree_.getWrite(e)
if(this.pendingWriteTree_.removeWrite(e)){var r=u.ImmutableTree.Empty
return null!=n.snap?r=r.set(d.Path.Empty,!0):(0,s.forEach)(n.children,function(e,t){r=r.set(new d.Path(e),t)}),this.applyOperationToSyncPoints_(new o.AckUserWrite(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new p.Overwrite(h.OperationSource.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=u.ImmutableTree.fromObject(t)
return this.applyOperationToSyncPoints_(new l.Merge(h.OperationSource.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new c.ListenComplete(h.OperationSource.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r)
if(null!=i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=d.Path.relativePath(a,t),c=new p.Overwrite(h.OperationSource.forServerTaggedQuery(s),u,n)
return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r)
if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,c=d.Path.relativePath(a,t),p=u.ImmutableTree.fromObject(n),f=new l.Merge(h.OperationSource.forServerTaggedQuery(s),c,p)
return this.applyTaggedOperation_(a,f)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n)
if(r){var i=e.parseQueryKey_(r),o=i.path,a=i.queryId,s=d.Path.relativePath(o,t),u=new c.ListenComplete(h.OperationSource.forServerTaggedQuery(a),s)
return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var i=t.path,o=null,s=!1
this.syncPointTree_.foreachOnPath(i,function(e,t){var n=d.Path.relativePath(e,i)
o=o||t.getCompleteServerCache(n),s=s||t.hasCompleteView()})
var u=this.syncPointTree_.get(i)
u?(s=s||u.hasCompleteView(),o=o||u.getCompleteServerCache(d.Path.Empty)):(u=new f.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(i,u))
var c
if(null!=o)c=!0
else{c=!1,o=a.ChildrenNode.EMPTY_NODE
this.syncPointTree_.subtree(i).foreachChild(function(e,t){var n=t.getCompleteServerCache(d.Path.Empty)
n&&(o=o.updateImmediateChild(e,n))})}var l=u.viewExistsForQuery(t)
if(!l&&!t.getQueryParams().loadsAllData()){var h=e.makeQueryKey_(t);(0,r.assert)(!(h in this.queryToTagMap_),"View does not exist, but we have a tag")
var p=e.getNextQueryTag_()
this.queryToTagMap_[h]=p,this.tagToQueryMap_["_"+p]=h}var v=this.pendingWriteTree_.childWrites(i),y=u.addEventRegistration(t,n,v,o,c)
if(!l&&!s){var _=u.viewForQuery(t)
y=y.concat(this.setupListener_(t,_))}return y},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,a=this.syncPointTree_.get(o),s=[]
if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r)
a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o))
var c=u.removed
s=u.events
var l=-1!==c.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()})
if(l&&!h){var p=this.syncPointTree_.subtree(o)
if(!p.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(p),f=0;f<d.length;++f){var v=d[f],y=v.getQuery(),_=this.createListenerForView_(v)
this.listenProvider_.startListening(e.queryForListening_(y),this.tagForQuery_(y),_.hashFn,_.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else c.forEach(function(t){var n=i.queryToTagMap_[e.makeQueryKey_(t)]
i.listenProvider_.stopListening(e.queryForListening_(t),n)})
this.removeTags_(c)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=d.Path.relativePath(t,e),i=n.getCompleteServerCache(r)
if(i)return i})
return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){return[t.getCompleteView()]}var r=[]
return t&&(r=t.getQueryViews()),(0,s.forEach)(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n]
if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap_[i]
delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var i=t.path,o=this.tagForQuery_(t),a=this.createListenerForView_(n),u=this.listenProvider_.startListening(e.queryForListening_(t),o,a.hashFn,a.onComplete),c=this.syncPointTree_.subtree(i)
if(o)(0,r.assert)(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed")
else for(var l=c.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()]
var r=[]
return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),(0,s.forEach)(n,function(e,t){r=r.concat(t)}),r}),h=0;h<l.length;++h){var p=l[h]
this.listenProvider_.stopListening(e.queryForListening_(p),this.tagForQuery_(p))}return u},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n)
return{hashFn:function(){return(e.getServerCache()||a.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path)
var o=(0,i.errorForServerCode)(e,n)
return t.removeEventRegistration(n,null,o)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$")
return(0,r.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new d.Path(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t)
return(0,s.safeGet)(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);(0,r.assert)(n,"Missing sync point for query tag that we're tracking")
var i=this.pendingWriteTree_.childWrites(e)
return n.applyOperation(t,i,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(d.Path.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r)
var i=t.get(d.Path.Empty)
null==n&&null!=i&&(n=i.getCompleteServerCache(d.Path.Empty))
var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a)
if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a)
o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(d.Path.Empty)
null==n&&null!=o&&(n=o.getCompleteServerCache(d.Path.Empty))
var a=[]
return t.children.inorderTraversal(function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t)
c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}()
t.SyncTree=y},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.AckUserWrite=void 0
var r=n(23),i=n(36),o=n(69),a=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return(0,r.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this
var n=this.affectedTree.subtree(new i.Path(t))
return new e(i.Path.Empty,n,this.revert)}return(0,r.assert)(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}()
t.AckUserWrite=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.OperationSource=t.OperationType=void 0
var r=n(23),i=t.OperationType=void 0
!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(i||(t.OperationType=i={}))
var o=function(){function e(e,t,n,i){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=i,(0,r.assert)(!i||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}()
t.OperationSource=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutableTree=void 0
var r,i=n(55),o=n(36),a=n(22),s=n(25),u=function(){return r||(r=new i.SortedMap(a.stringCompare)),r},c=function(){function e(e,t){void 0===t&&(t=u()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty
return(0,s.forEach)(t,function(e,t){n=n.set(new o.Path(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:o.Path.Empty,value:this.value}
if(e.isEmpty())return null
var n=e.getFront(),r=this.children.get(n)
if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t)
if(null!=i){return{path:new o.Path(n).child(i.path),value:i.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this
var n=t.getFront(),r=this.children.get(n)
return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children)
var r=t.getFront(),i=this.children.get(r)||e.Empty,o=i.set(t.popFront(),n),a=this.children.insert(r,o)
return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children)
var n=t.getFront(),r=this.children.get(n)
if(r){var i=r.remove(t.popFront()),o=void 0
return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value
var t=e.getFront(),n=this.children.get(t)
return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n
var r=t.getFront(),i=this.children.get(r)||e.Empty,o=i.setTree(t.popFront(),n),a=void 0
return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(o.Path.Empty,e)},e.prototype.fold_=function(e,t){var n={}
return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,o.Path.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value)
if(r)return r
if(e.isEmpty())return null
var i=e.getFront(),o=this.children.get(i)
return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,o.Path.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this
this.value&&r(n,this.value)
var i=t.getFront(),o=this.children.get(i)
return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(o.Path.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}()
t.ImmutableTree=c},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ListenComplete=void 0
var r=n(36),i=n(69),o=function(){function e(e,t){this.source=e,this.path=t,this.type=i.OperationType.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,r.Path.Empty):new e(this.source,this.path.popFront())},e}()
t.ListenComplete=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0
var r=n(69),i=n(73),o=n(36),a=n(23),s=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=r.OperationType.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(t))
return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new e(this.source,o.Path.Empty,n)}return(0,a.assert)(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}()
t.Merge=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Overwrite=void 0
var r=n(69),i=n(36),o=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=r.OperationType.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,i.Path.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}()
t.Overwrite=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.SyncPoint=void 0
var r,i=n(75),o=n(54),a=n(23),s=n(25),u=n(76),c=n(77),l=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return(0,a.assert)(r,"Reference.ts has not been loaded"),r},set:function(e){(0,a.assert)(!r,"__referenceConstructor has already been defined"),r=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return(0,s.isEmpty)(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId
if(null!==r){var i=(0,s.safeGet)(this.views_,r)
return(0,a.assert)(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(e,t,n)}var o=[]
return(0,s.forEach)(this.views_,function(r,i){o=o.concat(i.applyOperation(e,t,n))}),o},e.prototype.addEventRegistration=function(e,t,n,r,a){var l=e.queryIdentifier(),h=(0,s.safeGet)(this.views_,l)
if(!h){var p=n.calcCompleteEventCache(a?r:null),d=!1
p?d=!0:r instanceof o.ChildrenNode?(p=n.calcCompleteEventChildren(r),d=!1):(p=o.ChildrenNode.EMPTY_NODE,d=!1)
var f=new u.ViewCache(new i.CacheNode(p,d,!1),new i.CacheNode(r,a,!1))
h=new c.View(e,f),this.views_[l]=h}return h.addEventRegistration(t),h.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i=t.queryIdentifier(),o=[],a=[],u=this.hasCompleteView()
if("default"===i){var c=this;(0,s.forEach)(this.views_,function(e,t){a=a.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete c.views_[e],t.getQuery().getQueryParams().loadsAllData()||o.push(t.getQuery()))})}else{var l=(0,s.safeGet)(this.views_,i)
l&&(a=a.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[i],l.getQuery().getQueryParams().loadsAllData()||o.push(l.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new e.__referenceConstructor(t.repo,t.path)),{removed:o,events:a}},e.prototype.getQueryViews=function(){var e=this
return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},e.prototype.getCompleteServerCache=function(e){var t=null
return(0,s.forEach)(this.views_,function(n,r){t=t||r.getCompleteServerCache(e)}),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView()
var t=e.queryIdentifier()
return(0,s.safeGet)(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return(0,s.findValue)(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},e}()
t.SyncPoint=l},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_
var t=e.getFront()
return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}()
t.CacheNode=n},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ViewCache=void 0
var r=n(54),i=n(75),o=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new i.CacheNode(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new i.CacheNode(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),e}()
t.ViewCache=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0
var r=n(78),i=n(80),o=n(54),a=n(75),s=n(76),u=n(83),c=n(23),l=n(69),h=n(79),p=n(49),d=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[]
var n=this.query_.getQueryParams(),c=new r.IndexedFilter(n.getIndex()),l=n.getNodeFilter()
this.processor_=new i.ViewProcessor(l)
var h=t.getServerCache(),p=t.getEventCache(),d=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,h.getNode(),null),f=l.updateFullNode(o.ChildrenNode.EMPTY_NODE,p.getNode(),null),v=new a.CacheNode(d,h.isFullyInitialized(),c.filtersNodes()),y=new a.CacheNode(f,p.isFullyInitialized(),l.filtersNodes())
this.viewCache_=new s.ViewCache(y,v),this.eventGenerator_=new u.EventGenerator(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap()
return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[]
if(t){(0,c.assert)(null==e,"A cancel should cancel all event registrations.")
var r=this.query_.path
this.eventRegistrations_.forEach(function(e){t=t
var i=e.createCancelEvent(t,r)
i&&n.push(i)})}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o]
if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1))
break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[]
return n},e.prototype.applyOperation=function(e,t,n){e.type===l.OperationType.MERGE&&null!==e.source.queryId&&((0,c.assert)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,c.assert)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"))
var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n)
return this.processor_.assertIndexed(i.viewCache),(0,c.assert)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[]
if(!t.getNode().isLeafNode()){t.getNode().forEachChild(p.PRIORITY_INDEX,function(e,t){n.push(h.Change.childAddedChange(e,t))})}return t.isFullyInitialized()&&n.push(h.Change.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_
return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}()
t.View=d},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedFilter=void 0
var r=n(23),i=n(79),o=n(54),a=n(49),s=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,o,a,s){(0,r.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated")
var u=e.getImmediateChild(t)
return u.getChild(o).equals(n.getChild(o))&&u.isEmpty()==n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(i.Change.childRemovedChange(t,u)):(0,r.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(i.Change.childAddedChange(t,n)):s.trackChildChange(i.Change.childChangedChange(t,n,u))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,function(e,r){t.hasChild(e)||n.trackChildChange(i.Change.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(a.PRIORITY_INDEX,function(t,r){if(e.hasChild(t)){var o=e.getImmediateChild(t)
o.equals(r)||n.trackChildChange(i.Change.childChangedChange(t,r,o))}else n.trackChildChange(i.Change.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?o.ChildrenNode.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}()
t.IndexedFilter=s},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}()
t.Change=n},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ViewProcessor=t.ProcessorResult=void 0
var r=n(69),i=n(23),o=n(81),a=n(79),s=n(54),u=n(46),c=n(70),l=n(36),h=n(82),p=function(){function e(e,t){this.viewCache=e,this.changes=t}return e}()
t.ProcessorResult=p
var d=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){(0,i.assert)(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,i.assert)(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,a,s){var u,c,l=new o.ChildChangeAccumulator
if(n.type===r.OperationType.OVERWRITE){var h=n
h.source.fromUser?u=this.applyUserOverwrite_(t,h.path,h.snap,a,s,l):((0,i.assert)(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.getServerCache().isFiltered()&&!h.path.isEmpty(),u=this.applyServerOverwrite_(t,h.path,h.snap,a,s,c,l))}else if(n.type===r.OperationType.MERGE){var d=n
d.source.fromUser?u=this.applyUserMerge_(t,d.path,d.children,a,s,l):((0,i.assert)(d.source.fromServer,"Unknown source."),c=d.source.tagged||t.getServerCache().isFiltered(),u=this.applyServerMerge_(t,d.path,d.children,a,s,c,l))}else if(n.type===r.OperationType.ACK_USER_WRITE){var f=n
u=f.revert?this.revertUserWrite_(t,f.path,a,s,l):this.ackUserWrite_(t,f.path,f.affectedTree,a,s,l)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw(0,i.assertionError)("Unknown operation type: "+n.type)
u=this.listenComplete_(t,n.path,a,l)}var v=l.getChanges()
return e.maybeAddValueEvent_(t,u,v),new p(u,v)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache()
if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(a.Change.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var a=e.getEventCache()
if(null!=n.shadowingWrite(t))return e
var u=void 0,c=void 0
if(t.isEmpty())if((0,i.assert)(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var l=e.getCompleteServerSnap(),h=l instanceof s.ChildrenNode?l:s.ChildrenNode.EMPTY_NODE,p=n.calcCompleteEventChildren(h)
u=this.filter_.updateFullNode(e.getEventCache().getNode(),p,o)}else{var d=n.calcCompleteEventCache(e.getCompleteServerSnap())
u=this.filter_.updateFullNode(e.getEventCache().getNode(),d,o)}else{var f=t.getFront()
if(".priority"==f){(0,i.assert)(1==t.getLength(),"Can't have a priority with additional path components")
var v=a.getNode()
c=e.getServerCache().getNode()
var y=n.calcEventCacheAfterServerOverwrite(t,v,c)
u=null!=y?this.filter_.updatePriority(v,y):a.getNode()}else{var _=t.popFront(),g=void 0
if(a.isCompleteForChild(f)){c=e.getServerCache().getNode()
var m=n.calcEventCacheAfterServerOverwrite(t,a.getNode(),c)
g=null!=m?a.getNode().getImmediateChild(f).updateChild(_,m):a.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,e.getServerCache())
u=null!=g?this.filter_.updateChild(a.getNode(),f,g,_,r,o):a.getNode()}}return e.updateEventSnap(u,a.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter()
if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null)
else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n)
s=c.updateFullNode(u.getNode(),l,null)}else{var p=t.getFront()
if(!u.isCompleteForPath(t)&&t.getLength()>1)return e
var d=t.popFront(),f=u.getNode().getImmediateChild(p),v=f.updateChild(d,n)
s=".priority"==p?c.updatePriority(u.getNode(),v):c.updateChild(u.getNode(),p,v,d,h.NO_COMPLETE_CHILD_SOURCE,null)}var y=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),_=new h.WriteTreeCompleteChildSource(r,y,i)
return this.generateEventCacheAfterServerEvent_(y,t,r,_,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,u,c=e.getEventCache(),l=new h.WriteTreeCompleteChildSource(r,e,i)
if(t.isEmpty())u=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(u,!0,this.filter_.filtersNodes())
else{var p=t.getFront()
if(".priority"===p)u=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(u,c.isFullyInitialized(),c.isFiltered())
else{var d=t.popFront(),f=c.getNode().getImmediateChild(p),v=void 0
if(d.isEmpty())v=n
else{var y=l.getCompleteChild(p)
v=null!=y?".priority"===d.getBack()&&y.getChild(d.parent()).isEmpty()?y:y.updateChild(d,n):s.ChildrenNode.EMPTY_NODE}if(f.equals(v))a=e
else{var _=this.filter_.updateChild(c.getNode(),p,v,d,l,o)
a=e.updateEventSnap(_,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,a){var s=this,u=t
return r.foreach(function(r,c){var l=n.child(r)
e.cacheHasChild_(t,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r)
e.cacheHasChild_(t,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this
if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e
var u,h=e
u=t.isEmpty()?n:c.ImmutableTree.Empty.setTree(t,n)
var p=e.getServerCache().getNode()
return u.children.inorderTraversal(function(t,n){if(p.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),c=s.applyMerge_(u,n)
h=s.applyServerOverwrite_(h,new l.Path(t),c,r,i,o,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value
if(!p.hasChild(t)&&!u){var c=e.getServerCache().getNode().getImmediateChild(t),d=s.applyMerge_(c,n)
h=s.applyServerOverwrite_(h,new l.Path(t),d,r,i,o,a)}}),h},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e
var a=e.getServerCache().isFiltered(),s=e.getServerCache()
if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o)
if(t.isEmpty()){var h=c.ImmutableTree.Empty
return s.getNode().forEachChild(u.KEY_INDEX,function(e,t){h=h.set(new l.Path(e),t)}),this.applyServerMerge_(e,t,h,r,i,a,o)}return e}var p=c.ImmutableTree.Empty
return n.foreach(function(e,n){var r=t.child(e)
s.isCompleteForPath(r)&&(p=p.set(e,s.getNode().getChild(r)))}),this.applyServerMerge_(e,t,p,r,i,a,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered())
return this.generateEventCacheAfterServerEvent_(o,t,n,h.NO_COMPLETE_CHILD_SOURCE,r)},e.prototype.revertUserWrite_=function(e,t,n,r,o){var a
if(null!=n.shadowingWrite(t))return e
var u=new h.WriteTreeCompleteChildSource(n,e,r),c=e.getEventCache().getNode(),p=void 0
if(t.isEmpty()||".priority"===t.getFront()){var d=void 0
if(e.getServerCache().isFullyInitialized())d=n.calcCompleteEventCache(e.getCompleteServerSnap())
else{var f=e.getServerCache().getNode();(0,i.assert)(f instanceof s.ChildrenNode,"serverChildren would be complete if leaf node"),d=n.calcCompleteEventChildren(f)}d=d,p=this.filter_.updateFullNode(c,d,o)}else{var v=t.getFront(),y=n.calcCompleteChild(v,e.getServerCache())
null==y&&e.getServerCache().isCompleteForChild(v)&&(y=c.getImmediateChild(v)),p=null!=y?this.filter_.updateChild(c,v,y,t.popFront(),u,o):e.getEventCache().getNode().hasChild(v)?this.filter_.updateChild(c,v,s.ChildrenNode.EMPTY_NODE,t.popFront(),u,o):c,p.isEmpty()&&e.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(e.getCompleteServerSnap()),a.isLeafNode()&&(p=this.filter_.updateFullNode(p,a,o)))}return a=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(l.Path.Empty),e.updateEventSnap(p,a,this.filter_.filtersNodes())},e}()
t.ViewProcessor=d},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ChildChangeAccumulator=void 0
var r=n(25),i=n(79),o=n(23),a=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.assert)(t==i.Change.CHILD_ADDED||t==i.Change.CHILD_CHANGED||t==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.")
var a=(0,r.safeGet)(this.changeMap_,n)
if(a){var s=a.type
if(t==i.Change.CHILD_ADDED&&s==i.Change.CHILD_REMOVED)this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,a.snapshotNode)
else if(t==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_ADDED)delete this.changeMap_[n]
else if(t==i.Change.CHILD_REMOVED&&s==i.Change.CHILD_CHANGED)this.changeMap_[n]=i.Change.childRemovedChange(n,a.oldSnap)
else if(t==i.Change.CHILD_CHANGED&&s==i.Change.CHILD_ADDED)this.changeMap_[n]=i.Change.childAddedChange(n,e.snapshotNode)
else{if(t!=i.Change.CHILD_CHANGED||s!=i.Change.CHILD_CHANGED)throw(0,o.assertionError)("Illegal combination of changes: "+e+" occurred after "+a)
this.changeMap_[n]=i.Change.childChangedChange(n,e.snapshotNode,a.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return(0,r.getValues)(this.changeMap_)},e}()
t.ChildChangeAccumulator=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.WriteTreeCompleteChildSource=t.NO_COMPLETE_CHILD_SOURCE=t.NoCompleteChildSource_=void 0
var r=n(75),i=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()
t.NoCompleteChildSource_=i
var o=(t.NO_COMPLETE_CHILD_SOURCE=new i,function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache()
if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e)
var n=null!=this.optCompleteServerCache_?new r.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache()
return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e)
return 0===i.length?null:i[0]},e}())
t.WriteTreeCompleteChildSource=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.EventGenerator=void 0
var r=n(48),i=n(79),o=n(23),a=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,o=[],a=[]
return e.forEach(function(e){e.type===i.Change.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&a.push(i.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,i.Change.CHILD_REMOVED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_ADDED,e,n,t),this.generateEventsForType_(o,i.Change.CHILD_MOVED,a,n,t),this.generateEventsForType_(o,i.Change.CHILD_CHANGED,e,n,t),this.generateEventsForType_(o,i.Change.VALUE,e,n,t),o},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter(function(e){return e.type===t})
a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=o.materializeSingleChange_(t,i)
r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw(0,o.assertionError)("Should only compare child_ events.")
var n=new r.NamedNode(e.childName,e.snapshotNode),i=new r.NamedNode(t.childName,t.snapshotNode)
return this.index_.compare(n,i)},e}()
t.EventGenerator=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.WriteTreeRef=t.WriteTree=void 0
var r=n(25),i=n(23),o=n(36),a=n(85),s=n(49),u=n(54),c=function(){function e(){this.visibleWrites_=a.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new l(e,this)},e.prototype.addOverwrite=function(e,t,n,r){(0,i.assert)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){(0,i.assert)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t]
if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});(0,i.assert)(n>=0,"removeWrite called with nonexistent writeId.")
var o=this.allWrites_[n]
this.allWrites_.splice(n,1)
for(var a=o.visible,s=!1,u=this.allWrites_.length-1;a&&u>=0;){var c=this.allWrites_[u]
c.visible&&(u>=n&&this.recordContainsPath_(c,o.path)?a=!1:o.path.contains(c.path)&&(s=!0)),u--}if(a){if(s)return this.resetTree_(),!0
if(o.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(o.path)
else{var l=o.children;(0,r.forEach)(l,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(o.path.child(e))})}return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var a=this.visibleWrites_.childCompoundWrite(t)
if(!i&&a.isEmpty())return n
if(i||null!=n||a.hasCompleteWrite(o.Path.Empty)){var s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},c=e.layerTree_(this.allWrites_,s,t),l=n||u.ChildrenNode.EMPTY_NODE
return c.apply(l)}return null}var h=this.visibleWrites_.getCompleteNode(t)
if(null!=h)return h
var p=this.visibleWrites_.childCompoundWrite(t)
if(p.isEmpty())return n
if(null!=n||p.hasCompleteWrite(o.Path.Empty)){var l=n||u.ChildrenNode.EMPTY_NODE
return p.apply(l)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=u.ChildrenNode.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e)
if(r)return r.isLeafNode()||r.forEachChild(s.PRIORITY_INDEX,function(e,t){n=n.updateImmediateChild(e,t)}),n
if(t){var i=this.visibleWrites_.childCompoundWrite(e)
return t.forEachChild(s.PRIORITY_INDEX,function(e,t){var r=i.childCompoundWrite(new o.Path(e)).apply(t)
n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){(0,i.assert)(n||r,"Either existingEventSnap or existingServerSnap must exist")
var o=e.child(t)
if(this.visibleWrites_.hasCompleteWrite(o))return null
var a=this.visibleWrites_.childCompoundWrite(o)
return a.isEmpty()?r.getChild(t):a.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r)
if(null!=i)return i
if(n.isCompleteForChild(t)){return this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t))}return null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,a){var s,u=this.visibleWrites_.childCompoundWrite(e),c=u.getCompleteNode(o.Path.Empty)
if(null!=c)s=c
else{if(null==t)return[]
s=u.apply(t)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[]
for(var l=[],h=a.getCompare(),p=i?s.getReverseIteratorFrom(n,a):s.getIteratorFrom(n,a),d=p.getNext();d&&l.length<r;)0!==h(d,n)&&l.push(d),d=p.getNext()
return l},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!(0,r.findKey)(e.children,function(n,r){return e.path.child(r).contains(t)})},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,o.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var s=a.CompoundWrite.Empty,u=0;u<e.length;++u){var c=e[u]
if(t(c)){var l=c.path,h=void 0
if(c.snap)n.contains(l)?(h=o.Path.relativePath(n,l),s=s.addWrite(h,c.snap)):l.contains(n)&&(h=o.Path.relativePath(l,n),s=s.addWrite(o.Path.Empty,c.snap.getChild(h)))
else{if(!c.children)throw(0,i.assertionError)("WriteRecord should have .snap or .children")
if(n.contains(l))h=o.Path.relativePath(n,l),s=s.addWrites(h,c.children)
else if(l.contains(n))if(h=o.Path.relativePath(l,n),h.isEmpty())s=s.addWrites(o.Path.Empty,c.children)
else{var p=(0,r.safeGet)(c.children,h.getFront())
if(p){var d=p.getChild(h.popFront())
s=s.addWrite(o.Path.Empty,d)}}}}}return s},e}()
t.WriteTree=c
var l=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}()
t.WriteTreeRef=l},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundWrite=void 0
var r=n(70),i=n(36),o=n(25),a=n(48),s=n(49),u=n(23),c=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new r.ImmutableTree(n))
var o=this.writeTree_.findRootMostValueAndPath(t)
if(null!=o){var a=o.path,s=o.value,u=i.Path.relativePath(a,t)
return s=s.updateChild(u,n),new e(this.writeTree_.set(a,s))}var c=new r.ImmutableTree(n)
return new e(this.writeTree_.setTree(t,c))},e.prototype.addWrites=function(e,t){var n=this
return(0,o.forEach)(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,r.ImmutableTree.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e)
return null!=t?this.writeTree_.get(t.path).getChild(i.Path.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value
return null!=t?t.isLeafNode()||t.forEachChild(s.PRIORITY_INDEX,function(t,n){e.push(new a.NamedNode(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new a.NamedNode(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this
var n=this.getCompleteNode(t)
return new e(null!=n?new r.ImmutableTree(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(i.Path.Empty,this.writeTree_,t)},e.Empty=new e(new r.ImmutableTree(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value)
var i=null
return n.children.inorderTraversal(function(n,o){".priority"===n?((0,u.assert)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e.applySubtreeWrite_(t.child(n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r},e}()
t.CompoundWrite=c},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotHolder=void 0
var r=n(54),i=function(){function e(){this.rootNode_=r.ChildrenNode.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}()
t.SnapshotHolder=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTokenProvider=void 0
var r=n(22),i=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?((0,r.log)("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. '
"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',(0,r.warn)(e)},e}()
t.AuthTokenProvider=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.StatsManager=void 0
var r=n(89),i=function(){function e(){}return e.getCollection=function(e){var t=e.toString()
return this.collections_[t]||(this.collections_[t]=new r.StatsCollection),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString()
return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}()
t.StatsManager=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.StatsCollection=void 0
var r=n(18),i=n(25),o=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,i.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,r.deepCopy)(this.counters_)},e}()
t.StatsCollection=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.StatsReporter=void 0
var r=n(25),i=n(22),o=n(91),a=1e4,s=3e4,u=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new o.StatsListener(e)
var n=a+(s-a)*Math.random();(0,i.setTimeoutNonBlocking)(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},o=!1;(0,r.forEach)(t,function(t,i){i>0&&(0,r.contains)(e.statsToReport_,t)&&(n[t]=i,o=!0)}),o&&this.server_.reportStats(n),(0,i.setTimeoutNonBlocking)(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}()
t.StatsReporter=u},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.StatsListener=void 0
var r=n(25),i=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,r.clone)(e)
return this.last_&&(0,r.forEach)(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}()
t.StatsListener=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.EventList=t.EventQueue=void 0
var r=n(22),i=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath()
null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new o(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++
for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n]
if(r){e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}}t&&(this.eventLists_=[]),this.recursionDepth_--},e}()
t.EventQueue=i
var o=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e]
if(null!==t){this.events_[e]=null
var n=t.getEventRunner()
r.logger&&(0,r.log)("event: "+t.toString()),(0,r.exceptionGuard)(n)}}},e.prototype.getPath=function(){return this.path_},e}()
t.EventList=o},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentConnection=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(25),s=n(30),u=n(23),c=n(22),l=n(36),h=n(94),p=n(96),d=n(97),f=n(98),v=n(24),y=n(34),_=n(103),g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=1e3,b=3e5,E=function(e){function t(n,r,i,o,a,s){var u=e.call(this)||this
if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=(0,c.logWrapper)("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=m,u.maxReconnectDelay_=b,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!(0,y.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms")
return u.scheduleConnect_(0),h.VisibilityMonitor.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&p.OnlineMonitor.getInstance().on("online",u.onOnline_,u),u}return g(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t}
this.log_((0,s.stringify)(i)),(0,u.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString()
this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},(0,u.assert)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,u.assert)(!this.listens_[o][i],"listen() called twice for same path/queryId.")
var a={onComplete:r,hashFn:t,query:e,tag:n}
this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier()
this.log_("Listen on "+i+" for "+o)
var a={p:i}
e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s
t.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===(void 0===e?"undefined":r(e))&&(0,a.contains)(e,"w")){var n=(0,a.safeGet)(e,"w")
if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();(0,c.warn)("Using an unspecified index. Consider adding "+i+" at "+o+" to your security rules for better performance")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,d.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this
if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,d.isValidFormat)(t)?"auth":"gauth",i={cred:t}
null===this.authOverride_?i.noauth=!0:"object"===r(this.authOverride_)&&(i.authvar=this.authOverride_),this.sendRequest(n,i,function(n){var r=n.s,i=n.d||"error"
e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier()
this.log_("Unlisten called for "+n+" "+r),(0,u.assert)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t)
var i={p:e}
r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n}
this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n}
void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++
var a=this.outstandingPuts_.length-1
this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete
this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this
if(this.connected_){var n={c:e}
this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d
t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,s.stringify)(e))
var t=e.r,n=this.requestCBHash_[t]
n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error
"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):(0,c.error)("Unrecognized action received from server: "+(0,s.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,u.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=m,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=m,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_
e>3e4&&(this.reconnectDelay_=m),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()
var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t)
n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null
var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,l=null,h=function(){l?l.close():(s=!0,r())},p=function(e){(0,u.assert)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}
this.realtime_={close:h,sendRequest:p}
var d=this.forceTokenRefresh_
this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){s?(0,c.log)("getToken() completed but was canceled"):((0,c.log)("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,l=new f.Connection(i,o.repoInfo_,e,n,r,function(e){(0,c.warn)(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(e){o.log_("Failed to get token: "+e),s||(v.CONSTANTS.NODE_ADMIN&&(0,c.warn)(e),h())})}},t.prototype.interrupt=function(e){(0,c.log)("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){(0,c.log)("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,a.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=m,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime()
this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e]
t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n
n=t?t.map(function(e){return(0,c.ObjectToUniqueKey)(e)}).join("$"):"default"
var r=this.removeListen_(e,n)
r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new l.Path(e).toString()
return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===(0,a.getCount)(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){(0,c.log)("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&"undefined"!=typeof console&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this
this.tryAuth(),(0,a.forEach)(this.listens_,function(t,n){(0,a.forEach)(n,function(t,n){e.sendListen_(n)})})
for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t)
for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift()
this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js"
v.CONSTANTS.NODE_ADMIN?t="admin_node":v.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+o.default.SDK_VERSION.replace(/\./g,"-")]=1,(0,y.isMobileCordova)()?e["framework.cordova"]=1:(0,y.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=p.OnlineMonitor.getInstance().currentlyOnline()
return(0,a.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(_.ServerActions)
t.PersistentConnection=E},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.VisibilityMonitor=void 0
var r=n(95),i=n(23),o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(e){function t(){var t,n,r=e.call(this,["visible"])||this
return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t]
e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return o(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,i.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(r.EventEmitter)
t.VisibilityMonitor=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0
var r=n(23),i=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,r.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]
if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n})
var r=this.getInitialEvent(e)
r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e)
for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,r.assert)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}()
t.EventEmitter=i},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineMonitor=void 0
var r=n(23),i=n(95),o=n(34),a=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e){function t(){var t=e.call(this,["online"])||this
return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return a(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,r.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(i.EventEmitter)
t.OnlineMonitor=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.isAdmin=t.isValidFormat=t.issuedAtTime=t.isValidTimestamp=t.decode=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(22),o=n(30),a=t.decode=function(e){var t={},n={},r={},a=""
try{var s=e.split(".")
t=(0,o.jsonEval)((0,i.base64Decode)(s[0])||""),n=(0,o.jsonEval)((0,i.base64Decode)(s[1])||""),a=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:a}}
t.isValidTimestamp=function(e){var t,n,i=a(e).claims,o=Math.floor((new Date).getTime()/1e3)
return"object"===(void 0===i?"undefined":r(i))&&(i.hasOwnProperty("nbf")?t=i.nbf:i.hasOwnProperty("iat")&&(t=i.iat),n=i.hasOwnProperty("exp")?i.exp:t+86400),o&&t&&n&&o>=t&&o<=n},t.issuedAtTime=function(e){var t=a(e).claims
return"object"===(void 0===t?"undefined":r(t))&&t.hasOwnProperty("iat")?t.iat:null},t.isValidFormat=function(e){var t=a(e),n=t.claims
return!!t.signature&&!!n&&"object"===(void 0===n?"undefined":r(n))&&n.hasOwnProperty("iat")},t.isAdmin=function(e){var t=a(e).claims
return"object"===(void 0===t?"undefined":r(t))&&!0===t.admin}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0
var r=n(22),i=n(31),o=n(38),a=n(99),s=function(){function e(e,t,n,i,o,s,u){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=(0,r.logWrapper)("c:"+this.id+":"),this.transportManager_=new a.TransportManager(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport()
this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0
var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_)
this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,i)},Math.floor(0))
var o=t.healthyTimeout||0
o>0&&(this.healthyTimeout_=(0,r.setTimeoutNonBlocking)(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this
return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this
return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e}
this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t
"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=(0,r.requireKey)("t",e),n=(0,r.requireKey)("d",e)
if("c"==t)this.onSecondaryControl_(n)
else{if("d"!=t)throw new Error("Unknown protocol layer: "+t)
this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=(0,r.requireKey)("t",e),n=(0,r.requireKey)("d",e)
"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},e.prototype.onControl_=function(e){var t=(0,r.requireKey)("t",e)
if("d"in e){var n=e.d
if("h"===t)this.onHandshake_(n)
else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_
for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i])
this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?(0,r.error)("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):(0,r.error)("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,i=e.h
this.sessionId=e.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),o.PROTOCOL_VERSION!==n&&(0,r.warn)("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport()
e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this
this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0
var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_)
this.secondaryConn_.open(n,i),(0,r.setTimeoutNonBlocking)(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this
this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):(0,r.setTimeoutNonBlocking)(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_
this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected"
this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}()
t.Connection=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.TransportManager=void 0
var r=n(100),i=n(102),o=n(22),a=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed()
if(t.webSocketOnly&&(n||(0,o.warn)("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[i.WebSocketConnection]
else{var a=this.transports_=[];(0,o.each)(e.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&a.push(t)})}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0]
throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}()
t.TransportManager=a},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseIFrameScriptHolder=t.BrowserPollConnection=t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM=t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM=t.FIREBASE_LONGPOLL_DATA_PARAM=t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET=t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM=t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM=t.FIREBASE_LONGPOLL_SERIAL_PARAM=t.FIREBASE_LONGPOLL_PW_PARAM=t.FIREBASE_LONGPOLL_ID_PARAM=t.FIREBASE_LONGPOLL_DATA_CB_NAME=t.FIREBASE_LONGPOLL_COMMAND_CB_NAME=t.FIREBASE_LONGPOLL_CLOSE_COMMAND=t.FIREBASE_LONGPOLL_START_PARAM=void 0
var r=n(22),i=n(66),o=n(88),a=n(101),s=n(38),u=n(30),c=n(34),l=t.FIREBASE_LONGPOLL_START_PARAM="start",h=t.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",p=t.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",d=t.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",f=t.FIREBASE_LONGPOLL_ID_PARAM="id",v=t.FIREBASE_LONGPOLL_PW_PARAM="pw",y=t.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",_=t.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",g=t.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",m=t.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",b=t.FIREBASE_LONGPOLL_DATA_PARAM="d",E=t.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",w=t.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",S=function(){function e(e,t,n,i){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=(0,r.logWrapper)(e),this.stats_=o.StatsManager.getCollection(t),this.urlFn=function(e){return t.connectionURL(s.LONG_POLLING,e)}}return e.prototype.open=function(e,t){var n=this
this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new a.PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),(0,r.executeWhenDOMReady)(function(){if(!n.isClosed_){n.scriptTagHolder=new C(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
var r=e[0],i=e[1],o=e[2]
e[3],e[4]
if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r==l)n.id=i,n.password=o
else{if(r!==h)throw new Error("Unrecognized command received: "+r)
i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
var r=e[0],i=e[1]
n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn)
var e={}
e[l]="t",e[y]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[_]=n.scriptTagHolder.uniqueCallbackIdentifier),e[s.VERSION_PARAM]=s.PROTOCOL_VERSION,n.transportSessionId&&(e[s.TRANSPORT_SESSION_PARAM]=n.transportSessionId),n.lastSessionId&&(e[s.LAST_SESSION_PARAM]=n.lastSessionId),!(0,c.isNodeSdk)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(s.FORGE_DOMAIN)&&(e[s.REFERER_PARAM]=s.FORGE_REF)
var t=n.urlFn(e)
n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!(0,r.isChromeExtensionContentScript)()&&!(0,r.isWindowsStoreApp)()&&!(0,c.isNodeSdk)()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,u.stringify)(e)
this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length)
for(var n=(0,r.base64Encode)(t),i=(0,r.splitStringBySize)(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,c.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe")
var n={}
n[w]="t",n[f]=e,n[v]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,u.stringify)(e).length
this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}()
t.BrowserPollConnection=S
var C=function(){function e(t,n,o,a){if(this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,c.isNodeSdk)())this.commandCB=t,this.onMessageCB=n
else{this.uniqueCallbackIdentifier=(0,r.LUIDGenerator)(),window[p+this.uniqueCallbackIdentifier]=t,window[d+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_()
var s=""
if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){s='<script>document.domain="'+document.domain+'";<\/script>'}var u="<html><body>"+s+"</body></html>"
try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(e){(0,r.log)("frame writing exception"),e.stack&&(0,r.log)(e.stack),(0,r.log)(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe")
if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready."
document.body.appendChild(e)
try{e.contentWindow.document||(0,r.log)("No IE domain setting required")}catch(n){var t=document.domain
e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var t=this
if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),(0,c.isNodeSdk)()&&this.myID){var n={}
n[E]="t",n[f]=this.myID,n[v]=this.myPW
var r=this.urlFn(n)
e.nodeRestRequest(r)}var i=this.onDisconnect
i&&(this.onDisconnect=null,i())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++
var e={}
e[f]=this.myID,e[v]=this.myPW,e[y]=this.currentSerial
for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break
var i=this.pendingSegs.shift()
n=n+"&"+g+r+"="+i.seg+"&"+m+r+"="+i.ts+"&"+b+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this
this.outstandingRequests.add(t,1)
var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3)),o=function(){clearTimeout(i),r()}
this.addTag(e,o)},e.prototype.addTag=function(e,t){var n=this;(0,c.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return
var i=n.myIFrame.doc.createElement("script")
i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState
e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){(0,r.log)("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))},e}()
t.FirebaseIFrameScriptHolder=C},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.PacketReceiver=void 0
var r=n(22),i=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this
this.pendingResponses[e]=t
for(var i=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=i.pendingResponses[i.currentResponseNum]
delete i.pendingResponses[i.currentResponseNum]
for(var t=0;t<e.length;++t)!function(t){e[t]&&(0,r.exceptionGuard)(function(){n.onMessage_(e[t])})}(t)
if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break"
i.currentResponseNum++}())break}},e}()
t.PacketReceiver=i},function(e,t,n){(function(e){"use strict"
function r(e){f=e}Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketConnection=void 0,t.setWebSocketImpl=r
var i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(23),s=n(22),u=n(88),c=n(38),l=n(24),h=n(31),p=n(30),d=n(34),f=null
"undefined"!=typeof MozWebSocket?f=MozWebSocket:"undefined"!=typeof WebSocket&&(f=WebSocket)
var v=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=(0,s.logWrapper)(this.connId),this.stats_=u.StatsManager.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(e,t,n){var r={}
return r[c.VERSION_PARAM]=c.PROTOCOL_VERSION,!(0,d.isNodeSdk)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(c.FORGE_DOMAIN)&&(r[c.REFERER_PARAM]=c.FORGE_REF),t&&(r[c.TRANSPORT_SESSION_PARAM]=t),n&&(r[c.LAST_SESSION_PARAM]=n),e.connectionURL(c.WEBSOCKET,r)},t.prototype.open=function(t,n){var r=this
this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.PersistentStorage.set("previous_websocket_failure",!0)
try{if((0,d.isNodeSdk)()){var i=l.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+c.PROTOCOL_VERSION+"/"+o.default.SDK_VERSION+"/"+e.platform+"/"+i}},s=e.env,u=0==this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy
u&&(a.proxy={origin:u}),this.mySock=new f(this.connURL,[],a)}else this.mySock=new f(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.")
var p=e.message||e.data
return p&&this.log_(p),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.")
var t=e.message||e.data
t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1
if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n)
r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==f&&!t.forceDisallow_},t.previouslyFailed=function(){return h.PersistentStorage.isInMemoryStorage||!0===h.PersistentStorage.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.PersistentStorage.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("")
this.frames=null
var n=(0,p.jsonEval)(t)
this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if((0,a.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e)
if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data
if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t)
else{var n=this.extractFrameCount_(t)
null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive()
var t=(0,p.stringify)(e)
this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length)
var n=(0,s.splitStringBySize)(t,16384)
n.length>1&&this.sendString_(String(n.length))
for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this
clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}()
t.WebSocketConnection=v}).call(t,n(16))},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}()
t.ServerActions=n},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.ReadonlyRestClient=void 0
var r=n(23),i=n(22),o=n(30),a=n(25),s=n(105),u=n(103),c=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(t,n,r){var o=e.call(this)||this
return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.log_=(0,i.logWrapper)("p:rest:"),o.listens_={},o}return c(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,r.assert)(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString()
this.log_("Listen called for "+s+" "+e.queryIdentifier())
var u=t.getListenId_(e,r),c={}
this.listens_[u]=c
var l=e.getQueryParams().toRestQueryStringParameters()
this.restRequest_(s+".json",l,function(e,t){var n=t
if(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),(0,a.safeGet)(o.listens_,u)===c){var l
l=e?401==e?"permission_denied":"rest_error:"+e:"ok",i(l,null)}})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n)
delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this
void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var u=a&&a.accessToken
u&&(t.auth=u)
var c=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?"+(0,s.querystring)(t)
r.log_("Sending REST request for "+c)
var l=new XMLHttpRequest
l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText)
var e=null
if(l.status>=200&&l.status<300){try{e=(0,o.jsonEval)(l.responseText)}catch(e){(0,i.warn)("Failed to parse JSON response for "+c+": "+l.responseText)}n(null,e)}else 401!==l.status&&404!==l.status&&(0,i.warn)("Got unsuccessful REST response for "+c+" Status: "+l.status),n(l.status)
n=null}},l.open("GET",c,!0),l.send()})},t}(u.ServerActions)
t.ReadonlyRestClient=l},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.querystringDecode=t.querystring=void 0
var r=n(25)
t.querystring=function(e){var t=[]
return(0,r.forEach)(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={}
return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=")
t[n[0]]=n[1]}}),t}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParams=void 0
var r=n(23),i=n(22),o=n(46),a=n(49),s=n(52),u=n(59),c=n(78),l=n(107),h=n(108),p=n(30),d=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=a.PRIORITY_INDEX}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return(0,r.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,r.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:i.MIN_NAME},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,r.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,r.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:i.MAX_NAME},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,r.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e
return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_()
return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_()
return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_()
return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_()
return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_()
return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_()
return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={}
if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_
var r=this.viewFrom_
""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==a.PRIORITY_INDEX&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==a.PRIORITY_INDEX},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new c.IndexedFilter(this.getIndex()):this.hasLimit()?new l.LimitedFilter(this):new h.RangedFilter(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={}
if(this.isDefault())return n
var i
return this.index_===a.PRIORITY_INDEX?i=t.PRIORITY_INDEX:this.index_===s.VALUE_INDEX?i=t.VALUE_INDEX:this.index_===o.KEY_INDEX?i=t.KEY_INDEX:((0,r.assert)(this.index_ instanceof u.PathIndex,"Unrecognized index type!"),i=this.index_.toString()),n[t.ORDER_BY]=(0,p.stringify)(i),this.startSet_&&(n[t.START_AT]=(0,p.stringify)(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+(0,p.stringify)(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=(0,p.stringify)(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+(0,p.stringify)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}()
t.QueryParams=d},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.LimitedFilter=void 0
var r=n(108),i=n(54),o=n(48),a=n(23),s=n(79),u=function(){function e(e){this.rangedFilter_=new r.RangedFilter(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,a,s){return this.rangedFilter_.matches(new o.NamedNode(t,n))||(n=i.ChildrenNode.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,a,s):this.fullLimitUpdateChild_(e,t,n,a,s)},e.prototype.updateFullNode=function(e,t,n){var r
if(t.isLeafNode()||t.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_)
else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.index_)
var o=void 0
o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_)
for(var a=0;o.hasNext()&&a<this.limit_;){var s=o.getNext(),u=void 0
if(!(u=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break
r=r.updateImmediateChild(s.name,s.node),a++}}else{r=t.withIndex(this.index_),r=r.updatePriority(i.ChildrenNode.EMPTY_NODE)
var c=void 0,l=void 0,h=void 0,o=void 0
if(this.reverse_){o=r.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost()
var p=this.index_.getCompare()
h=function(e,t){return p(t,e)}}else o=r.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare()
for(var a=0,d=!1;o.hasNext();){var s=o.getNext()
!d&&h(c,s)<=0&&(d=!0)
var u=d&&a<this.limit_&&h(s,l)<=0
u?a++:r=r.updateImmediateChild(s.name,i.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,u){var c
if(this.reverse_){var l=this.index_.getCompare()
c=function(e,t){return l(t,e)}}else c=this.index_.getCompare()
var h=e;(0,a.assert)(h.numChildren()==this.limit_,"")
var p=new o.NamedNode(t,n),d=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),f=this.rangedFilter_.matches(p)
if(h.hasChild(t)){for(var v=h.getImmediateChild(t),y=r.getChildAfterChild(this.index_,d,this.reverse_);null!=y&&(y.name==t||h.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_)
var _=null==y?1:c(y,p)
if(f&&!n.isEmpty()&&_>=0)return null!=u&&u.trackChildChange(s.Change.childChangedChange(t,n,v)),h.updateImmediateChild(t,n)
null!=u&&u.trackChildChange(s.Change.childRemovedChange(t,v))
var g=h.updateImmediateChild(t,i.ChildrenNode.EMPTY_NODE)
return null!=y&&this.rangedFilter_.matches(y)?(null!=u&&u.trackChildChange(s.Change.childAddedChange(y.name,y.node)),g.updateImmediateChild(y.name,y.node)):g}return n.isEmpty()?e:f&&c(d,p)>=0?(null!=u&&(u.trackChildChange(s.Change.childRemovedChange(d.name,d.node)),u.trackChildChange(s.Change.childAddedChange(t,n))),h.updateImmediateChild(t,n).updateImmediateChild(d.name,i.ChildrenNode.EMPTY_NODE)):e},e}()
t.LimitedFilter=u},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.RangedFilter=void 0
var r=n(78),i=n(49),o=n(48),a=n(54),s=function(){function e(t){this.indexedFilter_=new r.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,s){return this.matches(new o.NamedNode(t,n))||(n=a.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=a.ChildrenNode.EMPTY_NODE)
var r=t.withIndex(this.index_)
r=r.updatePriority(a.ChildrenNode.EMPTY_NODE)
var s=this
return t.forEachChild(i.PRIORITY_INDEX,function(e,t){s.matches(new o.NamedNode(e,t))||(r=r.updateImmediateChild(e,a.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName()
return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName()
return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}()
t.RangedFilter=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.RepoManager=void 0
var r=n(25),i=n(63),o=n(22),a=n(35),s=n(42)
n(110)
var u,c=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return u||(u=new e),u},e.prototype.interrupt=function(){for(var e in this.repos_)this.repos_[e].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)this.repos_[e].resume()},e.prototype.databaseFromApp=function(e){var t=e.options.databaseURL
void 0===t&&(0,o.fatal)("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().")
var n=(0,a.parseRepoInfo)(t),r=n.repoInfo
return(0,s.validateUrl)("Invalid Firebase Database URL",1,n),n.path.isEmpty()||(0,o.fatal)("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(r,e).database},e.prototype.deleteRepo=function(e){(0,r.safeGet)(this.repos_,e.app.name)!==e&&(0,o.fatal)("Database "+e.app.name+" has already been deleted."),e.interrupt(),delete this.repos_[e.app.name]},e.prototype.createRepo=function(e,t){var n=(0,r.safeGet)(this.repos_,t.name)
return n&&(0,o.fatal)("FIREBASE INTERNAL ERROR: Database initialized multiple times."),n=new i.Repo(e,this.useRestClient_,t),this.repos_[t.name]=n,n},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}()
t.RepoManager=c},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionStatus=void 0
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(23),o=n(39),a=n(61),s=n(36),u=n(111),c=n(49),l=n(22),h=n(64),p=n(42),d=n(25),f=n(53),v=n(54),y=n(63),_=t.TransactionStatus=void 0
!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(_||(t.TransactionStatus=_={})),y.Repo.MAX_TRANSACTION_RETRIES_=25,y.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new u.Tree},y.Repo.prototype.startTransaction=function(e,t,n,s){this.log_("transaction on "+e)
var u=function(){},y=new o.Reference(this,e)
y.on("value",u)
var g=function(){y.off("value",u)},m={path:e,update:t,onComplete:n,status:null,order:(0,l.LUIDGenerator)(),applyLocally:s,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},b=this.getLatestState_(e)
m.currentInputSnapshot=b
var E=m.update(b.val())
if(void 0===E){if(m.unwatcher(),m.currentOutputSnapshotRaw=null,m.currentOutputSnapshotResolved=null,m.onComplete){var w=new a.DataSnapshot(m.currentInputSnapshot,new o.Reference(this,m.path),c.PRIORITY_INDEX)
m.onComplete(null,!1,w)}}else{(0,p.validateFirebaseData)("transaction failed: Data returned ",E,m.path),m.status=_.RUN
var S=this.transactionQueueTree_.subTree(e),C=S.getValue()||[]
C.push(m),S.setValue(C)
var T=void 0
if("object"===(void 0===E?"undefined":r(E))&&null!==E&&(0,d.contains)(E,".priority"))T=(0,d.safeGet)(E,".priority"),(0,i.assert)((0,p.isValidPriority)(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")
else{T=(this.serverSyncTree_.calcCompleteEventCache(e)||v.ChildrenNode.EMPTY_NODE).getPriority().val()}T=T
var P=this.generateServerValues(),I=(0,f.nodeFromJSON)(E,T),N=(0,h.resolveDeferredValueSnapshot)(I,P)
m.currentOutputSnapshotRaw=I,m.currentOutputSnapshotResolved=N,m.currentWriteId=this.getNextWriteId_()
var O=this.serverSyncTree_.applyUserOverwrite(e,N,m.currentWriteId,m.applyLocally)
this.eventQueue_.raiseEventsForChangedPath(e,O),this.sendReadyTransactions_()}},y.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||v.ChildrenNode.EMPTY_NODE},y.Repo.prototype.sendReadyTransactions_=function(e){var t=this
if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);(0,i.assert)(n.length>0,"Sending zero length transaction queue")
n.every(function(e){return e.status===_.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},y.Repo.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),u=this.getLatestState_(e,r),h=u,p=u.hash(),d=0;d<t.length;d++){var f=t[d];(0,i.assert)(f.status===_.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=_.SENT,f.retryCount++
var v=s.Path.relativePath(e,f.path)
h=h.updateChild(v,f.currentOutputSnapshotRaw)}var y=h.val(!0),g=e
this.server_.put(g.toString(),y,function(r){n.log_("transaction put response",{path:g.toString(),status:r})
var i=[]
if("ok"===r){for(var s=[],u=0;u<t.length;u++){if(t[u].status=_.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[u].currentWriteId)),t[u].onComplete){var h=t[u].currentOutputSnapshotResolved,p=new o.Reference(n,t[u].path),d=new a.DataSnapshot(h,p,c.PRIORITY_INDEX)
s.push(t[u].onComplete.bind(null,null,!0,d))}t[u].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i)
for(var u=0;u<s.length;u++)(0,l.exceptionGuard)(s[u])}else{if("datastale"===r)for(var u=0;u<t.length;u++)t[u].status===_.SENT_NEEDS_ABORT?t[u].status=_.NEEDS_ABORT:t[u].status=_.RUN
else{(0,l.warn)("transaction at "+g.toString()+" failed: "+r)
for(var u=0;u<t.length;u++)t[u].status=_.NEEDS_ABORT,t[u].abortReason=r}n.rerunTransactions_(e)}},p)},y.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t)
return this.rerunTransactionQueue_(r,n),n},y.Repo.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],u=[],v=e.filter(function(e){return e.status===_.RUN}),g=v.map(function(e){return e.currentWriteId}),m=0;m<e.length;m++){var b=e[m],E=s.Path.relativePath(t,b.path),w=!1,S=void 0
if((0,i.assert)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),b.status===_.NEEDS_ABORT)w=!0,S=b.abortReason,u=u.concat(this.serverSyncTree_.ackUserWrite(b.currentWriteId,!0))
else if(b.status===_.RUN)if(b.retryCount>=y.Repo.MAX_TRANSACTION_RETRIES_)w=!0,S="maxretry",u=u.concat(this.serverSyncTree_.ackUserWrite(b.currentWriteId,!0))
else{var C=this.getLatestState_(b.path,g)
b.currentInputSnapshot=C
var T=e[m].update(C.val())
if(void 0!==T){(0,p.validateFirebaseData)("transaction failed: Data returned ",T,b.path)
var P=(0,f.nodeFromJSON)(T),I="object"===(void 0===T?"undefined":r(T))&&null!=T&&(0,d.contains)(T,".priority")
I||(P=P.updatePriority(C.getPriority()))
var N=b.currentWriteId,O=this.generateServerValues(),k=(0,h.resolveDeferredValueSnapshot)(P,O)
b.currentOutputSnapshotRaw=P,b.currentOutputSnapshotResolved=k,b.currentWriteId=this.getNextWriteId_(),g.splice(g.indexOf(N),1),u=u.concat(this.serverSyncTree_.applyUserOverwrite(b.path,k,b.currentWriteId,b.applyLocally)),u=u.concat(this.serverSyncTree_.ackUserWrite(N,!0))}else w=!0,S="nodata",u=u.concat(this.serverSyncTree_.ackUserWrite(b.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,u),u=[],w&&(e[m].status=_.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[m].unwatcher),e[m].onComplete))if("nodata"===S){var R=new o.Reference(this,e[m].path),A=e[m].currentInputSnapshot,D=new a.DataSnapshot(A,R,c.PRIORITY_INDEX)
n.push(e[m].onComplete.bind(null,null,!1,D))}else n.push(e[m].onComplete.bind(null,new Error(S),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_)
for(var m=0;m<n.length;m++)(0,l.exceptionGuard)(n[m])
this.sendReadyTransactions_()}},y.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront()
return n},y.Repo.prototype.buildTransactionQueue_=function(e){var t=[]
return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},y.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue()
if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i])
e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},y.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue()
if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==_.COMPLETED&&(n[r]=n[i],r++)
n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},y.Repo.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e)
return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},y.Repo.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue()
if(null!==t){for(var n=[],r=[],o=-1,a=0;a<t.length;a++)if(t[a].status===_.SENT_NEEDS_ABORT);else if(t[a].status===_.SENT)(0,i.assert)(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=_.SENT_NEEDS_ABORT,t[a].abortReason="set"
else if((0,i.assert)(t[a].status===_.RUN,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[a].currentWriteId,!0)),t[a].onComplete){n.push(t[a].onComplete.bind(null,new Error("set"),!1,null))}-1===o?e.setValue(null):t.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r)
for(var a=0;a<n.length;a++)(0,l.exceptionGuard)(n[a])}}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=t.TreeNode=void 0
var r=n(23),i=n(36),o=n(25),a=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}()
t.TreeNode=a
var s=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new a),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof i.Path?t:new i.Path(t),s=this;null!==(n=r.getFront());){s=new e(n,s,(0,o.safeGet)(s.node_.children,n)||new a),r=r.popFront()}return s},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){(0,r.assert)(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;(0,o.forEach)(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0
n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new i.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=(0,o.contains)(this.node_.children,e)
n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}()
t.Tree=s},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.interceptServerData=t.dataUpdateCount=t.statsIncrementCounter=t.stats=t.setSecurityDebugCallback=t.isWebSocketsAvailable=t.forceWebSockets=t.forceLongPolling=void 0
var r=n(102),i=n(100)
t.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},t.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},t.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},t.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},t.stats=function(e,t){e.repo.stats(t)},t.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},t.dataUpdateCount=function(e){return e.repo.dataUpdateCount},t.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.forceRestClient=t.listens=t.queryIdentifier=t.ConnectionTarget=t.hijackHash=t.RealTimeConnection=t.DataConnection=void 0
var r=n(37),i=n(93),o=n(109),a=n(98)
t.DataConnection=i.PersistentConnection
i.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},i.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)}
t.RealTimeConnection=a.Connection,t.hijackHash=function(e){var t=i.PersistentConnection.prototype.put
return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=t}},t.ConnectionTarget=r.RepoInfo,t.queryIdentifier=function(e){return e.queryIdentifier()},t.listens=function(e){return e.repo.persistentConnection_.listens_},t.forceRestClient=function(e){o.RepoManager.getInstance().forceRestClient(e)}},function(e,t,n){"use strict"
function r(e,t,n){return new c.Service(e,new s.XhrIoPool,n)}function i(e){var t={TaskState:a.TaskState,TaskEvent:a.TaskEvent,StringFormat:o.StringFormat,Storage:c.Service,Reference:u.Reference}
e.INTERNAL.registerService(h,r,t,void 0,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerStorage=i
var o=n(115),a=n(118),s=n(119),u=n(125),c=n(141),l=n(7),h="storage"
i(function(e){return e&&e.__esModule?e:{default:e}}(l).default)},function(e,t,n){"use strict"
function r(e){switch(e){case d.RAW:case d.BASE64:case d.BASE64URL:case d.DATA_URL:return
default:throw"Expected one of the event types: ["+d.RAW+", "+d.BASE64+", "+d.BASE64URL+", "+d.DATA_URL+"]."}}function i(e,t){switch(e){case d.RAW:return new f(o(t))
case d.BASE64:case d.BASE64URL:return new f(s(e,t))
case d.DATA_URL:return new f(u(t),c(t))}throw p.unknown()}function o(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n)
if(r<=127)t.push(r)
else if(r<=2047)t.push(192|r>>6,128|63&r)
else if(55296==(64512&r)){var i=n<e.length-1&&56320==(64512&e.charCodeAt(n+1))
if(i){var o=r,a=e.charCodeAt(++n)
r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function a(e){var t
try{t=decodeURIComponent(e)}catch(e){throw p.invalidFormat(d.DATA_URL,"Malformed data URL.")}return o(t)}function s(e,t){switch(e){case d.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_")
if(n||r){var i=n?"-":"_"
throw p.invalidFormat(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break
case d.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/")
if(o||a){var i=o?"+":"/"
throw p.invalidFormat(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}var s
try{s=atob(t)}catch(t){throw p.invalidFormat(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c)
return u}function u(e){var t=new v(e)
return t.base64?s(d.BASE64,t.rest):a(t.rest)}function c(e){return new v(e).contentType}function l(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}Object.defineProperty(t,"__esModule",{value:!0}),t.StringData=t.StringFormat=void 0,t.formatValidator=r,t.dataFromString=i,t.utf8Bytes_=o,t.percentEncodedBytes_=a,t.base64Bytes_=s,t.dataURLBytes_=u,t.dataURLContentType_=c
var h=n(116),p=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(h),d=t.StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},f=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}()
t.StringData=f
var v=function(){function e(e){this.base64=!1,this.contentType=null
var t=e.match(/^data:([^,]+)?,/)
if(null===t)throw p.invalidFormat(d.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>")
var n=t[1]||null
null!=n&&(this.base64=l(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}()},function(e,t,n){"use strict"
function r(e){return"storage/"+e}function i(){return new N(O.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function o(e){return new N(O.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a(e){return new N(O.BUCKET_NOT_FOUND,"Bucket '"+e+"' does not exist.")}function s(e){return new N(O.PROJECT_NOT_FOUND,"Project '"+e+"' does not exist.")}function u(e){return new N(O.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function c(){return new N(O.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function l(e){return new N(O.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function h(){return new N(O.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(e,t,n){return new N(O.INVALID_CHECKSUM,"Uploaded/downloaded object '"+e+"' has checksum '"+t+"' which does not match '"+n+"'. Please retry the upload/download.")}function d(){return new N(O.CANCELED,"User canceled the upload/download.")}function f(e){return new N(O.INVALID_EVENT_NAME,"Invalid event name '"+e+"'.")}function v(e){return new N(O.INVALID_URL,"Invalid URL '"+e+"'.")}function y(e){return new N(O.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function _(){return new N(O.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+I.configOption+"' property when initializing the app?")}function g(){return new N(O.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m(){return new N(O.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function b(){return new N(O.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E(e,t,n){return new N(O.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function w(e,t,n,r){var i,o
return e===t?(i=e,o=1===e?"argument":"arguments"):(i="between "+e+" and "+t,o="arguments"),new N(O.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function S(){return new N(O.APP_DELETED,"The Firebase app was deleted.")}function C(e){return new N(O.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function T(e,t){return new N(O.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function P(e){throw new N(O.INTERNAL_ERROR,"Internal error: "+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Code=t.errors=t.FirebaseStorageError=void 0,t.prependCode=r,t.unknown=i,t.objectNotFound=o,t.bucketNotFound=a,t.projectNotFound=s,t.quotaExceeded=u,t.unauthenticated=c,t.unauthorized=l,t.retryLimitExceeded=h,t.invalidChecksum=p,t.canceled=d,t.invalidEventName=f,t.invalidUrl=v,t.invalidDefaultBucket=y,t.noDefaultBucket=_,t.cannotSliceBlob=g,t.serverFileWrongSize=m,t.noDownloadURL=b,t.invalidArgument=E,t.invalidArgumentCount=w,t.appDeleted=S,t.invalidRootOperation=C,t.invalidFormat=T,t.internalError=P
var I=n(117),N=function(){function e(e,t){this.code_=r(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return r(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}()
t.FirebaseStorageError=N
var O=(t.errors={},t.Code={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"})},function(e,t){"use strict"
function n(e){e=e}Object.defineProperty(t,"__esModule",{value:!0}),t.setDomainBase=n
t.domainBase="https://firebasestorage.googleapis.com",t.downloadBase="https://firebasestorage.googleapis.com",t.apiBaseUrl="/v0",t.apiUploadBaseUrl="/v0",t.configOption="storageBucket",t.shortMaxOperationRetryTime=6e4,t.defaultMaxOperationRetryTime=12e4,t.defaultMaxUploadRetryTime=6e4,t.minSafeInteger=-9007199254740991},function(e,t){"use strict"
function n(e){switch(e){case r.RUNNING:case r.PAUSING:case r.CANCELING:return i.RUNNING
case r.PAUSED:return i.PAUSED
case r.SUCCESS:return i.SUCCESS
case r.CANCELED:return i.CANCELED
case r.ERROR:default:return i.ERROR}}Object.defineProperty(t,"__esModule",{value:!0}),t.taskStateFromInternalTaskState=n
var r=(t.TaskEvent={STATE_CHANGED:"state_changed"},t.InternalTaskState={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"}),i=t.TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"}},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.XhrIoPool=void 0
var r=n(120),i=function(){function e(){}return e.prototype.createXhrIo=function(){return new r.NetworkXhrIo},e}()
t.XhrIoPool=i},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkXhrIo=void 0
var i=n(116),o=r(i),a=n(121),s=r(a),u=n(122),c=r(u),l=n(123),h=r(l),p=n(124),d=r(p),f=function(){function e(){var e=this
this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=d.ErrorCode.NO_ERROR,this.sendPromise_=c.make(function(t,n){e.xhr_.addEventListener("abort",function(n){e.errorCode_=d.ErrorCode.ABORT,t(e)}),e.xhr_.addEventListener("error",function(n){e.errorCode_=d.ErrorCode.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(n){t(e)})})}return e.prototype.send=function(e,t,n,r){var i=this
if(this.sent_)throw o.internalError("cannot .send() more than once")
if(this.sent_=!0,this.xhr_.open(t,e,!0),h.isDef(r)){var a=r
s.forEach(a,function(e,t){i.xhr_.setRequestHeader(e,t.toString())})}return h.isDef(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw o.internalError("cannot .getErrorCode() before sending")
return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw o.internalError("cannot .getStatus() before sending")
try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw o.internalError("cannot .getResponseText() before sending")
return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){h.isDef(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){h.isDef(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}()
t.NetworkXhrIo=f},function(e,t){"use strict"
function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var r in e)n(e,r)&&t(r,e[r])}function i(e){if(null==e)return{}
var t={}
return r(e,function(e,n){t[e]=n}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.contains=n,t.forEach=r,t.clone=i},function(e,t,n){"use strict"
function r(e){return new a.PromiseImpl(e)}function i(e){return a.PromiseImpl.resolve(e)}function o(e){return a.PromiseImpl.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.make=r,t.resolve=i,t.reject=o
var a=n(11)},function(e,t){"use strict"
function n(e){return null!=e}function r(e){return void 0!==e}function i(e){return"function"==typeof e}function o(e){return"object"===(void 0===e?"undefined":p(e))}function a(e){return o(e)&&null!==e}function s(e){return o(e)&&!Array.isArray(e)}function u(e){return"string"==typeof e||e instanceof String}function c(e){return"number"==typeof e||e instanceof Number}function l(e){return h()&&e instanceof Blob}function h(){return"undefined"!=typeof Blob}Object.defineProperty(t,"__esModule",{value:!0})
var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}
t.isDef=n,t.isJustDef=r,t.isFunction=i,t.isObject=o,t.isNonNullObject=a,t.isNonArrayObject=s,t.isString=u,t.isNumber=c,t.isNativeBlob=l,t.isNativeBlobDefined=h},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=t.ErrorCode=void 0
!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(n||(t.ErrorCode=n={}))},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Reference=void 0
var i=n(126),o=r(i),a=n(132),s=n(116),u=r(s),c=n(129),l=n(127),h=r(l),p=n(121),d=r(p),f=n(130),v=r(f),y=n(134),_=r(y),g=n(115),m=r(g),b=n(123),E=r(b),w=n(137),S=function(){function e(e,t){this.authWrapper=e,t instanceof c.Location?this.location=t:this.location=c.Location.makeFromUrl(t)}return e.prototype.toString=function(){return o.validate("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return h.getMappings()},e.prototype.child=function(e){o.validate("child",[o.stringSpec()],arguments)
var t=v.child(this.location.path,e),n=new c.Location(this.location.bucket,t)
return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=v.parent(this.location.path)
if(null===e)return null
var t=new c.Location(this.location.bucket,e)
return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new c.Location(this.location.bucket,"")
return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return v.lastComponent(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),o.validate("put",[o.uploadDataSpec(),o.metadataSpec(!0)],arguments),this.throwIfRoot_("put"),new w.UploadTask(this,this.authWrapper,this.location,this.mappings(),new a.FbsBlob(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=g.StringFormat.RAW),o.validate("putString",[o.stringSpec(),o.stringSpec(m.formatValidator,!0),o.metadataSpec(!0)],arguments),this.throwIfRoot_("putString")
var r=m.dataFromString(t,e),i=d.clone(n)
return!E.isDef(i.contentType)&&E.isDef(r.contentType)&&(i.contentType=r.contentType),new w.UploadTask(this,this.authWrapper,this.location,this.mappings(),new a.FbsBlob(r.data,!0),i)},e.prototype.delete=function(){o.validate("delete",[],arguments),this.throwIfRoot_("delete")
var e=this
return this.authWrapper.getAuthToken().then(function(t){var n=_.deleteObject(e.authWrapper,e.location)
return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.getMetadata=function(){o.validate("getMetadata",[],arguments),this.throwIfRoot_("getMetadata")
var e=this
return this.authWrapper.getAuthToken().then(function(t){var n=_.getMetadata(e.authWrapper,e.location,e.mappings())
return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){o.validate("updateMetadata",[o.metadataSpec()],arguments),this.throwIfRoot_("updateMetadata")
var t=this
return this.authWrapper.getAuthToken().then(function(n){var r=_.updateMetadata(t.authWrapper,t.location,e,t.mappings())
return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){return o.validate("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(e){var t=e.downloadURLs[0]
if(E.isDef(t))return t
throw u.noDownloadURL()})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw u.invalidRootOperation(e)},e}()
t.Reference=S},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o
break}if(!(r<=n.length&&n.length<=i))throw d.invalidArgumentCount(r,i,e,n.length)
for(var o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?d.invalidArgument(o,e,t.message):d.invalidArgument(o,e,t)}}function o(e,t){return function(n){e(n),t(n)}}function a(e,t){function n(e){if(!_.isString(e))throw"Expected string."}var r
return r=e?o(n,e):n,new g(r,t)}function s(){function e(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||_.isNativeBlobDefined()&&e instanceof Blob))throw"Expected Blob or File."}return new g(e)}function u(e){return new g(v.metadataValidator,e)}function c(){function e(e){if(!(_.isNumber(e)&&e>=0))throw"Expected a number 0 or greater."}return new g(e)}function l(e,t){function n(t){if(!(null===t||_.isDef(t)&&t instanceof Object))throw"Expected an Object."
void 0!==e&&null!==e&&e(t)}return new g(n,t)}function h(e){function t(e){if(null!==e&&!_.isFunction(e))throw"Expected a Function."}return new g(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArgSpec=void 0,t.validate=i,t.and_=o,t.stringSpec=a,t.uploadDataSpec=s,t.metadataSpec=u,t.nonNegativeNumberSpec=c,t.looseObjectSpec=l,t.nullFunctionSpec=h
var p=n(116),d=r(p),f=n(127),v=r(f),y=n(123),_=r(y),g=function(){function e(e,t){var n=this
this.validator=function(t){n.optional&&!_.isJustDef(t)||e(t)},this.optional=!!t}return e}()
t.ArgSpec=g},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(e,t){return t}function o(e){return!g.isString(e)||e.length<2?e:(e=e,y.lastComponent(e))}function a(){function e(e,t){return o(t)}function t(e,t){return g.isDef(t)?+t:t}function n(e,t){if(!(g.isString(t)&&t.length>0))return[]
var n=encodeURIComponent
return t.split(",").map(function(t){var r=e.bucket,i=e.fullPath,o="/b/"+n(r)+"/o/"+n(i)
return b.makeDownloadUrl(o)+b.makeQueryString({alt:"media",token:t})})}if(w)return w
var r=[]
r.push(new E("bucket")),r.push(new E("generation")),r.push(new E("metageneration")),r.push(new E("name","fullPath",!0))
var i=new E("name")
i.xform=e,r.push(i)
var a=new E("size")
return a.xform=t,r.push(a),r.push(new E("timeCreated")),r.push(new E("updated")),r.push(new E("md5Hash",null,!0)),r.push(new E("cacheControl",null,!0)),r.push(new E("contentDisposition",null,!0)),r.push(new E("contentEncoding",null,!0)),r.push(new E("contentLanguage",null,!0)),r.push(new E("contentType",null,!0)),r.push(new E("metadata","customMetadata",!0)),r.push(new E("downloadTokens","downloadURLs",!1,n)),w=r}function s(e,t){function n(){var n=e.bucket,r=e.fullPath,i=new f.Location(n,r)
return t.makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function u(e,t,n){var r={}
r.type="file"
for(var i=n.length,o=0;o<i;o++){var a=n[o]
r[a.local]=a.xform(r,t[a.server])}return s(r,e),r}function c(e,t,n){var r=d.jsonObjectOrNull(t)
return null===r?null:u(e,r,n)}function l(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i]
o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function h(e){if(!e||!g.isObject(e))throw"Expected Metadata object."
for(var t in e){var n=e[t]
if("customMetadata"===t){if(!g.isObject(n))throw"Expected object for 'customMetadata' mapping."}else if(g.isNonNullObject(n))throw"Mapping for '"+t+"' cannot be an object."}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mapping=void 0,t.noXform_=i,t.xformPath=o,t.getMappings=a,t.addRef=s,t.fromResource=u,t.fromResourceString=c,t.toResourceString=l,t.metadataValidator=h
var p=n(128),d=r(p),f=n(129),v=n(130),y=r(v),_=n(123),g=r(_),m=n(131),b=r(m),E=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||i}return e}()
t.Mapping=E
var w=null},function(e,t,n){"use strict"
function r(e){var t
try{t=JSON.parse(e)}catch(e){return null}return o.isNonArrayObject(t)?t:null}Object.defineProperty(t,"__esModule",{value:!0}),t.jsonObjectOrNull=r
var i=n(123),o=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(i)},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Location=void 0
var r=n(116),i=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(r),o=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent
return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n
try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n
throw i.invalidDefaultBucket(t)},e.makeFromUrl=function(t){function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}function r(e){e.path_=decodeURIComponent(e.path)}for(var o=null,a=new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),s={bucket:1,path:3},u=new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),c={bucket:1,path:3},l=[{regex:a,indices:s,postModify:n},{regex:u,indices:c,postModify:r}],h=0;h<l.length;h++){var p=l[h],d=p.regex.exec(t)
if(d){var f=d[p.indices.bucket],v=d[p.indices.path]
v||(v=""),o=new e(f,v),p.postModify(o)
break}}if(null==o)throw i.invalidUrl(t)
return o},e}()
t.Location=o},function(e,t){"use strict"
function n(e){if(0==e.length)return null
var t=e.lastIndexOf("/")
return-1===t?"":e.slice(0,t)}function r(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/")
return 0===e.length?n:e+"/"+n}function i(e){var t=e.lastIndexOf("/",e.length-2)
return-1===t?e:e.slice(t+1)}Object.defineProperty(t,"__esModule",{value:!0}),t.parent=n,t.child=r,t.lastComponent=i},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(e){return c.domainBase+c.apiBaseUrl+e}function o(e){return c.downloadBase+c.apiBaseUrl+e}function a(e){return c.domainBase+c.apiUploadBaseUrl+e}function s(e){var t=encodeURIComponent,n="?"
return h.forEach(e,function(e,r){var i=t(e)+"="+t(r)
n=n+i+"&"}),n=n.slice(0,-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.makeNormalUrl=i,t.makeDownloadUrl=o,t.makeUploadUrl=a,t.makeQueryString=s
var u=n(117),c=r(u),l=n(121),h=r(l)},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.FbsBlob=void 0
var i=n(133),o=r(i),a=n(115),s=r(a),u=n(123),c=r(u),l=function(){function e(e,t){var n=0,r=""
c.isNativeBlob(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(c.isNativeBlob(this.data_)){var r=this.data_,i=o.sliceBlob(r,t,n)
return null===i?null:new e(i)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
if(c.isNativeBlobDefined()){var r=t.map(function(t){return t instanceof e?t.data_:t})
return new e(o.getBlob.apply(null,r))}var i=t.map(function(e){return c.isString(e)?s.dataFromString(a.StringFormat.RAW,e).data:e.data_}),u=0
i.forEach(function(e){u+=e.byteLength})
var l=new Uint8Array(u),h=0
return i.forEach(function(e){for(var t=0;t<e.length;t++)l[h++]=e[t]}),new e(l,!0)},e.prototype.uploadData=function(){return this.data_},e}()
t.FbsBlob=l},function(e,t,n){"use strict"
function r(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
var n=r()
if(void 0!==n){for(var i=new n,o=0;o<e.length;o++)i.append(e[o])
return i.getBlob()}if(s.isNativeBlobDefined())return new Blob(e)
throw Error("This browser doesn't seem to support creating Blobs")}function o(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getBlob=i,t.sliceBlob=o
var a=n(123),s=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(a)},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(e){if(!e)throw w.unknown()}function o(e,t){function n(n,r){var o=C.fromResourceString(e,r,t)
return i(null!==o),o}return n}function a(e){function t(t,n){var r
return r=401===t.getStatus()?w.unauthenticated():402===t.getStatus()?w.quotaExceeded(e.bucket):403===t.getStatus()?w.unauthorized(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function s(e){function t(t,r){var i=n(t,r)
return 404===t.getStatus()&&(i=w.objectNotFound(e.path)),i.setServerResponseProp(r.serverResponseProp()),i}var n=a(e)
return t}function u(e,t,n){var r=t.fullServerUrl(),i=R.makeNormalUrl(r),a=e.maxOperationRetryTime(),u=new I.RequestInfo(i,"GET",o(e,n),a)
return u.errorHandler=s(t),u}function c(e,t,n,r){var i=t.fullServerUrl(),a=R.makeNormalUrl(i),u=C.toResourceString(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=e.maxOperationRetryTime(),h=new I.RequestInfo(a,"PATCH",o(e,r),l)
return h.headers=c,h.body=u,h.errorHandler=s(t),h}function l(e,t){function n(e,t){}var r=t.fullServerUrl(),i=R.makeNormalUrl(r),o=e.maxOperationRetryTime(),a=new I.RequestInfo(i,"DELETE",n,o)
return a.successCodes=[200,204],a.errorHandler=s(t),a}function h(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function p(e,t,n){var r=P.clone(n)
return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=h(null,t)),r}function d(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},c=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2)
return e}()
u["Content-Type"]="multipart/related; boundary="+c
var l=p(t,r,i),h=C.toResourceString(l,n),d="--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+c+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",f="\r\n--"+c+"--",v=b.FbsBlob.getBlob(d,r,f)
if(null===v)throw w.cannotSliceBlob()
var y={name:l.fullPath},_=R.makeUploadUrl(s),g=e.maxUploadRetryTime(),m=new I.RequestInfo(_,"POST",o(e,n),g)
return m.urlParams=y,m.headers=u,m.body=v.uploadData(),m.errorHandler=a(t),m}function f(e,t){var n
try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){i(!1)}var r=t||["active"]
return i(m.contains(r,n)),n}function v(e,t,n,r,o){function s(e,t){f(e)
var n
try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){i(!1)}return i(O.isString(n)),n}var u=t.bucketOnlyServerUrl(),c=p(t,r,o),l={name:c.fullPath},h=R.makeUploadUrl(u),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},v=C.toResourceString(c,n),y=e.maxUploadRetryTime(),_=new I.RequestInfo(h,"POST",s,y)
return _.urlParams=l,_.headers=d,_.body=v,_.errorHandler=a(t),_}function y(e,t,n,r){function o(e,t){var n,o=f(e,["active","final"])
try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){i(!1)}var a=parseInt(n,10)
return i(!isNaN(a)),new A(a,r.size(),"final"===o)}var s={"X-Goog-Upload-Command":"query"},u=e.maxUploadRetryTime(),c=new I.RequestInfo(n,"POST",o,u)
return c.headers=s,c.errorHandler=a(t),c}function _(e,t,n,r,i,s,u,c){function l(e,n){var i,a=f(e,["active","final"]),u=h.current+d,c=r.size()
return i="final"===a?o(t,s)(e,n):null,new A(u,c,"final"===a,i)}var h=new A(0,0)
if(u?(h.current=u.current,h.total=u.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw w.serverFileWrongSize()
var p=h.total-h.current,d=p
i>0&&(d=Math.min(d,i))
var v=h.current,y=v+d,_=d===p?"upload, finalize":"upload",g={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":h.current},m=r.slice(v,y)
if(null===m)throw w.cannotSliceBlob()
var b=t.maxUploadRetryTime(),E=new I.RequestInfo(n,"POST",l,b)
return E.headers=g,E.body=m.uploadData(),E.progressCallback=c||null,E.errorHandler=a(e),E}Object.defineProperty(t,"__esModule",{value:!0}),t.resumableUploadChunkSize=t.ResumableUploadStatus=void 0,t.handlerCheck=i,t.metadataHandler=o,t.sharedErrorHandler=a,t.objectErrorHandler=s,t.getMetadata=u,t.updateMetadata=c,t.deleteObject=l,t.determineContentType_=h,t.metadataForUpload_=p,t.multipartUpload=d,t.checkResumeHeader_=f,t.createResumableUpload=v,t.getResumableUploadStatus=y,t.continueResumableUpload=_
var g=n(135),m=r(g),b=n(132),E=n(116),w=r(E),S=n(127),C=r(S),T=n(121),P=r(T),I=n(136),N=n(123),O=r(N),k=n(131),R=r(k),A=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}()
t.ResumableUploadStatus=A
t.resumableUploadChunkSize=262144},function(e,t){"use strict"
function n(e,t){return-1!==e.indexOf(t)}function r(e){return Array.prototype.slice.call(e)}function i(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.contains=n,t.clone=r,t.remove=i},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}()
t.RequestInfo=n},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.UploadTask=void 0
var i=n(118),o=r(i),a=n(138),s=n(139),u=n(126),c=r(u),l=n(135),h=r(l),p=n(140),d=n(116),f=r(d),v=n(122),y=r(v),_=n(134),g=r(_),m=n(123),b=r(m),E=function(){function e(e,t,n,r,o,a){void 0===a&&(a=null)
var s=this
this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=o,this.metadata_=a,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=i.InternalTaskState.RUNNING,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(f.Code.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(i.InternalTaskState.ERROR))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(f.Code.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(i.InternalTaskState.ERROR))},this.promise_=y.make(function(e,t){s.resolve_=e,s.reject_=t,s.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_
return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===i.InternalTaskState.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this
this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case i.InternalTaskState.RUNNING:e(n)
break
case i.InternalTaskState.CANCELING:t.transition_(i.InternalTaskState.CANCELED)
break
case i.InternalTaskState.PAUSING:t.transition_(i.InternalTaskState.PAUSED)}})},e.prototype.createResumable_=function(){var e=this
this.resolveToken_(function(t){var n=g.createResumableUpload(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t)
e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_
this.resolveToken_(function(n){var r=g.getResumableUploadStatus(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n)
e.request_=i,i.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=g.resumableUploadChunkSize*this.chunkMultiplier_,n=new g.ResumableUploadStatus(this.transferred_,this.blob_.size()),r=this.uploadUrl_
this.resolveToken_(function(o){var a
try{a=g.continueResumableUpload(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(i.InternalTaskState.ERROR)}var s=e.authWrapper_.makeRequest(a,o)
e.request_=s,s.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(i.InternalTaskState.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){g.resumableUploadChunkSize*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this
this.resolveToken_(function(t){var n=g.getMetadata(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t)
e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(i.InternalTaskState.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this
this.resolveToken_(function(t){var n=g.multipartUpload(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t)
e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(i.InternalTaskState.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_
this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case i.InternalTaskState.CANCELING:case i.InternalTaskState.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel()
break
case i.InternalTaskState.RUNNING:var t=this.state_===i.InternalTaskState.PAUSED
this.state_=e,t&&(this.notifyObservers_(),this.start_())
break
case i.InternalTaskState.PAUSED:this.state_=e,this.notifyObservers_()
break
case i.InternalTaskState.CANCELED:this.error_=f.canceled(),this.state_=e,this.notifyObservers_()
break
case i.InternalTaskState.ERROR:case i.InternalTaskState.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case i.InternalTaskState.PAUSING:this.transition_(i.InternalTaskState.PAUSED)
break
case i.InternalTaskState.CANCELING:this.transition_(i.InternalTaskState.CANCELED)
break
case i.InternalTaskState.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=o.taskStateFromInternalTaskState(this.state_)
return new s.UploadTaskSnapshot(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function o(t){if(e!==i.TaskEvent.STATE_CHANGED)throw"Expected one of the event types: ["+i.TaskEvent.STATE_CHANGED+"]."}function s(e){try{return void p(e)}catch(e){}try{d(e)
if(!(b.isJustDef(e.next)||b.isJustDef(e.error)||b.isJustDef(e.complete)))throw""
return}catch(e){throw h}}function u(e){function t(t,n,i){null!==e&&c.validate("on",e,arguments)
var o=new a.Observer(t,n,r)
return v.addObserver_(o),function(){v.removeObserver_(o)}}return t}function l(e){if(null===e)throw h
s(e)}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0)
var h="Expected a function or an Object with one of `next`, `error`, `complete` properties.",p=c.nullFunctionSpec(!0).validator,d=c.looseObjectSpec(null,!0).validator,f=[c.stringSpec(o),c.looseObjectSpec(s,!0),c.nullFunctionSpec(!0),c.nullFunctionSpec(!0)]
c.validate("on",f,arguments)
var v=this,y=[c.looseObjectSpec(l),c.nullFunctionSpec(!0),c.nullFunctionSpec(!0)]
return b.isJustDef(t)||b.isJustDef(n)||b.isJustDef(r)?u(null)(t,n,r):u(y)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){h.remove(this.observers_,e)},e.prototype.notifyObservers_=function(){var e=this
this.finishPromise_(),h.clone(this.observers_).forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0
switch(o.taskStateFromInternalTaskState(this.state_)){case i.TaskState.SUCCESS:(0,p.async)(this.resolve_.bind(null,this.snapshot))()
break
case i.TaskState.CANCELED:case i.TaskState.ERROR:var t=this.reject_;(0,p.async)(t.bind(null,this.error_))()
break
default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(o.taskStateFromInternalTaskState(this.state_)){case i.TaskState.RUNNING:case i.TaskState.PAUSED:null!==e.next&&(0,p.async)(e.next.bind(e,this.snapshot))()
break
case i.TaskState.SUCCESS:null!==e.complete&&(0,p.async)(e.complete.bind(e))()
break
case i.TaskState.CANCELED:case i.TaskState.ERROR:null!==e.error&&(0,p.async)(e.error.bind(e,this.error_))()
break
default:null!==e.error&&(0,p.async)(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){c.validate("resume",[],arguments)
var e=this.state_===i.InternalTaskState.PAUSED||this.state_===i.InternalTaskState.PAUSING
return e&&this.transition_(i.InternalTaskState.RUNNING),e},e.prototype.pause=function(){c.validate("pause",[],arguments)
var e=this.state_===i.InternalTaskState.RUNNING
return e&&this.transition_(i.InternalTaskState.PAUSING),e},e.prototype.cancel=function(){c.validate("cancel",[],arguments)
var e=this.state_===i.InternalTaskState.RUNNING||this.state_===i.InternalTaskState.PAUSING
return e&&this.transition_(i.InternalTaskState.CANCELING),e},e}()
t.UploadTask=E},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0
var r=n(123),i=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(r),o=function(){function e(e,t,n){if(i.isFunction(e)||i.isDef(t)||i.isDef(n))this.next=e,this.error=t||null,this.complete=n||null
else{var r=e
this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}return e}()
t.Observer=o},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=function(){function e(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(e.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var e=this.metadata.downloadURLs
return null!=e&&null!=e[0]?e[0]:null}return null},enumerable:!0,configurable:!0}),e}()
t.UploadTaskSnapshot=n},function(e,t,n){"use strict"
function r(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]
o.resolve(!0).then(function(){e.apply(null,t)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.async=r
var i=n(122),o=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(i)},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceInternals=t.Service=void 0
var i=n(126),o=r(i),a=n(142),s=n(129),u=n(122),c=r(u),l=n(145),h=r(l),p=n(125),d=function(){function e(e,t,n){function r(e,t){return new p.Reference(e,t)}if(this.bucket_=null,this.authWrapper_=new a.AuthWrapper(e,r,h.makeRequest,this,t),this.app_=e,null!=n)this.bucket_=s.Location.makeFromBucketSpec(n)
else{var i=this.authWrapper_.bucket()
null!=i&&(this.bucket_=new s.Location(i,""))}this.internals_=new f(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(o.validate("ref",[o.stringSpec(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.")
var n=new p.Reference(this.authWrapper_,this.bucket_)
return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead."
try{s.Location.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return o.validate("refFromURL",[o.stringSpec(t,!1)],arguments),new p.Reference(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){o.validate("setMaxUploadRetryTime",[o.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){o.validate("setMaxOperationRetryTime",[o.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}()
t.Service=d
var f=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),c.resolve(void 0)},e}()
t.ServiceInternals=f},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthWrapper=void 0
var i=n(117),o=r(i),a=n(116),s=r(a),u=n(143),c=n(129),l=n(122),h=r(l),p=n(144),d=n(123),f=r(d),v=function(){function e(t,n,r,i,a){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options
f.isDef(s)&&(this.bucket_=e.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=a,this.service_=i,this.maxOperationRetryTime_=o.defaultMaxOperationRetryTime,this.maxUploadRetryTime_=o.defaultMaxUploadRetryTime,this.requestMap_=new p.RequestMap}return e.extractBucket_=function(e){var t=e[o.configOption]||null
return null==t?null:c.Location.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&f.isDef(this.app_.INTERNAL)&&f.isDef(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):h.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw s.appDeleted()
return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new u.FailRequest(s.appDeleted())
var n=this.requestMaker_(e,t,this.pool_)
return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}()
t.AuthWrapper=v},function(e,t,n){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.FailRequest=void 0
var r=n(122),i=function(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}(r),o=function(){function e(e){this.promise_=i.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}()
t.FailRequest=o},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestMap=void 0
var i=n(121),o=r(i),a=n(117),s=r(a),u=function(){function e(){this.map_={},this.id_=s.minSafeInteger}return e.prototype.addRequest=function(e){function t(){delete r.map_[n]}var n=this.id_
this.id_++,this.map_[n]=e
var r=this
e.getPromise().then(t,t)},e.prototype.clear=function(){o.forEach(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},e}()
t.RequestMap=u},function(e,t,n){"use strict"
function r(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function i(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function o(e){var t=void 0!==C.default?C.default.SDK_VERSION:"AppManager"
e["X-Firebase-Storage-Version"]="webjs/"+t}function a(e,t,n){var r=b.makeQueryString(e.urlParams),a=e.url+r,s=f.clone(e.headers)
return i(s,t),o(s),new T(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestEndStatus=void 0,t.addAuthHeader_=i,t.addVersionHeader_=o,t.makeRequest=a
var s=n(135),u=r(s),c=n(146),l=r(c),h=n(116),p=r(h),d=n(121),f=r(d),v=n(122),y=r(v),_=n(123),g=r(_),m=n(131),b=r(m),E=n(124),w=r(E),S=n(7),C=function(e){return e&&e.__esModule?e:{default:e}}(S),T=function(){function e(e,t,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l
var h=this
this.promise_=y.make(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){function e(e,t){function r(e){var t=e.loaded,r=e.lengthComputable?e.total:-1
null!==n.progressCallback_&&n.progressCallback_(t,r)}if(t)return void e(!1,new P(!1,null,!0))
var i=n.pool_.createXhrIo()
n.pendingXhr_=i,null!==n.progressCallback_&&i.addUploadProgressListener(r),i.send(n.url_,n.method_,n.body_,n.headers_).then(function(t){null!==n.progressCallback_&&t.removeUploadProgressListener(r),n.pendingXhr_=null,t=t
var i=t.getErrorCode()===w.ErrorCode.NO_ERROR,o=t.getStatus()
if(!i||n.isRetryStatusCode_(o)){var a=t.getErrorCode()===w.ErrorCode.ABORT
return void e(!1,new P(!1,null,a))}var s=u.contains(n.successCodes_,o)
e(!0,new P(s,t))})}function t(e,t){var r=n.resolve_,i=n.reject_,o=t.xhr
if(t.wasSuccessCode)try{var a=n.callback_(o,o.getResponseText())
g.isJustDef(a)?r(a):r()}catch(e){i(e)}else if(null!==o){var s=p.unknown()
s.setServerResponseProp(o.getResponseText()),i(n.errorCallback_?n.errorCallback_(o,s):s)}else if(t.canceled){var s=n.appDelete_?p.appDeleted():p.canceled()
i(s)}else{var s=p.retryLimitExceeded()
i(s)}}var n=this
this.canceled_?t(!1,new P(!1,null,!0)):this.backoffId_=l.start(e,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&l.stop(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=u.contains(n,e),i=u.contains(this.additionalRetryCodes_,e)
return t||r||i},e}(),P=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}()
t.RequestEndStatus=P},function(e,t){"use strict"
function n(e,t,n){function r(){return 2===h}function i(){p||(p=!0,t.apply(null,arguments))}function o(t){c=setTimeout(function(){c=null,e(a,r())},t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]
if(!p){if(e)return void i.apply(null,arguments)
if(r()||l)return void i.apply(null,arguments)
u<64&&(u*=2)
var a
1===h?(h=2,a=0):a=1e3*(u+Math.random()),o(a)}}function s(e){d||(d=!0,p||(null!==c?(e||(h=2),clearTimeout(c),o(0)):e||(h=1)))}var u=1,c=null,l=!1,h=0,p=!1,d=!1
return o(0),setTimeout(function(){l=!0,s(!0)},n),s}function r(e){e(!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.start=n,t.stop=r},function(e,t,n){"use strict"
function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=function(e){return self&&"ServiceWorkerGlobalScope"in self?new u.default(e):new a.default(e)},n={Messaging:a.default}
e.INTERNAL.registerService("messaging",t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMessaging=i
var o=n(148),a=r(o),s=n(157),u=r(s)
i(r(n(7)).default)},function(e,t,n){"use strict"
function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0})
var i=n(149),o=r(i),a=n(150),s=r(a),u=n(155),c=r(u),l=n(156),h=r(l),p=n(154),d=r(p),f=n(10),v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(e){function t(t){var n=e.call(this,t)||this
return n.registrationToUse_,n.manifestCheckPromise_,n.messageObserver_=null,n.onMessage_=(0,f.createSubscribe)(function(e){n.messageObserver_=e}),n.tokenRefreshObserver_=null,n.onTokenRefresh_=(0,f.createSubscribe)(function(e){n.tokenRefreshObserver_=e}),n.setupSWMessageListener_(),n}return v(t,e),t.prototype.getToken=function(){var t=this
return this.isSupported_()?this.manifestCheck_().then(function(){return e.prototype.getToken.call(t)}):Promise.reject(this.errorFactory_.create(s.default.codes.UNSUPPORTED_BROWSER))},t.prototype.manifestCheck_=function(){var e=this
if(this.manifestCheckPromise_)return this.manifestCheckPromise_
var t=document.querySelector('link[rel="manifest"]')
return this.manifestCheckPromise_=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.errorFactory_.create(s.default.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},t.prototype.requestPermission=function(){var e=this
return Notification.permission===d.default.granted?Promise.resolve():new Promise(function(t,n){var r=function(r){return r===d.default.granted?t():n(r===d.default.denied?e.errorFactory_.create(s.default.codes.PERMISSION_BLOCKED):e.errorFactory_.create(s.default.codes.PERMISSION_DEFAULT))},i=Notification.requestPermission(function(e){i||r(e)})
i&&i.then(r)})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(s.default.codes.SW_REGISTRATION_EXPECTED)
if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(s.default.codes.USE_SW_BEFORE_GET_TOKEN)
this.registrationToUse_=e},t.prototype.onMessage=function(e,t,n){return this.onMessage_(e,t,n)},t.prototype.onTokenRefresh=function(e,t,n){return this.onTokenRefresh_(e,t,n)},t.prototype.waitForRegistrationToActivate_=function(e){var t=this,n=e.installing||e.waiting||e.active
return new Promise(function(r,i){if(!n)return void i(t.errorFactory_.create(s.default.codes.NO_SW_IN_REG))
if("activated"===n.state)return void r(e)
if("redundant"===n.state)return void i(t.errorFactory_.create(s.default.codes.SW_REG_REDUNDANT))
var o=function o(){if("activated"===n.state)r(e)
else{if("redundant"!==n.state)return
i(t.errorFactory_.create(s.default.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",o)}
n.addEventListener("statechange",o)})},t.prototype.getSWRegistration_=function(){var e=this
return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register(h.default.path,{scope:h.default.scope}).catch(function(t){throw e.errorFactory_.create(s.default.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse_=t,t.update(),t})}))},t.prototype.setupSWMessageListener_=function(){var e=this
"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[c.default.PARAMS.TYPE_OF_MSG]){var n=t.data
switch(n[c.default.PARAMS.TYPE_OF_MSG]){case c.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case c.default.TYPES_OF_MSG.NOTIFICATION_CLICKED:var r=n[c.default.PARAMS.DATA]
e.messageObserver_.next(r)}}},!1)},t.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(o.default)
t.default=y,e.exports=t.default},function(e,t,n){"use strict"
function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0})
var i=n(17),o=n(150),a=r(o),s=n(151),u=r(s),c=n(154),l=r(c),h="messagingSenderId",p=function(){function e(e){var t=this
if(this.errorFactory_=new i.ErrorFactory("messaging","Messaging",a.default.map),!e.options[h]||"string"!=typeof e.options[h])throw this.errorFactory_.create(a.default.codes.BAD_SENDER_ID)
this.messagingSenderId_=e.options[h],this.tokenManager_=new u.default,this.app=e,this.INTERNAL={},this.INTERNAL.delete=function(){return t.delete}}return e.prototype.getToken=function(){var e=this,t=this.getNotificationPermission_()
return t!==l.default.granted?t===l.default.denied?Promise.reject(this.errorFactory_.create(a.default.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then(function(t){return e.tokenManager_.getSavedToken(e.messagingSenderId_,t).then(function(n){return n||e.tokenManager_.createToken(e.messagingSenderId_,t)})})},e.prototype.deleteToken=function(e){var t=this
return this.tokenManager_.deleteToken(e).then(function(){return t.getSWRegistration_().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},e.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(a.default.codes.SHOULD_BE_INHERITED)},e.prototype.requestPermission=function(){throw this.errorFactory_.create(a.default.codes.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(e){throw this.errorFactory_.create(a.default.codes.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(e,t,n){throw this.errorFactory_.create(a.default.codes.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(e,t,n){throw this.errorFactory_.create(a.default.codes.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(e){throw this.errorFactory_.create(a.default.codes.AVAILABLE_IN_SW)},e.prototype.delete=function(){this.tokenManager_.closeDatabase()},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenManager=function(){return this.tokenManager_},e}()
t.default=p,e.exports=t.default},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},r=(i={},i[n.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",i[n.AVAILABLE_IN_SW]="This method is available in a service worker context.",i[n.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",i[n.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",i[n.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",i[n.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",i[n.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",i[n.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",i[n.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",i[n.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",i[n.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",i[n.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",i[n.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",i[n.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",i[n.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",i[n.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",i[n.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",i[n.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",i[n.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",i[n.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",i[n.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",i[n.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",i[n.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",i[n.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",i[n.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",i[n.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",i[n.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",i[n.BAD_SCOPE]="The service worker scope must be a string with at least one character.",i[n.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",i[n.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",i[n.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",i[n.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",i[n.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",i)
t.default={codes:n,map:r}
var i
e.exports=t.default},function(e,t,n){"use strict"
function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0})
var i=n(17),o=n(150),a=r(o),s=n(152),u=r(s),c=n(153),l=r(c),h="fcm_token_object_Store",p=function(){function e(){this.errorFactory_=new i.ErrorFactory("messaging","Messaging",a.default.map),this.openDbPromise_=null}return e.prototype.openDatabase_=function(){return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(e,t){var n=indexedDB.open("fcm_token_details_db",1)
n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore(h,{keyPath:"swScope"})
n.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),n.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.openDbPromise_)},e.prototype.closeDatabase=function(){var e=this
return this.openDbPromise_?this.openDbPromise_.then(function(t){t.close(),e.openDbPromise_=null}):Promise.resolve()},e.prototype.getTokenDetailsFromToken=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var i=t.transaction([h]),o=i.objectStore(h),a=o.index("fcmToken"),s=a.get(e)
s.onerror=function(e){r(e.target.error)},s.onsuccess=function(e){n(e.target.result)}})})},e.prototype.getTokenDetailsFromSWScope_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var i=t.transaction([h]),o=i.objectStore(h),a=o.get(e)
a.onerror=function(e){r(e.target.error)},a.onsuccess=function(e){n(e.target.result)}})})},e.prototype.getAllTokenDetailsForSenderId_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(n,r){var i=t.transaction([h]),o=i.objectStore(h),a=[],s=o.openCursor()
s.onerror=function(e){r(e.target.error)},s.onsuccess=function(t){var r=t.target.result
r?(r.value.fcmSenderId===e&&a.push(r.value),r.continue()):n(a)}})})},e.prototype.subscribeToFCM=function(e,t,n){var r=this,i=(0,u.default)(t.getKey("p256dh")),o=(0,u.default)(t.getKey("auth")),s="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+i+"&encryption_auth="+o
n&&(s+="&pushSet="+n)
var c=new Headers
c.append("Content-Type","application/x-www-form-urlencoded")
var h={method:"POST",headers:c,body:s}
return fetch(l.default.ENDPOINT+"/fcm/connect/subscribe",h).then(function(e){return e.json()}).then(function(e){var t=e
if(t.error){var n=t.error.message
throw r.errorFactory_.create(a.default.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!t.token)throw r.errorFactory_.create(a.default.codes.TOKEN_SUBSCRIBE_NO_TOKEN)
if(!t.pushSet)throw r.errorFactory_.create(a.default.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET)
return{token:t.token,pushSet:t.pushSet}})},e.prototype.isSameSubscription_=function(e,t){return e.endpoint===t.endpoint&&(0,u.default)(e.getKey("auth"))===t.auth&&(0,u.default)(e.getKey("p256dh"))===t.p256dh},e.prototype.saveTokenDetails_=function(e,t,n,r,i){var o={swScope:t.scope,endpoint:n.endpoint,auth:(0,u.default)(n.getKey("auth")),p256dh:(0,u.default)(n.getKey("p256dh")),fcmToken:r,fcmPushSet:i,fcmSenderId:e}
return this.openDatabase_().then(function(e){return new Promise(function(t,n){var r=e.transaction([h],"readwrite"),i=r.objectStore(h),a=i.put(o)
a.onerror=function(e){n(e.target.error)},a.onsuccess=function(e){t()}})})},e.prototype.getSavedToken=function(e,t){var n=this
return t instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(a.default.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(e).then(function(n){if(0!==n.length){var r=n.findIndex(function(n){return t.scope===n.swScope&&e===n.fcmSenderId})
if(-1!==r)return n[r]}}).then(function(e){if(e)return t.pushManager.getSubscription().catch(function(e){throw n.errorFactory_.create(a.default.codes.GET_SUBSCRIPTION_FAILED)}).then(function(t){if(t&&n.isSameSubscription_(t,e))return e.fcmToken})}):Promise.reject(this.errorFactory_.create(a.default.codes.SW_REGISTRATION_EXPECTED))},e.prototype.createToken=function(e,t){var n=this
if("string"!=typeof e||0===e.length)return Promise.reject(this.errorFactory_.create(a.default.codes.BAD_SENDER_ID))
if(!(t instanceof ServiceWorkerRegistration))return Promise.reject(this.errorFactory_.create(a.default.codes.SW_REGISTRATION_EXPECTED))
var r,i
return t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe(l.default.SUBSCRIPTION_OPTIONS)}).then(function(t){return r=t,n.subscribeToFCM(e,r)}).then(function(o){return i=o,n.saveTokenDetails_(e,t,r,i.token,i.pushSet)}).then(function(){return i.token})},e.prototype.deleteToken=function(e){var t=this
return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(a.default.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw t.errorFactory_.create(a.default.codes.DELETE_TOKEN_NOT_FOUND)
return t.openDatabase_().then(function(n){return new Promise(function(r,i){var o=n.transaction([h],"readwrite"),s=o.objectStore(h),u=s.delete(e.swScope)
u.onerror=function(e){i(e.target.error)},u.onsuccess=function(n){if(0===n.target.result)return void i(t.errorFactory_.create(a.default.codes.FAILED_TO_DELETE_TOKEN))
r(e)}})})})},e}()
t.default=p,e.exports=t.default},function(e,t){"use strict"
function n(e){var t=new Uint8Array(e)
return window.btoa(String.fromCharCode.apply(null,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.exports=t.default},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],r={userVisibleOnly:!0,applicationServerKey:new Uint8Array(n)}
t.default={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:n,SUBSCRIPTION_OPTIONS:r},e.exports=t.default},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default={granted:"granted",default:"default",denied:"denied"},e.exports=t.default},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0})
var n={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},r={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},i=function(e,t){return r={},r[n.TYPE_OF_MSG]=e,r[n.DATA]=t,r
var r}
t.default={PARAMS:n,TYPES_OF_MSG:r,createNewMsg:i},e.exports=t.default},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"},e.exports=t.default},function(e,t,n){"use strict"
function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0})
var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(149),a=r(o),s=n(150),u=r(s),c=n(155),l=r(c),h=n(153),p=r(h),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}
return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(t){var n=e.call(this,t)||this
return self.addEventListener("push",function(e){return n.onPush_(e)},!1),self.addEventListener("pushsubscriptionchange",function(e){return n.onSubChange_(e)},!1),self.addEventListener("notificationclick",function(e){return n.onNotificationClick_(e)},!1),n.bgMessageHandler_=null,n}return d(t,e),t.prototype.onPush_=function(e){var t,n=this
try{t=e.data.json()}catch(e){return}var r=this.hasVisibleClients_().then(function(e){if(e){if(t.notification||n.bgMessageHandler_)return n.sendMessageToWindowClients_(t)}else{var r=n.getNotificationData_(t)
if(r){var i=r.title||""
return self.registration.showNotification(i,r)}if(n.bgMessageHandler_)return n.bgMessageHandler_(t)}})
e.waitUntil(r)},t.prototype.onSubChange_=function(e){var t=this,n=this.getToken().then(function(e){if(!e)throw t.errorFactory_.create(u.default.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE)
var n=null,r=t.getTokenManager()
return r.getTokenDetailsFromToken(e).then(function(e){if(!(n=e))throw t.errorFactory_.create(u.default.codes.INVALID_SAVED_TOKEN)
return self.registration.pushManager.subscribe(p.default.SUBSCRIPTION_OPTIONS)}).then(function(e){return r.subscribeToFCM(n.fcmSenderId,e,n.fcmPushSet)}).catch(function(e){return r.deleteToken(n.fcmToken).then(function(){throw t.errorFactory_.create(u.default.codes.UNABLE_TO_RESUBSCRIBE,{message:e})})})})
e.waitUntil(n)},t.prototype.onNotificationClick_=function(e){var t=this
if(e.notification&&e.notification.data&&e.notification.data.FCM_MSG){e.stopImmediatePropagation(),e.notification.close()
var n=e.notification.data.FCM_MSG,r=n.notification.click_action
if(r){var i=this.getWindowClient_(r).then(function(e){return e||self.clients.openWindow(r)}).then(function(e){if(e){n.notification
delete n.notification
var r=l.default.createNewMsg(l.default.TYPES_OF_MSG.NOTIFICATION_CLICKED,n)
return t.attemptToMessageClient_(e,r)}})
e.waitUntil(i)}}},t.prototype.getNotificationData_=function(e){if(e&&"object"===i(e.notification)){var t=Object.assign({},e.notification)
return t.data=(n={},n.FCM_MSG=e,n),t
var n}},t.prototype.setBackgroundMessageHandler=function(e){if(e&&"function"!=typeof e)throw this.errorFactory_.create(u.default.codes.BG_HANDLER_FUNCTION_EXPECTED)
this.bgMessageHandler_=e},t.prototype.getWindowClient_=function(e){var t=new URL(e).href
return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){for(var n=null,r=0;r<e.length;r++){if(new URL(e[r].url).href===t){n=e[r]
break}}if(n)return n.focus(),n})},t.prototype.attemptToMessageClient_=function(e,t){var n=this
return new Promise(function(r,i){if(!e)return i(n.errorFactory_.create(u.default.codes.NO_WINDOW_CLIENT_TO_MSG))
e.postMessage(t),r()})},t.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){return e.some(function(e){return"visible"===e.visibilityState})})},t.prototype.sendMessageToWindowClients_=function(e){var t=this
return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=l.default.createNewMsg(l.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED,e)
return Promise.all(n.map(function(e){return t.attemptToMessageClient_(e,r)}))})},t.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},t}(a.default)
t.default=f,e.exports=t.default},function(e,t,n){"use strict"
var r=n(2)
e.exports={init:function(){r.registerHelper("next",function(e){var t=parseInt(e)+1
return t<10?"0"+t:t}),r.registerHelper("prev",function(e){var t=parseInt(e)-1
return t<10?"0"+t:t})}}}])
